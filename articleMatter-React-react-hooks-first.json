{"info":{"title":"[Note] React Hooks æ•´ç† (ä¸Š)","fileName":"react-hooks-first","description":"å…§å®¹ç‚º useStateã€useEffectã€useLayoutEffectã€useMemoã€useCallback çš„æ•´ç†ã€‚","createdAt":"2021-12-08T00:00:00.000Z","updatedAt":"2021-12-08T00:00:00.000Z","tags":["React","React Hooks"]},"content":"<h6>tags: <code>React</code>ã€<code>React Hooks</code></h6>\n<h1 id=\"[Note] React Hooks æ•´ç†ï¼ˆä¸Šï¼‰\" title=\"[Note] React Hooks æ•´ç†ï¼ˆä¸Šï¼‰\">[Note] React Hooks æ•´ç†ï¼ˆä¸Šï¼‰</h1>\n<p>æœ€è¿‘é–‹å§‹å­¸ç¿’ React Hooksï¼Œè¶é€™æ¬¡æ©Ÿæœƒæ•´ç†å¸¸è¦‹çš„ Hooksï¼Œç›®å‰å°šç¼ºå…©å€‹é¡å¤– Hooks (<a  href=\"https://zh-hant.reactjs.org/docs/hooks-reference.html#useimperativehandle\" target=\"_blank\" rel=\"noreferrer noopener\"><code>useImperativeHandle</code></a> &amp; <a  href=\"https://zh-hant.reactjs.org/docs/hooks-reference.html#usedebugvalue\" target=\"_blank\" rel=\"noreferrer noopener\"><code>useDebugValue</code></a>)ï¼Œå…§å®¹æ…¢æ…¢å¢åŠ ä¸­ ğŸƒ</p>\n<p>&lt;br/&gt;</p>\n<table>\n<thead>\n<tr>\n<th>æ–‡ç« </th>\n<th>Hooks</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a  href=\"https://jenniesh.github.io/dev/React/react-hooks-first\" target=\"_blank\" rel=\"noreferrer noopener\">React Hooks æ•´ç† (ä¸Š)</a></td>\n<td>useStateã€useEffectã€useLayoutEffectã€useMemoã€useCallback</td>\n</tr>\n<tr>\n<td><a  href=\"https://jenniesh.github.io/dev/React/react-hooks-second\" target=\"_blank\" rel=\"noreferrer noopener\">React Hooks æ•´ç† (ä¸‹)</a></td>\n<td>useRefã€useContextã€useReducer</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"Why Hook?\" title=\"Why Hook?\"><a href=\"#Why Hook?\">Why Hook?</a></h2>\n<ul>\n<li>æ›´æ–¹ä¾¿åœ¨ component ä¹‹é–“å…±ç”¨ stateful çš„é‚è¼¯</li>\n<li>è§£æ±º lifecycle æ–¹æ³•å¸¸å¸¸å°‡ä¸ç›¸é—œçš„é‚è¼¯æ··åˆåœ¨ä¸€èµ· e.g. event listener å’ŒæŠ“å–è³‡æ–™è¨­ç½®åœ¨åŒå€‹ <code>componentDidMount</code></li>\n<li>é™ä½åˆå­¸è€…å­¸ç¿’é–€æª»ï¼Œclass éœ€è¦è¨˜å¾—ç¶å®šå’Œäº‹å…ˆäº†è§£ <code>this</code> åœ¨ JavaScript ä¸­å¦‚ä½•é‹ä½œ</li>\n</ul>\n<h2 id=\"Hook é€šç”¨è¦å‰‡\" title=\"Hook é€šç”¨è¦å‰‡\"><a href=\"#Hook é€šç”¨è¦å‰‡\">Hook é€šç”¨è¦å‰‡</a></h2>\n<ul>\n<li>åªåœ¨ <strong>React function componen</strong>t æˆ–<strong>è‡ªå®šç¾©çš„ Hook</strong> å‘¼å« Hook</li>\n<li>åªåœ¨<strong>æœ€ä¸Šå±¤</strong>å‘¼å« Hookï¼šä¸è¦åœ¨è¿´åœˆã€åˆ¤æ–·å¼ã€æˆ–æ˜¯åµŒå¥— function ä¸­å‘¼å« Hook</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// ğŸš«ï¼š ä¸èƒ½æ”¾å…¥æ¢ä»¶å¼è£¡é¢</span>\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">App</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-literal\">true</span>) {\n    <span class=\"hljs-keyword\">const</span> [count, setCount] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">0</span>);\n  }\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>React<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span></span>\n  );\n};\n</code></pre>\n<h2 id=\"useState\" title=\"useState\"><a href=\"#useState\">useState</a></h2>\n<h3>ä½¿ç”¨æ–¹æ³•</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// èªæ³•ï¼š const [state, setState] = useState(åˆå§‹å€¼)</span>\n\n<span class=\"hljs-keyword\">const</span> [count, setCount] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">0</span>);\n</code></pre>\n<h3>é‡é»</h3>\n<ul>\n<li>ä½¿ç”¨é™£åˆ—è§£æ§‹è³¦å€¼ï¼Œå›å‚³çš„ç¬¬ä¸€å€‹å€¼ <code>count</code> ç‚ºç•¶å‰çš„ stateï¼Œç¬¬äºŒå€‹å€¼ <code>setCount</code> ç‚ºå¯æ›´æ–° state çš„æ–¹æ³•</li>\n<li><code>setState</code> å¯ç›´æ¥å‚³å€¼ï¼Œä¹Ÿå¯ä»¥å‚³å…¥ function</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// å…©ç¨®å¯«æ³•éƒ½æœ‰ç›¸åŒæ•ˆæœï¼Œä¸€æ¨£éƒ½æœƒ +1</span>\n\n<span class=\"hljs-comment\">// å¯«æ³•ä¸€ï¼šç›´æ¥å‚³å€¼</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">increase</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-title function_\">setCount</span>(count + <span class=\"hljs-number\">1</span>);\n };\n\n<span class=\"hljs-comment\">// å¯«æ³•äºŒï¼š function å¯æ‹¿åˆ° previous value</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">increase</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-title function_\">setCount</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">prevCount</span>)=&gt;</span> prevCount + <span class=\"hljs-number\">1</span>);\n};\n</code></pre>\n<details class='spoiler'><summary>setState è£œå……</summary>\n<div class=\"info\">\n<p><strong>ğŸ’¡ <code>setState</code> ä½¿ç”¨ function æ™‚æ©Ÿï¼š<br />\nå¦‚æœæ˜¯æœ‰ä½¿ç”¨åˆ° <code>previous value</code> ä¾†è¨­ç½®æ–°çš„ <code>value</code> æˆ–å½¼æ­¤é–“æœ‰ä¾è³´é—œä¿‚ã€‚</strong></p>\n<p>é›–ç„¶ä¸Šé¢å…©å€‹å¯«æ³•éƒ½å¯é”åˆ° <strong>+1</strong>ï¼Œä½†åœ¨ä¸‹é¢çš„ä¾‹å­å°±ä¸é©åˆç›´æ¥å‚³å€¼ï¼š</p>\n<p><code>increase</code> å…§å‘¼å«å…©æ¬¡ <code>setCount</code>ï¼Œç•¶ <code>increase</code> è¢«è§¸ç™¼å¾Œï¼Œæˆ‘å€‘é æœŸ <code>count</code> æœƒç­‰æ–¼ 2ï¼Œä½†å¯¦éš›å¾—åˆ° <strong>1</strong>ã€‚</p>\n<p>å› ç‚º <code>setCount(count + 1)</code>ï¼Œè£¡é¢çš„ <code>count</code> éƒ½é‚„æ˜¯ç•¶å‰ render å€¼ <strong>0</strong>ï¼Œæ‰€ä»¥ç­‰æ–¼åŸ·è¡Œå…©æ¬¡ <code>setCount(0 + 1)</code>ã€‚</p>\n<pre class=\"hljs\"><code><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Count</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [count, setCount] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">0</span>);\n\n  <span class=\"hljs-comment\">// é æœŸç‚º 2ï¼Œä½†å¯¦éš›å¾—åˆ° 1</span>\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">increase</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-title function_\">setCount</span>(count + <span class=\"hljs-number\">1</span>); <span class=\"hljs-comment\">// æ­¤æ™‚ count ç‚º 0ï¼Œç›¸ç•¶æ–¼ setCount(0 + 1)</span>\n    <span class=\"hljs-title function_\">setCount</span>(count + <span class=\"hljs-number\">1</span>); <span class=\"hljs-comment\">// æ­¤æ™‚ count ç‚º 0ï¼Œç›¸ç•¶æ–¼ setCount(0 + 1)</span>\n  };\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>{count}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{increase}</span>&gt;</span>+<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n  );\n};\n\n</code></pre>\n<p>é€™æ™‚æ”¹ç”¨ function å¯«æ³•ï¼Œ ç¢ºä¿æ˜¯ä½¿ç”¨ <code>count</code> çš„ <code>previous value</code> è€Œä¸æ˜¯ç•¶å‰ render å¾Œçš„å€¼ï¼Œå°±æœƒå¦‚é æœŸå¾—åˆ° <strong>2</strong> :</p>\n<pre class=\"hljs\"><code><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Count</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [count, setCount] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">0</span>);\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">increase</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-title function_\">setCount</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">prevCount</span> =&gt;</span> prevCount + <span class=\"hljs-number\">1</span>); <span class=\"hljs-comment\">// ç›¸ç•¶æ–¼ setCount(0 + 1)</span>\n    <span class=\"hljs-title function_\">setCount</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">prevCount</span> =&gt;</span> prevCount + <span class=\"hljs-number\">1</span>); <span class=\"hljs-comment\">// ç›¸ç•¶æ–¼ setCount(1 + 1)</span>\n  };\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>{count}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{increase}</span>&gt;</span>+<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n  );\n};\n</code></pre>\n</div>\n</details>\n<p>&lt;br/&gt;</p>\n<ul>\n<li>åˆå§‹å€¼æœ‰å…©ç¨®è¡¨ç¤ºæ–¹å¼ï¼Œå¯ç›´æ¥å‚³å…¥å€¼ï¼Œä¹Ÿå¯ä»¥ç”¨ function</li>\n</ul>\n<details class='spoiler'><summary>åˆå§‹å€¼ è£œå……</summary>\n<div class=\"info\">\n<p>ğŸ’¡ <strong>åˆå§‹å€¼ä½¿ç”¨ function å¯«æ³•çš„æ™‚æ©Ÿï¼š</strong></p>\n<p>å› ç‚ºæ¯æ¬¡ render æ™‚å€™éƒ½æœƒé‡æ–°åŸ·è¡Œ <code>useSate</code>ï¼Œå¦‚æœ<strong>åˆå§‹å€¼æ˜¯éœ€è¦éå¸¸è¤‡é›œè¨ˆç®—æ™‚</strong>ï¼Œæ¯æ¬¡æ›´æ–°éœ€è¦é‡æ–°è¨ˆç®—ï¼Œå°±æœƒé™ä½æ•ˆèƒ½ï¼Œé€™æ™‚å°±éœ€è¦å‚³å…¥ functionï¼Œ<strong>è©² function åªæœƒåœ¨åˆå§‹ render æ™‚è¢«èª¿ç”¨</strong>ã€‚</p>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// ç›´æ¥å‚³å€¼ï¼š</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">complexCompute</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;execution&quot;</span>);\n <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\n};\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Count</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n <span class=\"hljs-comment\">// æ¯æ¬¡æŒ‰ +1 æ™‚ï¼Œéƒ½æœƒå°å‡º â€˜executionâ€™</span>\n <span class=\"hljs-keyword\">const</span> [count, setCount] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-title function_\">complexCompute</span>());\n\n <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">increase</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n   <span class=\"hljs-title function_\">setCount</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">preCount</span> =&gt;</span> preCount + <span class=\"hljs-number\">1</span>);\n };\n\n <span class=\"hljs-keyword\">return</span> (\n   <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>{count}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{increase}</span>&gt;</span>+<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n   <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n );\n};\n</code></pre>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// æ”¹ç”¨ function</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Count</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-comment\">// é¦–æ¬¡æ¸²æŸ“å°å‡º â€˜executionâ€™ï¼Œå¾ŒçºŒæŒ‰ +1 æ™‚ï¼Œä¸æœƒåœ¨å°å‡ºå­—äº†</span>\n  <span class=\"hljs-keyword\">const</span> [count, setCount] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">complexCompute</span>());\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">increase</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-title function_\">setCount</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">preCount</span> =&gt;</span> preCount + <span class=\"hljs-number\">1</span>);\n  };\n\n    ...\n}\n</code></pre>\n</div>\n</details>\n<p>&lt;br/&gt;</p>\n<ul>\n<li><code>setState</code> æ˜¯å®Œå…¨è¦†è“‹ stateï¼Œè€Œé merge</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// ç›´æ¥æ•´å€‹è¦†å¯« fruitDate</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Fruit</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [fruitDate, setFruitDate] = <span class=\"hljs-title function_\">useState</span>({ <span class=\"hljs-attr\">amount</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-attr\">fruit</span>: <span class=\"hljs-string\">&quot;banana&quot;</span> });\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">change</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-title function_\">setFruitDate</span>({ <span class=\"hljs-attr\">fruit</span>: <span class=\"hljs-string\">&quot;apple&quot;</span> }); <span class=\"hljs-comment\">// è§¸ç™¼å¾Œï¼ŒfruitDate ç‚º { fruit: &quot;apple&quot; }</span>\n  };\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{change}</span>&gt;</span>change fruit<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span></span>\n};\n</code></pre>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// ä½¿ç”¨æ“´å±•é‹ç®—å­ï¼Œä¿ç•™ç‰©ä»¶å…§å…¶ä»–å±¬æ€§</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Fruit</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [fruitDate, setFruitDate] = <span class=\"hljs-title function_\">useState</span>({ <span class=\"hljs-attr\">amount</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-attr\">fruit</span>: <span class=\"hljs-string\">&quot;banana&quot;</span> });\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">change</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-title function_\">setFruitDate</span>({ ...fruitData, <span class=\"hljs-attr\">fruit</span>: <span class=\"hljs-string\">&quot;apple&quot;</span> }); <span class=\"hljs-comment\">// è§¸ç™¼å¾Œï¼ŒfruitDate ç‚º { amount: 1 fruit: &quot;apple&quot; }</span>\n  };\n\n  ...\n};\n</code></pre>\n<h2 id=\"useEffect\" title=\"useEffect\"><a href=\"#useEffect\">useEffect</a></h2>\n<h3>ä½¿ç”¨æ–¹æ³•</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// èªæ³•ï¼š useEffect(()=&gt;{},[ä¾è³´é …])</span>\n\n<span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-comment\">// æ¯æ¬¡ç•«é¢é‡æ–°æ¸²æŸ“å¾Œéƒ½æœƒåŸ·è¡Œ</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;executed&quot;</span>)\n});\n</code></pre>\n<h3>é‡é»</h3>\n<ul>\n<li>è™•ç† side effect äº‹ä»¶ï¼Œe.g. ajaxã€EventLister</li>\n<li>DOM æ”¹è®Š =&gt; æ¸²æŸ“ç•«é¢ =&gt; èª¿ç”¨ <code>useEffect</code></li>\n<li>å¯ä»¥æœ‰å¤šå€‹ä¾è³´é …ï¼Œçš†æ”¾åœ¨é™£åˆ—ä¸­ <code>useEffect(()=&gt;{ ... },[a, b, c])</code></li>\n<li>æ­é…ç¬¬äºŒåƒæ•¸å‚³å…¥ä¾è³´å’Œ return functionï¼Œå¯é”åˆ°åŸå…ˆ React ç”Ÿå‘½é€±æœŸ <code>componentDidMount</code>ã€<code>componentDidUpdate</code> å’Œ <code>componentWillUnmount</code> çš„æ•ˆæœ</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Fruit</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [fruit, setFruit] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-string\">&quot;banana&quot;</span>);\n  <span class=\"hljs-keyword\">const</span> [count, setCount] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">0</span>);\n\n  <span class=\"hljs-comment\">// A. ç¬¬äºŒåƒæ•¸ä¸å¸¶å…¥ï¼Œæ¯æ¬¡ç•«é¢é‡æ–°æ¸²æŸ“ï¼Œéƒ½æœƒåŸ·è¡Œ</span>\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-comment\">// ç•¶ fruit æˆ– count å€¼æ”¹è®Šï¼Œç•«é¢é‡æ–°æ¸²æŸ“ï¼Œéƒ½æœƒå°å‡º â€œchangedâ€</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;changed&quot;</span>);\n  });\n\n\n  <span class=\"hljs-comment\">// B. ç¬¬äºŒåƒæ•¸ï¼Œå‚³å…¥ç©ºé™£åˆ— []ï¼Œåªæœ‰åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ™‚åŸ·è¡Œ</span>\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-comment\">// åªåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æœƒå°å‡º &quot;init&quot;</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;init&quot;</span>);\n  }, []);\n\n\n  <span class=\"hljs-comment\">// C. ç¬¬äºŒåƒæ•¸ï¼Œå‚³å…¥ä¾è³´é …ï¼Œåªæœ‰åœ¨ä¾è³´é …æ”¹è®Šæ™‚æ‰åŸ·è¡Œ</span>\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-comment\">// åªæœ‰ count å€¼æ”¹è®Šï¼Œç•«é¢æ›´æ–°ï¼Œæ‰æœƒå°å‡º &quot;count changed&quot;</span>\n    <span class=\"hljs-comment\">// å¦‚æœæ˜¯ fruit å€¼æ”¹è®Šå‰‡ä¸è§¸ç™¼</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;count changed&quot;</span>);\n  }, [count]);\n\n\n  <span class=\"hljs-comment\">// D. return çš„ function æœƒåœ¨çµ„ä»¶ç§»é™¤å¾Œæœƒè§¸ç™¼</span>\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-comment\">// åˆæ¬¡æ¸²æŸ“æ™‚ï¼Œå»ºç«‹ setInterval</span>\n    <span class=\"hljs-keyword\">const</span> timer = <span class=\"hljs-built_in\">setInterval</span>(<span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;hello world&quot;</span>);\n    }, <span class=\"hljs-number\">1000</span>);\n\n    <span class=\"hljs-comment\">// åœ¨çµ„ä»¶ç§»é™¤å¾ŒæœƒåŸ·è¡Œ clearInterval</span>\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-built_in\">clearInterval</span>(timer);\n  }, []);\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setFruit(&quot;apple&quot;)}&gt;change fruit - {fruit}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>;\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setCount(prev =&gt; prev + 1)}&gt;increase count - {count}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>;\n    <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n  );\n};\n</code></pre>\n<h2 id=\"useLayoutEffect\" title=\"useLayoutEffect\"><a href=\"#useLayoutEffect\">useLayoutEffect</a></h2>\n<h3>ä½¿ç”¨æ–¹æ³•</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// èªæ³•ï¼š useLayoutEffect(()=&gt;{},[ä¾è³´é …])</span>\n\n<span class=\"hljs-title function_\">useLayoutEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n     <span class=\"hljs-comment\">// æ¯æ¬¡ç•«é¢é‡æ–°æ¸²æŸ“å‰éƒ½æœƒåŸ·è¡Œ</span>\n     <span class=\"hljs-comment\">// å° DOM æ“ä½œ ....</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;executed&quot;</span>)\n});\n</code></pre>\n<h3>é‡é»</h3>\n<ul>\n<li>DOM æ”¹è®Š =&gt; èª¿ç”¨ <code>useLayoutEffect</code> =&gt; æ¸²æŸ“ç•«é¢</li>\n<li>è¬¹æ…ä½¿ç”¨ï¼Œæœƒå½±éŸ¿ä½¿ç”¨è€…é«”é©—ï¼Œå› ç‚ºéœ€è¦ç­‰å¾… <code>useLayoutEffect</code> å…§ç¨‹å¼å¯¦è¡Œå®Œï¼Œæ‰æœƒæ¸²æŸ“å‡ºç•«é¢</li>\n<li>ä½¿ç”¨æ™‚æ©Ÿï¼šéœ€è¦åŸºæ–¼ DOM çš„ Layout åšé¡å¤–æ“ä½œ e.g. æ¸¬é‡ DOM</li>\n</ul>\n<h3>ç¯„ä¾‹ (useEffect v.s. useLayoutEffect)</h3>\n<h4>- ä½¿ç”¨ useEffect</h4>\n<p>åœ¨æ…¢å‹•ä½œçš„ gif è£¡é¢å¯ä»¥çœ‹åˆ°ä¸€é–‹å§‹çš„ <code>hi</code> (<code>top: 0</code>) å…ˆå‡ºç¾åœ¨æŒ‰éˆ•æ—é‚Šï¼Œåœ¨ä¸‹ä¸€å€‹ç•«é¢æ‰å¥—ç”¨ <code>top: 100px</code>ï¼Œå¦‚æœç”¨æ­£å¸¸é€Ÿåº¦çœ‹ï¼Œå°±æœƒçœ‹åˆ°ç¬¬ä¸€å€‹ hi æœƒé–ƒçˆä¸€ä¸‹ï¼Œé€™å°ä½¿ç”¨è€…é«”é©—å¾ˆä¸å¥½ã€‚</p>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// ä½¿ç”¨ useEffect</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Foo</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [show, setShow] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">false</span>);\n  <span class=\"hljs-keyword\">const</span> greetRef = <span class=\"hljs-title function_\">useRef</span>(<span class=\"hljs-literal\">null</span>);\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (greetRef.<span class=\"hljs-property\">current</span> === <span class=\"hljs-literal\">null</span>) <span class=\"hljs-keyword\">return</span>;\n\n    (greetRef.<span class=\"hljs-property\">current</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-title class_\">HTMLSpanElement</span>).<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">top</span> = <span class=\"hljs-string\">&quot;100px&quot;</span>;\n  }, [show]);\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setShow(prev =&gt; !prev)}&gt; toggle Button<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n      {show &amp;&amp; (\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">{greetRef}</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">position:</span> &quot;<span class=\"hljs-attr\">absolute</span>&quot; }}&gt;</span>\n          hi\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n      )}\n    <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n  );\n};\n</code></pre>\n<p><img src=\"https://i.imgur.com/gGzLETq.gif\" alt=\"useEffect\" /></p>\n<h4>- ä½¿ç”¨ useLayoutEffect</h4>\n<p>å› ç‚ºåœ¨æ¸²æŸ“ç•«é¢å‰ï¼Œå…ˆåŸ·è¡Œå®Œå¥½ <code>hi</code> çš„ <code>top: 100px</code>ï¼Œæ‰€ä»¥åœ¨çœ‹åˆ°ç•«é¢æ™‚ï¼Œå·²ç¶“æ‰€è¨­å®šçš„ä½ç½®ä¸Šäº†ã€‚</p>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// ä½¿ç”¨ useLayoutEffect</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Foo</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [show, setShow] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">false</span>);\n  <span class=\"hljs-keyword\">const</span> greetRef = <span class=\"hljs-title function_\">useRef</span>(<span class=\"hljs-literal\">null</span>);\n\n  <span class=\"hljs-title function_\">useLayoutEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (greetRef.<span class=\"hljs-property\">current</span> === <span class=\"hljs-literal\">null</span>) <span class=\"hljs-keyword\">return</span>;\n\n    (greetRef.<span class=\"hljs-property\">current</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-title class_\">HTMLSpanElement</span>).<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">top</span> = <span class=\"hljs-string\">&quot;100px&quot;</span>;\n  }, [show]);\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setShow(prev =&gt; !prev)}&gt; toggle Button<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n      {show &amp;&amp; (\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">{greetRef}</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">position:</span> &quot;<span class=\"hljs-attr\">absolute</span>&quot; }}&gt;</span>\n          hi\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n      )}\n    <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n  );\n};\n</code></pre>\n<p><img src=\"https://i.imgur.com/k5IHSoW.gif\" alt=\"useLayoutEffect\" /></p>\n<h2 id=\"useMemo\" title=\"useMemo\"><a href=\"#useMemo\">useMemo</a></h2>\n<h3>ä½¿ç”¨æ–¹æ³•</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// èªæ³•ï¼š const data = useMemo(()=&gt;{ return å€¼ },[ä¾è³´é …])</span>\n\n<span class=\"hljs-keyword\">const</span> memoizedValue = <span class=\"hljs-title function_\">useMemo</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">computeExpensiveValue</span>(a, b), [a, b]);\n</code></pre>\n<ul>\n<li>å¯ä»¥å°‡<strong>å‡½å¼è¿”å›å€¼ cached</strong>ï¼ˆè·Ÿ Vue çš„ computed å¾ˆåƒ)ï¼Œä¸¦å›å‚³ä¸€å€‹ <a  href=\"https://en.wikipedia.org/wiki/Memoization\" target=\"_blank\" rel=\"noreferrer noopener\">memoized</a> çš„å€¼</li>\n<li>useMemo çš„ function æœƒåœ¨ render æœŸé–“åŸ·è¡Œ</li>\n<li>å¯å‚³å…¥ä¾è³´ arrayï¼Œç•¶ä¾è³´æ”¹è®Šæ™‚æ‰é‡æ–°è¨ˆç®—ï¼Œä¸æä¾›å‰‡æ¯æ¬¡éƒ½è¨ˆç®—</li>\n<li>éœ€é¡å¤–è¨˜æ†¶é«”å„²å­˜è®Šæ•¸ï¼Œç›¸ç•¶æ–¼ä»¥ç©ºé–“æ›æ™‚é–“ï¼Œæ‰€ä»¥ç°¡å–®çš„è¨ˆç®— / å€¼ï¼Œè¦é¿å…æ¿«ç”¨</li>\n<li>ä½¿ç”¨æƒ…å¢ƒï¼šç•¶å€¼éœ€è¦æ˜‚è²´è¨ˆç®—å¾—åˆ°ï¼Œä½†ä¸éœ€è¦æ¯æ¬¡ render éƒ½é€²è¡Œé‡æ–°è¨ˆç®—ï¼Œå¯ä½¿ç”¨ useMemo ä¾†å„ªåŒ–</li>\n</ul>\n<h3>ç¯„ä¾‹</h3>\n<p>ç”±æ–¼æ¯æ¬¡ç•«é¢æ›´æ–°æ¸²æŸ“éƒ½æœƒåŸ·è¡Œ <code>slowFunc</code>ï¼Œå³ä½¿æˆ‘å€‘åªæƒ³ toggle theme æ™‚ï¼Œé‚„æ˜¯è¦ç­‰å¾… for è¿´åœˆçµæŸï¼Œå°è‡´ dark theme çš„ç•«é¢æ›´æ–°æœƒæœ‰å»¶é²ã€‚</p>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// æ¨¡æ“¬è¤‡é›œè¨ˆç®—</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">slowFunc</span> = (<span class=\"hljs-params\">num</span>) =&gt; {\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt;= <span class=\"hljs-number\">1000000000</span>; i++) {}\n  <span class=\"hljs-keyword\">return</span> num * <span class=\"hljs-number\">2</span>;\n};\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Fruit</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [num, setNumber] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">0</span>);\n  <span class=\"hljs-keyword\">const</span> [dark, setDark] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">false</span>);\n  <span class=\"hljs-keyword\">const</span> doubleNumber = <span class=\"hljs-title function_\">slowFunc</span>(num); <span class=\"hljs-comment\">// æ¯æ¬¡æ¸²æŸ“éƒ½æœƒåŸ·è¡Œ</span>\n  <span class=\"hljs-keyword\">const</span> theme = {\n    <span class=\"hljs-attr\">color</span>: dark ? <span class=\"hljs-string\">&quot;white&quot;</span> : <span class=\"hljs-string\">&quot;black&quot;</span>,\n    <span class=\"hljs-attr\">backgroundColor</span>: dark ? <span class=\"hljs-string\">&quot;black&quot;</span> : <span class=\"hljs-string\">&quot;white&quot;</span>\n  };\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;number&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{num}</span> <span class=\"hljs-attr\">onChange</span>=<span class=\"hljs-string\">{e</span> =&gt;</span> setNumber(parseInt(e.target.value))} /&gt;\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>{doubleNumber}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setDark(!dark)} style={theme}&gt;\n        toggle theme\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n  );\n};\n</code></pre>\n<p>ä½¿ç”¨ useMemo æ”¹å¯«ä¸¦æŒ‡å®šä¾è³´å¾Œï¼Œåœ¨ toggle theme å°±ä¸æœƒå†é€²å…¥ for è¿´åœˆï¼Œèƒ½åŠæ™‚è®Šæ›´é¡è‰²äº†</p>\n<pre class=\"hljs\"><code><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">slowFunc</span> = (<span class=\"hljs-params\">num</span>) =&gt; {\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt;= <span class=\"hljs-number\">1000000000</span>; i++) {}\n  <span class=\"hljs-keyword\">return</span> num * <span class=\"hljs-number\">2</span>;\n};\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Fruit</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [num, setNumber] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">0</span>);\n  <span class=\"hljs-keyword\">const</span> [dark, setDark] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">false</span>);\n  <span class=\"hljs-comment\">// æŒ‡å®š num ç‚ºä¾è³´çš„å€¼ï¼Œåªæœ‰ num æ”¹è®Šå€¼ï¼Œæ‰å‘¼å« slowFunc</span>\n  <span class=\"hljs-keyword\">const</span> doubleNumber = <span class=\"hljs-title function_\">useMemo</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">slowFunc</span>(num), [num]);\n  <span class=\"hljs-keyword\">const</span> theme = {\n    <span class=\"hljs-attr\">color</span>: dark ? <span class=\"hljs-string\">&quot;white&quot;</span> : <span class=\"hljs-string\">&quot;black&quot;</span>,\n    <span class=\"hljs-attr\">backgroundColor</span>: dark ? <span class=\"hljs-string\">&quot;black&quot;</span> : <span class=\"hljs-string\">&quot;white&quot;</span>\n  };\n\n  <span class=\"hljs-keyword\">return</span> (...);\n};\n</code></pre>\n<h2 id=\"useCallback\" title=\"useCallback\"><a href=\"#useCallback\">useCallback</a></h2>\n<h3>ä½¿ç”¨æ–¹æ³•</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// èªæ³•ï¼š const cb = useCallback(callback, [ä¾è³´é …])</span>\n\n<span class=\"hljs-keyword\">const</span> memoizedCallback = <span class=\"hljs-title function_\">useCallback</span>(\n  <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">doSomething</span>(a, b);\n  },\n  [a, b],\n);\n</code></pre>\n<ul>\n<li>èˆ‡ <code>useMemo</code> æ¦‚å¿µå¤§è‡´ç›¸åŒï¼Œ<strong><code>useMemo</code></strong> å„²å­˜ function <strong>return å›ä¾†çš„å€¼</strong>ï¼Œ<strong><code>useCallback</code></strong> å„²å­˜<strong>æ•´å€‹ function</strong>ï¼Œ<code>useCallback(fn, deps)</code> ç›¸ç­‰æ–¼ <code>useMemo(() =&gt; fn, deps)</code></li>\n<li>å¯å‚³å…¥ä¾è³´ arrayï¼Œç•¶ä¾è³´æ”¹è®Šæ™‚æ‰é‡æ–°å®£å‘Šè·Ÿå»ºç«‹ function</li>\n<li>ä½¿ç”¨æƒ…å¢ƒï¼šç•¶å­çµ„ä»¶æœ‰ä¾è³´çˆ¶çµ„ä»¶å‚³é functionï¼Œçˆ¶çµ„ä»¶çš„ function å¯ä½¿ç”¨ <code>useCallback</code> å„ªåŒ–ï¼Œä¾†é˜²æ­¢ä¸å¿…è¦çš„ render</li>\n</ul>\n<h3>ç¯„ä¾‹</h3>\n<p>ç•¶æ¯æ¬¡ Parent Component(<code>&lt;Foo&gt;</code>)çš„ <code>num</code> æˆ– <code>dark</code> å€¼è®Šå‹•æ™‚ï¼Œ ç•«é¢æœƒé‡æ–°æ¸²æŸ“ï¼Œ<code>&lt;Foo&gt;</code> å…§çš„ <code>getItems</code> ä¹Ÿè·Ÿè‘—è¢«é‡æ–°å®£å‘Šè·Ÿå»ºç«‹ï¼Œç­‰æ–¼ Child Component(<code>&lt;List&gt;</code>) æ¯æ¬¡æ¥æ”¶ä¸åŒçš„ <code>getItems</code>ï¼Œä¹Ÿè·Ÿè‘—é‡æ–°æ¸²æŸ“ï¼ˆå³ä½¿å€¼ä¸è®Šï¼Œåªæœ‰ <code>dark</code> è®Šå‹•çš„æƒ…å¢ƒï¼‰ã€‚</p>\n<h4>- ä¸ä½¿ç”¨ useCallback</h4>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// Child Component</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">List</span> = (<span class=\"hljs-params\">{ getItems }</span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [items, setItems] = <span class=\"hljs-title function_\">useState</span>([]);\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">setItems</span>(<span class=\"hljs-title function_\">getItems</span>());\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;executed&quot;</span>); <span class=\"hljs-comment\">// num æˆ– dark å€¼è®Šå‹•æ™‚ï¼Œ&lt;List&gt; éƒ½æœƒ rerenderï¼Œå°å‡º executed</span>\n  }, [getItems]);\n\n  <span class=\"hljs-keyword\">return</span> items.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">key</span>=<span class=\"hljs-string\">{item}</span>&gt;</span>{item}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>);\n};\n\n<span class=\"hljs-comment\">// Parent Component</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Foo</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [num, setNumber] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">1</span>);\n  <span class=\"hljs-keyword\">const</span> [dark, setDark] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">false</span>);\n\n  <span class=\"hljs-comment\">// ä¸€èˆ¬å®£å‘Šå‡½å¼</span>\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">getItems</span> = (<span class=\"hljs-params\"></span>) =&gt; [num, num + <span class=\"hljs-number\">1</span>, num + <span class=\"hljs-number\">2</span>];\n\n  <span class=\"hljs-keyword\">const</span> theme = {\n    <span class=\"hljs-attr\">color</span>: dark ? <span class=\"hljs-string\">&quot;white&quot;</span> : <span class=\"hljs-string\">&quot;black&quot;</span>,\n    <span class=\"hljs-attr\">backgroundColor</span>: dark ? <span class=\"hljs-string\">&quot;black&quot;</span> : <span class=\"hljs-string\">&quot;white&quot;</span>\n  };\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;number&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{num}</span> <span class=\"hljs-attr\">onChange</span>=<span class=\"hljs-string\">{e</span> =&gt;</span> setNumber(parseInt(e.target.value))} /&gt;\n\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setDark(prev =&gt; !prev)} style={theme}&gt;\n        toggle theme\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">List</span> <span class=\"hljs-attr\">getItems</span>=<span class=\"hljs-string\">{getItems}</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n  );\n};\n</code></pre>\n<h4>- ä½¿ç”¨ useCallback</h4>\n<p>ä½¿ç”¨ useCallbackï¼Œä¸¦å‚³å…¥ <code>num</code> ç•¶ä½œä¾è³´é …ï¼Œæ¥ä¸‹ä¾†ç•¶ <code>num</code> å€¼æ”¹è®Šæ™‚ï¼Œ<code>getItems</code> é€™å€‹ function æ‰æœƒé‡æ–°è¢«å»ºç«‹ã€‚</p>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// Child Component</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">List</span> = (<span class=\"hljs-params\">{ getItems }: { getItems: () =&gt; number[] }</span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [items, setItems] = useState&lt;number[]&gt;([]);\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">setItems</span>(<span class=\"hljs-title function_\">getItems</span>());\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;executed&quot;</span>); <span class=\"hljs-comment\">// åªæœ‰åœ¨ num å€¼è®Šå‹•æ™‚ï¼Œæ‰å°å‡º executed</span>\n  }, [getItems]);\n\n  <span class=\"hljs-keyword\">return</span> items.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">key</span>=<span class=\"hljs-string\">{item}</span>&gt;</span>{item}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>);\n};\n\n<span class=\"hljs-comment\">// Parent Component</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Foo</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [num, setNumber] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">1</span>);\n  <span class=\"hljs-keyword\">const</span> [dark, setDark] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">false</span>);\n\n  <span class=\"hljs-comment\">// ä½¿ç”¨ useCallback</span>\n  <span class=\"hljs-keyword\">const</span> getItems = <span class=\"hljs-title function_\">useCallback</span>(<span class=\"hljs-function\">() =&gt;</span> [num, num + <span class=\"hljs-number\">1</span>, num + <span class=\"hljs-number\">2</span>], [num]);\n\n  <span class=\"hljs-keyword\">const</span> theme = { ... };\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;number&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{num}</span> <span class=\"hljs-attr\">onChange</span>=<span class=\"hljs-string\">{e</span> =&gt;</span> setNumber(parseInt(e.target.value))} /&gt;\n\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> setDark(prev =&gt; !prev)} style={theme}&gt;\n        toggle theme\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">List</span> <span class=\"hljs-attr\">getItems</span>=<span class=\"hljs-string\">{getItems}</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n  );\n};\n</code></pre>\n<h2 id=\"åƒè€ƒè³‡æ–™\" title=\"åƒè€ƒè³‡æ–™\"><a href=\"#åƒè€ƒè³‡æ–™\">åƒè€ƒè³‡æ–™</a></h2>\n<ol>\n<li><a  href=\"https://reactjs.org/docs/getting-started.html\" target=\"_blank\" rel=\"noreferrer noopener\">React å®˜æ–¹æ–‡ä»¶</a></li>\n<li><a  href=\"https://www.youtube.com/playlist?list=PLZlA0Gpn_vH8EtggFGERCwMY5u5hOjf-h\" target=\"_blank\" rel=\"noreferrer noopener\">Web Dev Simplified - React Hooks</a></li>\n</ol>\n","toc":{"title":"[Note] React Hooks æ•´ç†ï¼ˆä¸Šï¼‰","subtitles":["Why Hook?","Hook é€šç”¨è¦å‰‡","useState","useEffect","useLayoutEffect","useMemo","useCallback","åƒè€ƒè³‡æ–™"]}}