{"info":{"title":"[Note] React Hooks æ•´ç† (ä¸‹)","fileName":"react-hooks-second","description":"å…§å®¹ç‚º useRefã€useContextã€useReducer çš„æ•´ç†ã€‚","createdAt":"2021-12-08T00:00:00.000Z","updatedAt":"2021-12-08T00:00:00.000Z","tags":["React","React Hooks"]},"content":"<h6>tags: <code>React</code>ã€<code>React Hooks</code></h6>\n<h1 id=\"[Note] React Hooks æ•´ç† (ä¸‹)\" title=\"[Note] React Hooks æ•´ç† (ä¸‹)\">[Note] React Hooks æ•´ç† (ä¸‹)</h1>\n<p>æ­¤ç¯‡æ˜¯é—œæ–¼ <code>useRef</code>ã€<code>useContext</code>ã€<code>useReducer</code> çš„ä»‹ç´¹ï¼Œå…¶ä»– Hooks å¯ä»¥åƒè€ƒä¸Šç¯‡ï½</p>\n<br/>\n<table>\n<thead>\n<tr>\n<th>æ–‡ç« </th>\n<th>Hooks</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a  href=\"https://jenniesh.github.io/dev/React/react-hooks-first\" target=\"_blank\" rel=\"noreferrer noopener\">React Hooks æ•´ç† (ä¸Š)</a></td>\n<td>useStateã€useEffectã€useLayoutEffectã€useMemoã€useCallback</td>\n</tr>\n<tr>\n<td><a  href=\"https://jenniesh.github.io/dev/React/react-hooks-second\" target=\"_blank\" rel=\"noreferrer noopener\">React Hooks æ•´ç† (ä¸‹)</a></td>\n<td>useRefã€useContextã€useReducer</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"useRef\" title=\"useRef\"><a href=\"#useRef\">useRef</a></h2>\n<h3>ä½¿ç”¨æ–¹æ³•</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// èªæ³•ï¼š const refContainer = useRef(åˆå§‹å€¼);</span>\n\n<span class=\"hljs-keyword\">const</span> refCount = <span class=\"hljs-title function_\">useRef</span>(<span class=\"hljs-number\">0</span>);\n</code></pre>\n<h3>é‡é»</h3>\n<ul>\n<li>å›å‚³ä¸€å€‹ ref objectï¼Œç›¸ç•¶æ–¼ <code>{current: value}</code>ï¼Œæ¯æ¬¡ render æ™‚éƒ½æœƒå›å‚³<strong>åŒä¸€å€‹çš„ ref object</strong>ï¼Œåœ¨ component çš„ç”Ÿå‘½é€±æœŸå°‡ä¿æŒä¸è®Š</li>\n<li><code>.current</code> å€¼æ”¹è®Šå¾Œï¼Œä¸æœƒè§¸ç™¼é‡æ–° render</li>\n<li>ä½¿ç”¨æƒ…å¢ƒï¼š\n<ul>\n<li>å–å¾— dom</li>\n<li>ç´€éŒ„å‰ä¸€æ¬¡ render çš„è³‡æ–™</li>\n</ul>\n</li>\n</ul>\n<h3>ç¯„ä¾‹</h3>\n<h4>æƒ…å¢ƒä¸€ï¼šå–å¾— dom element</h4>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// é»é¸æŒ‰éˆ•å¾Œï¼Œinput æ¡†è¦ focus</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">TextBlock</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-comment\">// step 1: å®£å‘Š inputEl ä¸¦ä½¿ç”¨ useRef</span>\n  <span class=\"hljs-keyword\">const</span> inputEl = <span class=\"hljs-title function_\">useRef</span>(<span class=\"hljs-literal\">null</span>);\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">onButtonClick</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(inputEl.<span class=\"hljs-property\">current</span>); <span class=\"hljs-comment\">// &lt;input type=&quot;text&quot;&gt;</span>\n    inputEl.<span class=\"hljs-property\">current</span>.<span class=\"hljs-title function_\">focus</span>();\n  };\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n      // step 2: ä½¿ç”¨ ref ç¶åœ¨æƒ³å–å¾—çš„ dom\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">{inputEl}</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> /&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{onButtonClick}</span>&gt;</span>Focus the input<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n  );\n};\n\n</code></pre>\n<br/>\n<h4>æƒ…å¢ƒäºŒï¼šç´€éŒ„å‰ä¸€æ¬¡ render çš„å€¼ e.g. æƒ³è¨ˆç®—å‡ºç¸½å…± render å¹¾æ¬¡</h4>\n<ul>\n<li>ä½¿ç”¨ useState ğŸš«</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// éŒ¯èª¤ç¤ºç¯„(å°è‡´ç„¡çª®è¿´åœˆ)ï¼š ä½¿ç”¨ useState</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Name</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [name, setName] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-string\">&quot;&quot;</span>);\n  <span class=\"hljs-keyword\">const</span> [renderCount, setRenderCount] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-number\">0</span>);\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-comment\">// åœ¨ useEffect ä½¿ç”¨ setRenderCount æ›´æ–° renderCount</span>\n    <span class=\"hljs-comment\">// æœƒé€ æˆç„¡çª®å›åœˆï¼š update state =&gt; compoment rerender =&gt; update state again =&gt; compoment rerender again =&gt; ..... =&gt; infinite loop</span>\n    <span class=\"hljs-title function_\">setRenderCount</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">prevCount</span> =&gt;</span> prevCount + <span class=\"hljs-number\">1</span>);\n  });\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{name}</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">onChange</span>=<span class=\"hljs-string\">{e</span> =&gt;</span> setName(e.target.value)} /&gt;\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>{name}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>It has been rendered {renderCount} times<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n  );\n};\n</code></pre>\n<ul>\n<li>\n<p>ä½¿ç”¨ useRef</p>\n<p>åˆ©ç”¨ <code>.current</code> å€¼æ”¹è®Šå¾Œï¼Œ<strong>ä¸æœƒè§¸ç™¼é‡æ–° render</strong>ï¼Œé€™ä¸€å€‹ç‰¹é»ï¼Œä½¿ç”¨ <code>.current</code> å€¼ä¾†è¨˜éŒ„å’Œæ›´æ–°</p>\n</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// ä½¿ç”¨ useRef</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Name</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [name, setName] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-string\">&quot;&quot;</span>);\n  <span class=\"hljs-keyword\">const</span> renderCount = <span class=\"hljs-title function_\">useRef</span>(<span class=\"hljs-number\">0</span>);\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-comment\">// update state =&gt; compoment rerender =&gt; update renderCount.current</span>\n    renderCount.<span class=\"hljs-property\">current</span> += <span class=\"hljs-number\">1</span>;\n  },[name]);\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{name}</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">onChange</span>=<span class=\"hljs-string\">{e</span> =&gt;</span> setName(e.target.value)} /&gt;\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>{name}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>It has been rendered {renderCount.current} times<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n  );\n};\n</code></pre>\n<p><img src=\"https://i.imgur.com/0XnVYcJ.gif\" alt=\"useRef\" /></p>\n<h2 id=\"useContext\" title=\"useContext\"><a href=\"#useContext\">useContext</a></h2>\n<h3>ä½¿ç”¨æ–¹æ³•</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// èªæ³•ï¼š const value = useContext( è‡ªè¨‚çš„ Context );</span>\n\n<span class=\"hljs-keyword\">const</span> value = <span class=\"hljs-title function_\">useContext</span>(<span class=\"hljs-title class_\">MyContext</span>);\n</code></pre>\n<h3>é‡é»</h3>\n<ul>\n<li>åœ¨ <code>MyContext</code> provider (<code>&lt;MyContext.Provider value={value}&gt;</code>)å…§çš„çµ„ä»¶ï¼Œéƒ½å¯ä»¥é€é <code>useContext</code> å–å¾— <code>MyContext</code> value å€¼</li>\n<li>å¯ä»¥è·¨çµ„ä»¶å–å€¼ï¼Œè§£æ±ºéœ€è¦ç”¨ props ä¸€å±¤å±¤å‚³å€¼ä¸‹å»çš„å•é¡Œ<br />\n(çµ„ä»¶ A â¡ï¸ çµ„ä»¶ B â¡ï¸ çµ„ä»¶ Cï¼ŒC éœ€è¦ A å‚³å…¥çš„ propsï¼Œä½† B å»ä¸éœ€è¦ A å‚³å…¥çš„ props)</li>\n<li>å‘¼å« <code>useContext</code> çš„çµ„ä»¶æœƒåœ¨ context å€¼æ›´æ–°æ™‚é‡æ–°æ¸²æŸ“</li>\n</ul>\n<h3>ç¯„ä¾‹</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-keyword\">const</span> initDarkThemeStatus = <span class=\"hljs-literal\">false</span>;\n<span class=\"hljs-comment\">// Step 1. å…ˆ createContext</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">ThemeContext</span> = <span class=\"hljs-title function_\">createContext</span>(initDarkThemeStatus);\n\n\n\n<span class=\"hljs-comment\">// Child Component</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Child</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-comment\">// Step 3. åœ¨å­çµ„ä»¶ä½¿ç”¨ useContextï¼Œå–å¾— value</span>\n  <span class=\"hljs-keyword\">const</span> darkTheme = <span class=\"hljs-title function_\">useContext</span>(<span class=\"hljs-title class_\">ThemeContext</span>);\n  <span class=\"hljs-keyword\">const</span> theme = {\n    <span class=\"hljs-attr\">color</span>: darkTheme ? <span class=\"hljs-string\">&quot;white&quot;</span> : <span class=\"hljs-string\">&quot;black&quot;</span>,\n    <span class=\"hljs-attr\">backgroundColor</span>: darkTheme ? <span class=\"hljs-string\">&quot;black&quot;</span> : <span class=\"hljs-string\">&quot;white&quot;</span>\n  };\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{theme}</span>&gt;</span>Child Component<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>;\n};\n\n\n\n<span class=\"hljs-comment\">// Parent Component</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Parent</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [darkTheme, setDarkTheme] = <span class=\"hljs-title function_\">useState</span>(initDarkThemeStatus);\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">toggleTheme</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n    <span class=\"hljs-title function_\">setDarkTheme</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">prevDarkTheme</span> =&gt;</span> !prevDarkTheme);\n  };\n\n  <span class=\"hljs-keyword\">return</span> (\n      <span class=\"hljs-comment\">// Step 2. åœ¨çˆ¶çµ„ä»¶ä½¿ç”¨ Providerï¼Œä¸¦å‚³å…¥ value</span>\n     <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ThemeContext.Provider</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{darkTheme}</span>&gt;</span>\n       <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{toggleTheme}</span>&gt;</span>Toggle Theme<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n       <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Child</span> /&gt;</span>\n     <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ThemeContext.Provider</span>&gt;</span></span>\n  );\n};\n</code></pre>\n<h2 id=\"useReducer\" title=\"useReducer\"><a href=\"#useReducer\">useReducer</a></h2>\n<h3>ä½¿ç”¨æ–¹æ³•</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// èªæ³•ï¼š const [state, dispatch] = useReducer(reducer, initialArg, init);</span>\n\n<span class=\"hljs-keyword\">const</span> [state, dispatch] = <span class=\"hljs-title function_\">useReducer</span>(reducer, { <span class=\"hljs-attr\">count</span>: <span class=\"hljs-number\">0</span> });\n</code></pre>\n<h3>é‡é»</h3>\n<ul>\n<li>é€²éšç‰ˆçš„ <code>useState</code> (p.s. <a  href=\"https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js#L336\" target=\"_blank\" rel=\"noreferrer noopener\"><code>useState</code></a> åº•å±¤æ˜¯ç”¨ <code>useReducer</code> å¯¦ç¾)</li>\n<li><code>dispatch =&gt; reducer =&gt; state</code>ï¼Œé›†ä¸­åœ¨ <code>reducer</code> åŸ·è¡Œ state ä¿®æ”¹ï¼Œçµ„ä»¶å…§ä¸ç›´æ¥å° state æ“ä½œ</li>\n<li>reducer èˆ‡çµ„ä»¶é–“å‚³åƒæ•¸ï¼š</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// çµ„ä»¶ - å‚³ name</span>\n<span class=\"hljs-title function_\">dispatch</span>({ <span class=\"hljs-attr\">type</span>: <span class=\"hljs-variable constant_\">ACTION</span>.<span class=\"hljs-property\">ADD_TODO</span>, <span class=\"hljs-attr\">payload</span>: { name }});\n\n<span class=\"hljs-comment\">// reducer - æ¥æ”¶ name</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">reducer</span> = (<span class=\"hljs-params\">state, action</span>) =&gt; {\n  <span class=\"hljs-keyword\">switch</span> (action.<span class=\"hljs-property\">type</span>) {\n    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-variable constant_\">ACTION</span>.<span class=\"hljs-property\">ADD_TODO</span>:\n      <span class=\"hljs-keyword\">return</span> [...state, <span class=\"hljs-title function_\">newTodo</span>(action.<span class=\"hljs-property\">payload</span>.<span class=\"hljs-property\">name</span>)];\n    ...,\n    <span class=\"hljs-attr\">default</span>:\n      <span class=\"hljs-keyword\">return</span> state;\n  }\n};\n</code></pre>\n<ul>\n<li>å¯å‚³å…¥<a  href=\"https://zh-hant.reactjs.org/docs/hooks-reference.html#lazy-initialization\" target=\"_blank\" rel=\"noreferrer noopener\">ç¬¬ä¸‰å€‹åƒæ•¸(function)</a>\n<ul>\n<li>è¨ˆç®—åˆå§‹ state çš„é‚è¼¯æå–åˆ° reducer å¤–</li>\n<li>æ–¹ä¾¿é‡ç½® state</li>\n</ul>\n</li>\n<li>é©ç”¨<strong>è¤‡é›œçš„ state é‚è¼¯ä¿®æ”¹</strong>æƒ…å¢ƒ e.g. è¨ˆç®—æ©Ÿå¯ä»¥ä½¿ç”¨åŠ æ¸›ä¹˜é™¤ä¿®æ”¹åŸå…ˆçš„å€¼ã€åŒåˆ—è¡¨æ’åº(æ›´æ–°æ™‚é–“ã€å‰µå»ºæ™‚é–“ã€åå­— etc.)</li>\n</ul>\n<h3>ç¯„ä¾‹</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// Todos.jsx</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">ACTION</span> = {\n  <span class=\"hljs-attr\">ADD_TODO</span>: <span class=\"hljs-string\">&quot;add-todo&quot;</span>,\n  <span class=\"hljs-attr\">TOGGLE_TODO</span>: <span class=\"hljs-string\">&quot;toggle_todo&quot;</span>,\n  <span class=\"hljs-attr\">DELETE</span>: <span class=\"hljs-string\">&quot;delete-todo&quot;</span>\n};\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">newTodo</span> = name =&gt; {\n  <span class=\"hljs-keyword\">return</span> { <span class=\"hljs-attr\">id</span>: <span class=\"hljs-title class_\">Date</span>.<span class=\"hljs-title function_\">now</span>(), <span class=\"hljs-attr\">name</span>: name, <span class=\"hljs-attr\">complete</span>: <span class=\"hljs-literal\">false</span> };\n};\n\n<span class=\"hljs-comment\">// Step 2. æ’°å¯« reducer</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">reducer</span> = (<span class=\"hljs-params\">state, action</span>) =&gt; {\n  <span class=\"hljs-keyword\">switch</span> (action.<span class=\"hljs-property\">type</span>) {\n    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-variable constant_\">ACTION</span>.<span class=\"hljs-property\">ADD_TODO</span>:\n      <span class=\"hljs-keyword\">return</span> [...state, <span class=\"hljs-title function_\">newTodo</span>(action.<span class=\"hljs-property\">payload</span>.<span class=\"hljs-property\">name</span>)];\n    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-variable constant_\">ACTION</span>.<span class=\"hljs-property\">TOGGLE_TODO</span>:\n      <span class=\"hljs-keyword\">return</span> state.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">todo</span> =&gt;</span> {\n        <span class=\"hljs-keyword\">if</span> (todo.<span class=\"hljs-property\">id</span> === action.<span class=\"hljs-property\">payload</span>.<span class=\"hljs-property\">id</span>) <span class=\"hljs-keyword\">return</span> { ...todo, <span class=\"hljs-attr\">complete</span>: !todo.<span class=\"hljs-property\">complete</span> };\n        <span class=\"hljs-keyword\">return</span> todo;\n      });\n    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-variable constant_\">ACTION</span>.<span class=\"hljs-property\">DELETE</span>:\n      <span class=\"hljs-keyword\">return</span> state.<span class=\"hljs-title function_\">filter</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">todo</span> =&gt;</span> todo.<span class=\"hljs-property\">id</span> !== action.<span class=\"hljs-property\">payload</span>.<span class=\"hljs-property\">id</span>);\n    <span class=\"hljs-attr\">default</span>:\n      <span class=\"hljs-keyword\">return</span> state;\n  }\n};\n\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Todos</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-comment\">// Step 1. ä½¿ç”¨ useReducerï¼Œä¸¦å‚³å…¥åˆå§‹å€¼</span>\n  <span class=\"hljs-keyword\">const</span> [todos, dispatch] = <span class=\"hljs-title function_\">useReducer</span>(reducer, []);\n  <span class=\"hljs-keyword\">const</span> [name, setName] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-string\">&quot;&quot;</span>);\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">handleSubmit</span> = e =&gt; {\n    e.<span class=\"hljs-title function_\">preventDefault</span>();\n    <span class=\"hljs-comment\">// Step 3. dispatch action</span>\n    <span class=\"hljs-title function_\">dispatch</span>({ <span class=\"hljs-attr\">type</span>: <span class=\"hljs-variable constant_\">ACTION</span>.<span class=\"hljs-property\">ADD_TODO</span>, <span class=\"hljs-attr\">payload</span>: { name } });\n    <span class=\"hljs-title function_\">setName</span>(<span class=\"hljs-string\">&quot;&quot;</span>);\n  };\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">handleToggle</span> = id =&gt; {\n    <span class=\"hljs-title function_\">dispatch</span>({ <span class=\"hljs-attr\">type</span>: <span class=\"hljs-variable constant_\">ACTION</span>.<span class=\"hljs-property\">TOGGLE_TODO</span>, <span class=\"hljs-attr\">payload</span>: { id } });\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(todos);\n  };\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">handleDelete</span> = id =&gt; {\n    <span class=\"hljs-title function_\">dispatch</span>({ <span class=\"hljs-attr\">type</span>: <span class=\"hljs-variable constant_\">ACTION</span>.<span class=\"hljs-property\">DELETE</span>, <span class=\"hljs-attr\">payload</span>: { id } });\n  };\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">form</span> <span class=\"hljs-attr\">onSubmit</span>=<span class=\"hljs-string\">{handleSubmit}</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{name}</span> <span class=\"hljs-attr\">onChange</span>=<span class=\"hljs-string\">{e</span> =&gt;</span> setName(e.target.value)} /&gt;\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">form</span>&gt;</span>\n\n      {todos.map(todo =&gt; (\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Todo</span> <span class=\"hljs-attr\">key</span>=<span class=\"hljs-string\">{todo.id}</span> <span class=\"hljs-attr\">todo</span>=<span class=\"hljs-string\">{todo}</span> <span class=\"hljs-attr\">handleToggle</span>=<span class=\"hljs-string\">{handleToggle}</span> <span class=\"hljs-attr\">handleDelete</span>=<span class=\"hljs-string\">{handleDelete}</span> /&gt;</span>\n      ))}\n    <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n  );\n};\n\n</code></pre>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// Todo.jsx</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Todo</span> = (<span class=\"hljs-params\">{ todo, handleToggle, handleDelete }</span>) =&gt; {\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">color:</span> <span class=\"hljs-attr\">todo.complete</span> ? &quot;<span class=\"hljs-attr\">green</span>&quot; <span class=\"hljs-attr\">:</span> &quot;<span class=\"hljs-attr\">red</span>&quot; }}&gt;</span>{todo.name}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> handleToggle(todo.id)}&gt;Toggle<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =&gt;</span> handleDelete(todo.id)}&gt;Delete<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n  );\n};\n</code></pre>\n<h2 id=\"åƒè€ƒè³‡æ–™\" title=\"åƒè€ƒè³‡æ–™\"><a href=\"#åƒè€ƒè³‡æ–™\">åƒè€ƒè³‡æ–™</a></h2>\n<ol>\n<li><a  href=\"https://reactjs.org/docs/getting-started.html\" target=\"_blank\" rel=\"noreferrer noopener\">React å®˜æ–¹æ–‡ä»¶</a></li>\n<li><a  href=\"https://www.youtube.com/playlist?list=PLZlA0Gpn_vH8EtggFGERCwMY5u5hOjf-h\" target=\"_blank\" rel=\"noreferrer noopener\">Web Dev Simplified - React Hooks</a></li>\n</ol>\n","toc":{"title":"[Note] React Hooks æ•´ç† (ä¸‹)","subtitles":["useRef","useContext","useReducer","åƒè€ƒè³‡æ–™"]}}