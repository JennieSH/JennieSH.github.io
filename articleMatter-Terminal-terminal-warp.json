{"info":{"title":"客製化 Terminal - Warp + Powerlevel10k","fileName":"terminal-warp","description":"入坑 Warp，第一步就是客製化它！","createdAt":"2023-08-01T00:00:00.000Z","updatedAt":"2023-08-01T00:00:00.000Z","tags":["MacOS","Warp","terminal","productivity","powerlevel10k"]},"content":"<h6>tags: <code>MacOS</code>、<code>Warp</code>、<code>Powerlevel10k</code>、<code>terminal</code>、<code>productivity</code></h6>\n<h1 id=\"客製化 Terminal - Warp + Powerlevel10k\" title=\"客製化 Terminal - Warp + Powerlevel10k\">客製化 Terminal - Warp + Powerlevel10k</h1>\n<p>身為一位工程師，日常都需要跟指令列打交道，加上筆者是微顏控，需要有美美的 command line 環境，所以對 Terminal 選擇有點挑剔，轉換成 Warp 前，是使用 iTerms2 + oh-my-zsh，調成喜歡的樣式。</p>\n<p><img src=\"https://hackmd.io/_uploads/BJwvkV_sh.png\" alt=\"iTerms2\" /></p>\n<br/>\n<p>Warp 預設樣式已經有個 70 分，highlight 等配色都很舒服，加上強大其他功能，如果對介面沒特別要求，基本就開箱即用。</p>\n<p><img src=\"https://hackmd.io/_uploads/rJXMJ4_j3.png\" alt=\"warp\" /></p>\n<br/>\n<p>但對於用習慣 iTerms2 樣式和設定，Warp 預設已經滿足不了筆者了，手邊公司電腦有參考 <a  href=\"https://dev.to/therubberduckiee/how-to-configure-starship-to-look-exactly-like-p10k-zsh-warp-h9h\" target=\"_blank\" rel=\"noreferrer noopener\">How to Configure Starship to Look Exactly Like P10K</a> 做設定，結果也是挺滿意的，但因為 iterms2 的關係， zsh config 留有 Powerlevel10k 相關設定，每次只要開啟 Warp，最上方的 prompt 就會一直跳出不支援 Powerlevel10k 提示，有點擾人 <em>(後來發現可在 <code>.zshrc</code> 檔案中，寫 Terminal 判斷，去關掉提示)</em>。</p>\n<p><img src=\"https://hackmd.io/_uploads/SJCZbPSo3.png\" alt=\"starship\" /></p>\n<br/>\n<p>不過好消息是新版本 <a  href=\"https://docs.warp.dev/getting-started/changelog#2023.06.20-v0.2023.06.20.08.04\" target=\"_blank\" rel=\"noreferrer noopener\">(v0.2023.06.20.08.04)</a> 的 Warp，可以支援 Powerlevel10k 了！剛好趁這次機會幫自己的電腦設定一下 Warp 樣式。</p>\n<h2 id=\"安裝 warp\" title=\"安裝 warp\"><a href=\"#安裝 warp\">安裝 warp</a></h2>\n<pre class=\"hljs\"><code><span class=\"hljs-variable\">$brew</span> install --cask warp\n</code></pre>\n<h2 id=\"設定字體\" title=\"設定字體\"><a href=\"#設定字體\">設定字體</a></h2>\n<p><code>Settings</code> -&gt; <code>Appearance</code> -&gt; <code>Text</code> -&gt; <code>Terminal font</code> 改成 <code>MesloGS NF</code></p>\n<p><img src=\"https://hackmd.io/_uploads/ByAkVwSin.png\" alt=\"設定字體\" /></p>\n<div class=\"info\">\n<p>💡<strong>補充：</strong></p>\n<p>如果電腦中沒有 <code>MesloGS NF</code> 字體，請至 <a  href=\"https://github.com/romkatv/powerlevel10k#meslo-nerd-font-patched-for-powerlevel10k\" target=\"_blank\" rel=\"noreferrer noopener\">Manual font installation</a> 下載，否則部分 icon 會無法正確顯示。</p>\n</div>\n<h2 id=\"打開 PS1 選項\" title=\"打開 PS1 選項\"><a href=\"#打開 PS1 選項\">打開 PS1 選項</a></h2>\n<p><code>Settings</code> -&gt; <code>Feature</code> -&gt; <code>Session</code> -&gt; 打開 <code>Honor user's custom prompt(PS1)</code></p>\n<p><img src=\"https://hackmd.io/_uploads/BJ6jHvHj2.png\" alt=\"PS1 選項\" /></p>\n<h2 id=\"安裝 powerlevel10k\" title=\"安裝 powerlevel10k\"><a href=\"#安裝 powerlevel10k\">安裝 powerlevel10k</a></h2>\n<pre class=\"hljs\"><code><span class=\"hljs-variable\">$git</span> <span class=\"hljs-built_in\">clone</span> --depth=1 https://github.com/romkatv/powerlevel10k.git ~/powerlevel10k\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&#x27;source ~/powerlevel10k/powerlevel10k.zsh-theme&#x27;</span> &gt;&gt;~/.zshrc\n</code></pre>\n<p>如果之前有安裝過，記得 pull 最新版本，可參考 <a  href=\"https://github.com/romkatv/powerlevel10k#how-do-i-update-powerlevel10k\" target=\"_blank\" rel=\"noreferrer noopener\">p10k repo</a>。</p>\n<h2 id=\"重新執行 zsh（Z Shell）\" title=\"重新執行 zsh（Z Shell）\"><a href=\"#重新執行 zsh（Z Shell）\">重新執行 zsh（Z Shell）</a></h2>\n<pre class=\"hljs\"><code><span class=\"hljs-variable\">$exec</span> zsh\n</code></pre>\n<h2 id=\"設定 p10k config\" title=\"設定 p10k config\"><a href=\"#設定 p10k config\">設定 p10k config</a></h2>\n<p>接下來會有一系列 icon 有無正常顯示問題和 command line 樣式設定，依實際情況和需求回答即可。</p>\n<p><img src=\"https://hackmd.io/_uploads/HkXr5Prs2.png\" alt=\"p10k config\" /></p>\n<details class='spoiler'><summary>筆者設定參考</summary>\n<p>因為之前已在 iTerm2 那邊設定過 <code>p10k</code> config 了，所以再輸入完 <code>exec zsh</code>，就直接顯示當初設定的樣式了，附上當時 iTerm2 設定選項供參考。</p>\n<p><img src=\"https://hackmd.io/_uploads/HkKHjvHo3.png\" alt=\"\" /></p>\n<blockquote>\n<p>Q1. Prompt Style? <code>(3) Rainbow.</code><br />\nQ2. Character Set? <code>(1) Unicode.</code><br />\nQ3. Show current time? <code>(2) 24-hour format.</code><br />\nQ4. Prompt Separators? <code>(1) Angled.</code><br />\nQ5. Prompt Heads? <code>(1) Sharp.</code><br />\nQ6. Prompt Tails? <code>(1) Flat.</code><br />\nQ7. Prompt Height? <code>(1) One line.</code><br />\nQ8. Prompt Spacing? <code>(1) Compact.</code><br />\nQ9. Icons? <code>(2) Many icons.</code><br />\nQ10. Prompt Flow? <code>(1) Concise.</code><br />\nQ11. Enable Transient Prompt? <code>(n) No.</code><br />\nQ12. Instant Prompt Mode? <code>(1) Verbose (recommended).</code><br />\nQ13. Apply changes to ~/.zshrc? <code>y</code></p>\n</blockquote>\n</details>\n<br/>\n<p>有需要再重新客製化 p10k prompt，可以輸入：</p>\n<pre class=\"hljs\"><code><span class=\"hljs-variable\">$vi</span> ~/.p10k.zsh\n</code></pre>\n<h2 id=\"修改 Warp 的 theme\" title=\"修改 Warp 的 theme\"><a href=\"#修改 Warp 的 theme\">修改 Warp 的 theme</a></h2>\n<p>Warp 預設提供 theme 很少，如果要客製化 theme，可以到 <a  href=\"https://github.com/warpdotdev/themes\" target=\"_blank\" rel=\"noreferrer noopener\">theme repository</a> 挑選自己喜歡的主題，更多 theme 設定可以參考 <a  href=\"https://docs.warp.dev/appearance/custom-themes\" target=\"_blank\" rel=\"noreferrer noopener\">Custom Themes</a>。</p>\n<h3>Step 1. 建立 themes 資料夾</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-variable\">$mkdir</span> -p ~/.warp/themes/\n</code></pre>\n<h3>Step 2. 建立 theme yaml</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-variable\">$cd</span> ~/.warp/themes/\n</code></pre>\n<p>主題的資料夾，依據自己選擇命名，筆者是選擇 <a  href=\"https://github.com/warpdotdev/themes/blob/fd69e302ba2cd510846644f5e75d00ee4985ee1e/base16/base16_tomorrow_night_eighties.yaml#L4\" target=\"_blank\" rel=\"noreferrer noopener\"><code>tomorrow-night-eighties</code></a>：</p>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\"># mkdir &lt;theme-folder-name&gt;</span>\n<span class=\"hljs-variable\">$mkdir</span> tomorrow-night-eighties\n</code></pre>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\"># cd &lt;theme-folder-name&gt;</span>\n<span class=\"hljs-variable\">$cd</span> tomorrow-night-eighties\n</code></pre>\n<p>新增 yaml 設定：</p>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\"># vi &lt;theme-folder-name&gt;</span>\n<span class=\"hljs-variable\">$vi</span> tomorrow-night-eighties.yaml\n</code></pre>\n<p>再將 <a  href=\"https://github.com/warpdotdev/themes/blob/fd69e302ba2cd510846644f5e75d00ee4985ee1e/base16/base16_tomorrow_night_eighties.yaml#L4\" target=\"_blank\" rel=\"noreferrer noopener\"><code>tomorrow-night-eighties</code></a> 內容複製到 terminal 後，輸入 <code>:wq</code></p>\n<pre class=\"hljs\"><code><span class=\"hljs-attr\">accent:</span> <span class=\"hljs-string\">&quot;#6699cc&quot;</span>\n<span class=\"hljs-attr\">background:</span> <span class=\"hljs-string\">&quot;#2d2d2d&quot;</span>\n<span class=\"hljs-attr\">details:</span> <span class=\"hljs-string\">darker</span>\n<span class=\"hljs-attr\">foreground:</span> <span class=\"hljs-string\">&quot;#cccccc&quot;</span>\n<span class=\"hljs-attr\">terminal_colors:</span>\n  <span class=\"hljs-attr\">bright:</span>\n    <span class=\"hljs-attr\">black:</span> <span class=\"hljs-string\">&quot;#999999&quot;</span>\n    <span class=\"hljs-attr\">blue:</span> <span class=\"hljs-string\">&quot;#b4b7b4&quot;</span>\n    <span class=\"hljs-attr\">cyan:</span> <span class=\"hljs-string\">&quot;#a3685a&quot;</span>\n    <span class=\"hljs-attr\">green:</span> <span class=\"hljs-string\">&quot;#393939&quot;</span>\n    <span class=\"hljs-attr\">magenta:</span> <span class=\"hljs-string\">&quot;#e0e0e0&quot;</span>\n    <span class=\"hljs-attr\">red:</span> <span class=\"hljs-string\">&quot;#f99157&quot;</span>\n    <span class=\"hljs-attr\">white:</span> <span class=\"hljs-string\">&quot;#ffffff&quot;</span>\n    <span class=\"hljs-attr\">yellow:</span> <span class=\"hljs-string\">&quot;#515151&quot;</span>\n  <span class=\"hljs-attr\">normal:</span>\n    <span class=\"hljs-attr\">black:</span> <span class=\"hljs-string\">&quot;#2d2d2d&quot;</span>\n    <span class=\"hljs-attr\">blue:</span> <span class=\"hljs-string\">&quot;#6699cc&quot;</span>\n    <span class=\"hljs-attr\">cyan:</span> <span class=\"hljs-string\">&quot;#66cccc&quot;</span>\n    <span class=\"hljs-attr\">green:</span> <span class=\"hljs-string\">&quot;#99cc99&quot;</span>\n    <span class=\"hljs-attr\">magenta:</span> <span class=\"hljs-string\">&quot;#cc99cc&quot;</span>\n    <span class=\"hljs-attr\">red:</span> <span class=\"hljs-string\">&quot;#f2777a&quot;</span>\n    <span class=\"hljs-attr\">white:</span> <span class=\"hljs-string\">&quot;#cccccc&quot;</span>\n    <span class=\"hljs-attr\">yellow:</span> <span class=\"hljs-string\">&quot;#ffcc66&quot;</span>\n</code></pre>\n<h3>Step 3. 重啟 warp</h3>\n<p>如果主題沒有套用，請手動至 <code>Appearance</code> -&gt; 點選 <code>Current theme</code> -&gt; 選擇剛剛建立的主題</p>\n<p><img src=\"https://hackmd.io/_uploads/r1y05uBjn.png\" alt=\"\" /><br />\n<img src=\"https://hackmd.io/_uploads/SkZEiOHo3.png\" alt=\"\" /></p>\n<div class=\"warning\">\n<p>⚠️ <strong>注意：</strong></p>\n<p>設定到這邊，筆者有遇到三個問題，有踩到坑的人可以參考下方解答～</p>\n<p><strong>問題一：Operation not permitted</strong></p>\n<p>如果下指令有遇到 <strong><code>.: Operation not permitted</code></strong> 或者 git 資訊無顯示，要去 Settings 打開 <code>Files and Folders</code> 權限。</p>\n<p><img src=\"https://hackmd.io/_uploads/BkffqFHjn.png\" alt=\"Operation not permitted\" /></p>\n<br/>\n<p><strong>問題二： prompt 的顏色和形狀，顯示會不一致</strong><br />\n但同一套設定檔案在 iTerms 是正常的，Warp 這邊會三角形明顯顏色不一樣：</p>\n<p><img src=\"https://hackmd.io/_uploads/r1PZK6Lo3.png\" alt=\"\" /></p>\n<p>解法是到 <code>Appearance</code> -&gt; <code>Enforce minimum contrast</code> 改成 <code>Never</code>，調整完後，顏色顯示就會一致了。</p>\n<p><img src=\"https://hackmd.io/_uploads/HyDEYa8o2.png\" alt=\"\" /></p>\n<p><img src=\"https://hackmd.io/_uploads/S1t-ip8ih.png\" alt=\"\" /></p>\n<blockquote>\n<p>相關 issue 討論：</p>\n<ul>\n<li><a  href=\"https://github.com/warpdotdev/Warp/issues/2851#issuecomment-1605005256\" target=\"_blank\" rel=\"noreferrer noopener\">powerlevel10k support</a></li>\n</ul>\n</blockquote>\n<br/>\n<p><strong>問題三： cursor 在 Warp 會直接跳新的一行，但其他 Terminal 會接續在原行</strong></p>\n<p><img src=\"https://hackmd.io/_uploads/r1v3C2Uoh.png\" alt=\"\" /></p>\n<p>不介意的話可忽略該問題，很介意就 run <code>exec zsh</code> 可以解決，但就會無法擁有 multiple cursors、completions 等 Warp 提供的功能。</p>\n<blockquote>\n<p>相關 issue 討論：</p>\n<ul>\n<li><a  href=\"https://github.com/warpdotdev/Warp/issues/2851#issuecomment-1625048694\" target=\"_blank\" rel=\"noreferrer noopener\">Prompt in one line</a></li>\n<li><a  href=\"https://github.com/warpdotdev/Warp/issues/2851#issuecomment-1625048694\" target=\"_blank\" rel=\"noreferrer noopener\">powerlevel10k support</a></li>\n<li><a  href=\"https://github.com/warpdotdev/Warp/issues/3387\" target=\"_blank\" rel=\"noreferrer noopener\">Prompt issue with oh My Zsh and PowerLevel10k</a></li>\n</ul>\n</blockquote>\n</div>\n<h2 id=\"結語\" title=\"結語\"><a href=\"#結語\">結語</a></h2>\n<p>Starship 或 Powerlevel10k 都需要花一些時間來設定，中間還踩了一些雷，但最後看到繽紛的 Terminal 就覺得值得了！</p>\n<p>之前幫其他同事用他的電腦 debug 的時候，terminal 文字沒有 highlight，整片 log 都是白字，看著微痛苦 XD，立馬推坑他安裝 Warp，就算不客製 command line，預設樣式就屌打原本的了，又有各種提示，直接 Warp 信徒加一，希望這篇有機會推坑更多人進 Warp。</p>\n<h2 id=\"參考資料\" title=\"參考資料\"><a href=\"#參考資料\">參考資料</a></h2>\n<ul>\n<li><a  href=\"https://docs.warp.dev/getting-started/readme\" target=\"_blank\" rel=\"noreferrer noopener\">Warp Documentation</a></li>\n<li><a  href=\"https://www.onejar99.com/zsh-powerlevel10k-custom-config-note/\" target=\"_blank\" rel=\"noreferrer noopener\">[zsh] Powerlevel10k 設定心得筆記</a></li>\n</ul>\n","toc":{"title":"客製化 Terminal - Warp + Powerlevel10k","subtitles":["安裝 warp","設定字體","打開 PS1 選項","安裝 powerlevel10k","重新執行 zsh（Z Shell）","設定 p10k config","修改 Warp 的 theme","結語","參考資料"]}}