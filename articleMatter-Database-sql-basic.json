{"info":{"title":"SQL 介紹和基本語法(CRUD)","fileName":"sql-basic","description":"什麼是 SQL？","createdAt":"2024-12-15T00:00:00.000Z","updatedAt":"2024-12-15T00:00:00.000Z","tags":["database","postgresql"]},"content":"<h1 id=\"SQL 介紹和基本語法(CRUD)\" title=\"SQL 介紹和基本語法(CRUD)\">SQL 介紹和基本語法(CRUD)</h1>\n<h2 id=\"什麼是資料庫？\" title=\"什麼是資料庫？\"><a href=\"#什麼是資料庫？\">什麼是資料庫？</a></h2>\n<p>資料庫是一種用於儲存、管理和檢索資料的系統，其核心運作通常由資料庫管理系統（Database Management System, DBMS）支援，負責實現資料的建立、讀取、更新和刪除（CRUD）等功能。</p>\n<h2 id=\"什麼是 SQL ?\" title=\"什麼是 SQL ?\"><a href=\"#什麼是 SQL ?\">什麼是 SQL ?</a></h2>\n<p>關聯式資料庫廣泛使用結構化查詢語言（Structured Query Language, SQL）來操作和管理資料。使用者（Client）透過 SQL 與資料庫進行溝通互動，執行資料的查詢和操作需求。</p>\n<h2 id=\"資料庫結構\" title=\"資料庫結構\"><a href=\"#資料庫結構\">資料庫結構</a></h2>\n<h3>資料表 (Table)</h3>\n<p>整體資料，包含所有相關的資料</p>\n<h3>欄位 (Columns)</h3>\n<p>定義資料的屬性和類型 (Data Type)</p>\n<h3>資料列 (Rows)</h3>\n<p>橫向資料的集合，代表一筆完整資料</p>\n<h2 id=\"資料的型態\" title=\"資料的型態\"><a href=\"#資料的型態\">資料的型態</a></h2>\n<table>\n<thead>\n<tr>\n<th><strong>資料型態</strong></th>\n<th><strong>描述</strong></th>\n<th><strong>使用情境</strong></th>\n<th><strong>範例欄位</strong></th>\n<th><strong>範例</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>INTEGER</td>\n<td>整數</td>\n<td>ID、數量</td>\n<td><code>count INTERGER</code></td>\n<td>1, 2, 100</td>\n</tr>\n<tr>\n<td>VARCHAR(n)</td>\n<td>字串 (n=字串長度)</td>\n<td>名稱、描述</td>\n<td>‘Jennie’</td>\n<td><code>name VARCHAR(50)</code></td>\n</tr>\n<tr>\n<td>TIMESTAMP</td>\n<td>日期時間</td>\n<td>建立/刪除時間</td>\n<td>‘2025-01-01 00:00:01’</td>\n<td><code>created_at TIMESTAMP</code></td>\n</tr>\n<tr>\n<td>DECIMAL(p,s)</td>\n<td>精確小數(p=精度，數字的總位數；s=小數位數)</td>\n<td>金額</td>\n<td>10.99</td>\n<td><code>price DECIMAL(10,2)</code></td>\n</tr>\n<tr>\n<td>BOOLEAN</td>\n<td>布林值</td>\n<td>狀態</td>\n<td>true, false</td>\n<td><code>is_Adult false</code></td>\n</tr>\n<tr>\n<td>JSON</td>\n<td>JSON 資料</td>\n<td>彈性的資料結構</td>\n<td>‘{ “age”: “18”}’</td>\n<td><code>profile JSON</code></td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p><strong>[補充] :</strong></p>\n<p>字串會嚴謹設定字元數，原因之一是考量資訊安全，防止有心人不當使用資料庫，進而導致資料庫當機。網頁出現錯誤訊息時，攻擊者可能從中得知一些敏感資訊，如 IP 位置，進而增加資料被入侵的風險。</p>\n</blockquote>\n<h2 id=\"<strong>SQL 基本語法</strong>\" title=\"<strong>SQL 基本語法</strong>\"><a href=\"#<strong>SQL 基本語法</strong>\"><strong>SQL 基本語法</strong></a></h2>\n<h3>通用規則</h3>\n<ul>\n<li>\n<p>SQL 關鍵字：通常採用<strong>大寫</strong>（例如：<code>CREATE TABLE</code>、<code>VALUES</code>），這是約定俗成的風格，用於方便區分 SQL 提供的關鍵字與自定義的內容。</p>\n</li>\n<li>\n<p>建立順序：Table → Columns → Rows</p>\n</li>\n<li>\n<p><code>;</code> ： 分號代表整個 SQL 指令結束，需加在最末尾</p>\n</li>\n<li>\n<p><code>,</code> ： 多筆資料使用逗號隔開</p>\n</li>\n<li>\n<p><code>--</code>：單行註解</p>\n</li>\n<li>\n<p><code>/*</code> <em>+</em> <code>*/</code>：多行註解</p>\n</li>\n<li>\n<p><code>'</code>：單引號用於字串值</p>\n</li>\n<li>\n<p><code>&quot;</code>：雙引號用於標識符，包括資料表名、欄位名或別名</p>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">-- 錯誤寫法：</span>\n<span class=\"hljs-comment\">-- &#x27;RD department&#x27; 被解釋為字串常數，但 AS 別名要求的是標識符，因此導致語法錯誤</span>\n<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>) <span class=\"hljs-keyword\">as</span> <span class=\"hljs-string\">&#x27;RD department&#x27;</span>\n\n<span class=\"hljs-comment\">-- 正確寫法：</span>\n<span class=\"hljs-comment\">-- &quot;RD department&quot; 是一個合法的標識符，定義了查詢結果中該欄位的名稱</span>\n<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>) <span class=\"hljs-keyword\">AS</span> &quot;RD department&quot;\n</code></pre>\n</li>\n</ul>\n<blockquote>\n<p>線上練習 SQL 指令網址 ： <a  href=\"https://pg-sql.com/\" target=\"_blank\" rel=\"noreferrer noopener\">pg-sql</a></p>\n</blockquote>\n<h3>建立資料表</h3>\n<ul>\n<li><code>CREATE TABLE</code>：建立 Table 指令</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">-- 格式</span>\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> 資料表名稱 (\n  欄位名 欄位資料型態,\n);\n\n<span class=\"hljs-comment\">-- 範例</span>\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> users (\n  name <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">50</span>),\n  email <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">100</span>),\n  age <span class=\"hljs-type\">INTEGER</span>\n);\n</code></pre>\n<h3>新增資料</h3>\n<ul>\n<li><code>INSERT INTO</code>：插入欄位至 Table</li>\n<li><code>VALUES</code>：插入欄位對應的值</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">-- 單筆格式</span>\n<span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> 資料表名稱 (欄位名 A, 欄位名 B, 欄位名 C)\n<span class=\"hljs-keyword\">VALUES</span> (欄位值 A, 欄位值 B, 欄位值 C);\n<span class=\"hljs-comment\">-- 多筆格式</span>\n<span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span>\n  users (name, email, age)\n<span class=\"hljs-keyword\">VALUES</span>\n  (欄位值 A1, 欄位值 B1, 欄位值 C1),\n  (欄位值 A2, 欄位值 B2, 欄位值 C2),\n  (欄位值 A3, 欄位值 B3, 欄位值 C3);\n\n<span class=\"hljs-comment\">-- 單筆範例：</span>\n<span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> users (name, email, age)\n<span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-string\">&#x27;Jennie&#x27;</span>, <span class=\"hljs-string\">&#x27;hello@world.com&#x27;</span>, <span class=\"hljs-number\">18</span>);\n<span class=\"hljs-comment\">-- 多筆範例：</span>\n<span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span>\n  users (name, email, age)\n<span class=\"hljs-keyword\">VALUES</span>\n  (<span class=\"hljs-string\">&#x27;Jennie&#x27;</span>, <span class=\"hljs-string\">&#x27;hello@world.com&#x27;</span>, <span class=\"hljs-number\">18</span>),\n  (<span class=\"hljs-string\">&#x27;Joy&#x27;</span>, <span class=\"hljs-string\">&#x27;hello2@world.com&#x27;</span>, <span class=\"hljs-number\">20</span>),\n  (<span class=\"hljs-string\">&#x27;Jack&#x27;</span>, <span class=\"hljs-string\">&#x27;hello3@world.com&#x27;</span>, <span class=\"hljs-number\">22</span>);\n</code></pre>\n<h3>查詢資料</h3>\n<ul>\n<li><code>SELECT</code> + <code>FROM</code>：從 Table 中，選擇查詢的欄位名\n<ul>\n<li><code>*</code>：不指定欄位，表示全部</li>\n</ul>\n</li>\n<li><code>AS</code>：可將欄位名變成指定的別名</li>\n</ul>\n<blockquote>\n<p><strong>[補充]：</strong></p>\n<p>實務上避免用 <code>*</code> 查詢，會有效能影響。</p>\n</blockquote>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">-- 格式</span>\n<span class=\"hljs-keyword\">SELECT</span> 欄位名 <span class=\"hljs-keyword\">FROM</span> 資料表名稱;\n\n<span class=\"hljs-comment\">-- 範例：</span>\n<span class=\"hljs-comment\">-- 不指定欄位</span>\n<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> users;\n<span class=\"hljs-comment\">-- 單個特定欄位</span>\n<span class=\"hljs-keyword\">SELECT</span> email <span class=\"hljs-keyword\">FROM</span> users;\n<span class=\"hljs-comment\">-- 多個特定欄位</span>\n<span class=\"hljs-keyword\">SELECT</span> name,age <span class=\"hljs-keyword\">FROM</span> users;\n<span class=\"hljs-comment\">-- 別名 (除了幫原欄位改別名，也可以多顯示虛擬欄位，不會影響原資料表)</span>\n<span class=\"hljs-keyword\">SELECT</span>\n  name,\n  age <span class=\"hljs-keyword\">AS</span> real_age,\n  age <span class=\"hljs-operator\">+</span> <span class=\"hljs-number\">1</span> <span class=\"hljs-keyword\">AS</span> korean_age\n<span class=\"hljs-keyword\">FROM</span>\n  users;\n</code></pre>\n<h3>尋找資料(Where)</h3>\n<ul>\n<li><code>WHERE</code>：查詢的條件範圍</li>\n<li>執行順序：找資料表(<code>FROM</code>) → 篩選範圍(<code>WHERE</code>) → 取得對應欄位(<code>SELECT</code>)</li>\n<li>英文字會區分大小寫(case sensitivity)</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">-- 格式</span>\n<span class=\"hljs-keyword\">SELECT</span> 欄位名 <span class=\"hljs-keyword\">FROM</span> 資料表名稱\n<span class=\"hljs-keyword\">WHERE</span> 條件範圍\n\n<span class=\"hljs-comment\">-- 範例：查詢商品分類為 3C 的商品名</span>\n<span class=\"hljs-comment\">-- 執行順序是 2 -&gt; 3 -&gt; 1 (範圍大到小)</span>\n<span class=\"hljs-keyword\">SELECT</span>         <span class=\"hljs-comment\">-- 1</span>\n  name\n<span class=\"hljs-keyword\">FROM</span>           <span class=\"hljs-comment\">-- 2</span>\n  products\n<span class=\"hljs-keyword\">WHERE</span>          <span class=\"hljs-comment\">-- 3</span>\n  category <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;3C&#x27;</span>\n</code></pre>\n<ul>\n<li>比較運算子</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th><strong>運算子</strong></th>\n<th><strong>描述</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>=</td>\n<td>等於</td>\n</tr>\n<tr>\n<td>&gt;</td>\n<td>大於</td>\n</tr>\n<tr>\n<td>&lt;</td>\n<td>小於</td>\n</tr>\n<tr>\n<td>&gt;=</td>\n<td>大於等於</td>\n</tr>\n<tr>\n<td>&lt;=</td>\n<td>小於等於</td>\n</tr>\n</tbody>\n</table>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">-- 範例：查詢價格大於 100 的商品名稱</span>\n<span class=\"hljs-keyword\">SELECT</span>\n  name\n<span class=\"hljs-keyword\">FROM</span>\n  products\n<span class=\"hljs-keyword\">WHERE</span>\n  price <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">100</span>;\n</code></pre>\n<ul>\n<li>邏輯運算子</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th><strong>運算子</strong></th>\n<th><strong>描述</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>AND</td>\n<td>且，兩個條件需同時成立</td>\n</tr>\n<tr>\n<td>OR</td>\n<td>或，其中一個條件成立</td>\n</tr>\n</tbody>\n</table>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">-- 範例：查詢價格大於 100 且庫存大於 0 的商品名稱</span>\n<span class=\"hljs-keyword\">SELECT</span>\n  name\n<span class=\"hljs-keyword\">FROM</span>\n  products\n<span class=\"hljs-keyword\">WHERE</span>\n  price <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">100</span> <span class=\"hljs-keyword\">AND</span> stock <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">0</span>;\n\n<span class=\"hljs-comment\">-- 範例：查詢下架或庫存等於 0 的商品名稱</span>\n<span class=\"hljs-keyword\">SELECT</span>\n  name\n<span class=\"hljs-keyword\">FROM</span>\n  products\n<span class=\"hljs-keyword\">WHERE</span>\n  status <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;inactive&#x27;</span> <span class=\"hljs-keyword\">OR</span> stock <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;\n</code></pre>\n<h3>更新資料</h3>\n<ul>\n<li><code>UPDATE</code>：更新目標的資料表(Table)</li>\n<li><code>SET</code>：更新欄位值</li>\n<li>執行順序：更新資料表(<code>UPDATE</code>) → 篩選範圍(<code>WHERE</code>) → 更新對應欄位值(<code>SET</code>)</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">-- 格式</span>\n<span class=\"hljs-keyword\">UPDATE</span> 資料表名稱\n<span class=\"hljs-keyword\">SET</span> 欄位名 <span class=\"hljs-operator\">=</span> 欄位值\n<span class=\"hljs-keyword\">WHERE</span> 條件範圍\n\n<span class=\"hljs-comment\">-- 範例：更新 iPhone 庫存為 1</span>\n<span class=\"hljs-comment\">-- 執行順序是 1 -&gt; 3 -&gt; 2</span>\n<span class=\"hljs-keyword\">UPDATE</span>\n  products         <span class=\"hljs-comment\">-- 1</span>\n<span class=\"hljs-keyword\">SET</span>\n  stock <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">1</span>        <span class=\"hljs-comment\">-- 2</span>\n<span class=\"hljs-keyword\">WHERE</span>\n  name <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;iPhone&#x27;</span>; <span class=\"hljs-comment\">-- 3</span>\n\n<span class=\"hljs-comment\">-- 範例(多筆更新)：更新 iPhone 庫存為 3、價錢為 55,000</span>\n<span class=\"hljs-keyword\">UPDATE</span>\n  products\n<span class=\"hljs-keyword\">SET</span>\n  stock <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">3</span>, price <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">55000</span>\n<span class=\"hljs-keyword\">WHERE</span>\n  name <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;iPhone&#x27;</span>;\n</code></pre>\n<h3>刪除資料</h3>\n<ul>\n<li><code>DELETE FROM</code>：刪除目標的資料表</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">-- 格式</span>\n<span class=\"hljs-keyword\">DELETE</span> <span class=\"hljs-keyword\">FROM</span> 資料表名稱\n<span class=\"hljs-keyword\">WHERE</span> 條件範圍\n\n<span class=\"hljs-comment\">-- 範例：刪除庫存等於 0 的商品</span>\n<span class=\"hljs-keyword\">DELETE</span> <span class=\"hljs-keyword\">FROM</span> products\n<span class=\"hljs-keyword\">WHERE</span> stock <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;\n</code></pre>\n<blockquote>\n<p><strong>[補充]</strong></p>\n<p>實務上通常不會直接刪除資料庫的資料，而是使用<code>軟刪除</code> 方式，即為透過另外一個欄位(例如：<code>deleteAt</code>)實作刪除標記，避免意外導致資料救不回來。</p>\n</blockquote>\n","toc":{"title":"SQL 介紹和基本語法(CRUD)","subtitles":["什麼是資料庫？","什麼是 SQL ?","資料庫結構","資料的型態","SQL 基本語法"]},"wordCount":1245}