{"info":{"title":"GraphQL - Graph Query Language","fileName":"graphql-introduction","description":"ç«™åœ¨å‰ç«¯è§’åº¦ï¼Œå»åˆæ¢ GraphQL ä¸–ç•Œ ï½","createdAt":"2024-04-17T00:00:00.000Z","updatedAt":"2024-04-17T00:00:00.000Z","tags":["graphql","api","restful"]},"content":"<h6>tags: <code>GraphQL</code></h6>\n<h1 id=\"GraphQL - Graph Query Language\" title=\"GraphQL - Graph Query Language\">GraphQL - Graph Query Language</h1>\n<p>æ­¤ç¯‡æ˜¯ç«™åœ¨å‰ç«¯è§’åº¦ï¼Œå»åˆæ¢ GraphQL ä¸–ç•Œ ï½</p>\n<h2 id=\"ä»€éº¼æ˜¯ GraphQL ?\" title=\"ä»€éº¼æ˜¯ GraphQL ?\"><a href=\"#ä»€éº¼æ˜¯ GraphQL ?\">ä»€éº¼æ˜¯ GraphQL ?</a></h2>\n<p>GraphQL æ˜¯ä¸€ç¨®ç”¨æ–¼ API çš„æŸ¥è©¢èªè¨€ï¼Œå¯ä»¥è®“ client ç«¯æ›´å½ˆæ€§å»ä½¿ç”¨å¾Œç«¯æä¾›çš„è³‡æ–™ã€‚</p>\n<p>æœ€åˆæ˜¯ç”± Facebook é–‹ç™¼çš„ï¼Œæ˜¯ç‚ºäº†è¦è§£æ±ºæ‰‹æ©Ÿ APP åœ¨åˆæ¬¡è¼‰å…¥ï¼Œæœƒç™¼å¤šå€‹ requests å»å–å¾—é é¢è³‡æ–™ï¼Œé€²è€Œå°è‡´ç¨‹å¼æœƒè®Šæ…¢æˆ–ç›´æ¥ç•¶æ‰å•é¡Œï¼Œæ‰€ä»¥ä»–å€‘æƒ³èªªå°‡è³‡æ–™æ•´åˆæˆä¸€ç­†ï¼Œé€åˆ° client ç›´æ¥åšä½¿ç”¨ã€‚<a  href=\"(https://engineering.fb.com/2015/09/14/core-data/graphql-a-data-query-language/)\" target=\"_blank\" rel=\"noreferrer noopener\">å¾Œä¾† Facebook ä¹Ÿåœ¨ 2015 å¹´å…¬é–‹ç™¼ä½ˆé€™é …æŠ€è¡“</a>ã€‚</p>\n<h2 id=\"GraphQL v.s. RESTful\" title=\"GraphQL v.s. RESTful\"><a href=\"#GraphQL v.s. RESTful\">GraphQL v.s. RESTful</a></h2>\n<h3>1. API endpoints</h3>\n<ul>\n<li>\n<p><code>RESTful</code> æ ¹æ“šè³‡æºé¡å‹ï¼Œæœƒæœ‰å¤šå€‹ endpointsï¼š</p>\n<ul>\n<li><code>/users/&lt;id&gt;</code></li>\n<li><code>/users/&lt;id&gt;/posts</code></li>\n<li><code>/users/&lt;id&gt;/followers</code></li>\n</ul>\n</li>\n<li>\n<p><code>GraphQL</code> åªæœ‰ä¸€å€‹ endpointï¼š</p>\n<ul>\n<li><code>/graphql</code></li>\n</ul>\n</li>\n</ul>\n<h3>2. Data Fetching</h3>\n<ul>\n<li>\n<p><code>RESTful</code><br />\n_ éœ€è¦æ‰“ä¸‰æ¬¡ apiï¼Œæ‰å¯ä»¥å¾—åˆ°é é¢è¦çš„å…¨éƒ¨è³‡æ–™<br />\n_ å¦‚æœ api æœ¬èº«æœ‰ä¾è³´å‰ä¸€æ”¯ API (A =&gt; B =&gt; C)ï¼Œéœ€è¦ç­‰åˆ° A responseï¼Œæ‰èƒ½ç™¼ B çš„ request<br />\n<img src=\"https://i.imgur.com/Wg2RlhE.png\" alt=\"\" /></p>\n</li>\n<li>\n<p><code>GraphQL</code><br />\n_ å¯é¸æ“‡ä¸‰ç¨®ä¸åŒé¡å‹çš„è³‡æ–™ï¼Œé›†ä¸­åœ¨åŒä¸€ç­† request<br />\n_ è³‡æ–™æœ¬èº«æœ‰é—œè¯ï¼Œå¦‚ A çš„ response ä¸­æœ‰ B æ‰€éœ€è¦çš„ paramsï¼ŒB å¯ä»¥ç›´åµŒå…¥ A çš„ query è£¡é¢ï¼Œé€™æ¨£ä¹Ÿåªéœ€æ‰“ä¸€æ¬¡ request å³å¯<br />\n<img src=\"https://i.imgur.com/aXeOu3I.png\" alt=\"\" /></p>\n</li>\n</ul>\n<blockquote>\n<p><a  href=\"https://www.howtographql.com/basics/1-graphql-is-the-better-rest/\" target=\"_blank\" rel=\"noreferrer noopener\">åœ–ç‰‡ä¾†æº</a></p>\n</blockquote>\n<h3>3. Overfetching and Underfetching</h3>\n<ul>\n<li><code>RESTful</code> å®¹æ˜“å«éå¤šæˆ–ç¼ºå°‘ä¸€äº›è³‡æ–™ï¼Œå› ç‚º endpoint å›çš„ response è³‡æ–™æ˜¯å›ºå®šçš„</li>\n<li><code>GraphQL</code> å¯ç²¾æº–æŒ‘é¸æ‰€éœ€è¦çš„è³‡æ–™</li>\n</ul>\n<h3>4. Schema &amp; Type System</h3>\n<p>Schema æ˜¯ç”¨ä¾†å®šç¾© API çš„çµæ§‹å’ŒåŠŸèƒ½ï¼Œå‰ç«¯å¯é€éå¥—ä»¶ï¼Œæ˜ å°„ä¸€ä»½èˆ‡å¾Œç«¯ç›¸åŒçš„ API Type Systemï¼Œä¸åª API åº•ä¸‹æ¬„ä½å®šç¾©çš„ Typeï¼Œé€£ Type name éƒ½å¯ä»¥è·Ÿå¾Œç«¯åŒæ­¥ï¼Œæ¸›å°‘é›™æ–¹å°æ¬„ä½èªçŸ¥ä¸ä¸€è‡´ï¼Œä¸”å¾Œç«¯åªè¦ä¸€æ›´æ”¹ï¼Œå‰ç«¯ç«‹é¦¬éš¨ä¹‹ä¹Ÿæœƒæ›´æ–°ã€‚</p>\n<h2 id=\"å¦‚ä½•ä½¿ç”¨\" title=\"å¦‚ä½•ä½¿ç”¨\"><a href=\"#å¦‚ä½•ä½¿ç”¨\">å¦‚ä½•ä½¿ç”¨</a></h2>\n<h3>Query</h3>\n<p>ç”¨æ–¼å–å¾—è³‡æ–™</p>\n<h4>1. åŸºæœ¬</h4>\n<pre class=\"hljs\"><code># å¯«æ³•ä¸€ï¼š\n{\n  me {\n    name\n  }\n}\n\n# å¯«æ³•äºŒï¼š\nquery {\n  me {\n    name\n  }\n}\n\n# å¯«æ³•ä¸‰: Operation name for identify different GraphQL requests\nquery getMe {\n  me {\n    name\n  }\n}\n\n</code></pre>\n<div class=\"info\">\n<p>ğŸ’¡<strong>Operation nameï¼š</strong></p>\n<p>é€šå¸¸å¯¦å‹™ä¸Šéƒ½æœƒä½¿ç”¨å¯«æ³•ä¸‰ï¼Œä¹Ÿå°±æ˜¯æœƒåŠ  Operation nameï¼Œå¯ä»¥æ–¹ä¾¿ debug å’Œè¿½è¹¤ä¸€äº›æ•¸æ“šï¼Œç›¸ç•¶æ–¼å¹«å®ƒå–ä¸€å€‹è®Šæ•¸åçš„æ¦‚å¿µã€‚</p>\n<p>åœ¨ Network è£¡é¢ä¹Ÿå¯ä»¥çœ‹åˆ° Operation nameï¼Œå®˜æ–¹ä¹Ÿæ˜¯å»ºè­°ä½¿ç”¨é€™ç¨®å¯«æ³•ã€‚</p>\n<p><img src=\"https://i.imgur.com/0cHSBgO.png\" alt=\"\" /></p>\n</div>\n<p>ä»¥ä¸Šä¸‰ç¨®å¯«æ³•éƒ½å¯ä»¥å¾—åˆ° server çš„ responseï¼š</p>\n<pre class=\"hljs\"><code><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;data&quot;</span><span class=\"hljs-punctuation\">:</span><span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;me&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Jennie&quot;</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<h4>2. æœ‰ä½¿ç”¨åƒæ•¸</h4>\n<pre class=\"hljs\"><code># å¯«æ³•ä¸€ï¼š query + åƒæ•¸\n{\n  human(id: &quot;1000&quot;) {\n    name\n    height(unit: FOOT)\n  }\n}\n\n# å¯«æ³•äºŒï¼š query + åƒæ•¸\nquery humanInfo($id: Int!) {\n  human(id: $id) {\n    name\n    height(unit: FOOT)\n  }\n}\n</code></pre>\n<p>å¾—åˆ°çš„ responseï¼š</p>\n<pre class=\"hljs\"><code><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;data&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;human&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Luke Skywalker&quot;</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">&quot;height&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">5.6430448</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<h4>3. Aliases - ä½¿ç”¨åˆ¥å</h4>\n<pre class=\"hljs\"><code># ä½¿ç”¨åˆ¥åï¼Œæ”¹è®Š response key\n{\n  empireHero: hero(episode: EMPIRE) {\n    name\n  }\n  jediHero: hero(episode: JEDI) {\n    name\n  }\n}\n</code></pre>\n<p>å¾—åˆ°çš„ responseï¼š</p>\n<pre class=\"hljs\"><code><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;data&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;empireHero&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Luke Skywalker&quot;</span>\n    <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;jediHero&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;R2-D2&quot;</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<h4>4. Fragments</h4>\n<pre class=\"hljs\"><code># ä½¿ç”¨ Fragmentsï¼Œå¯ä¾æ“šä¸åŒ episodeï¼Œæ‰“åŒä¸€éš» api\nquery getXXX{\n  leftComparison: hero(episode: EMPIRE) {\n    ...comparisonFields\n  }\n  rightComparison: hero(episode: JEDI) {\n    ...comparisonFields\n  }\n}\n\nfragment comparisonFields on Character {\n  name\n  appearsIn\n  friends {\n    name\n  }\n}\n</code></pre>\n<p>å¾—åˆ°çš„ responseï¼š</p>\n<pre class=\"hljs\"><code><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;data&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;leftComparison&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Luke Skywalker&quot;</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">&quot;appearsIn&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n        <span class=\"hljs-string\">&quot;NEWHOPE&quot;</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-string\">&quot;EMPIRE&quot;</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-string\">&quot;JEDI&quot;</span>\n      <span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">&quot;friends&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n        <span class=\"hljs-punctuation\">{</span>\n          <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Han Solo&quot;</span>\n        <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-punctuation\">{</span>\n          <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Leia Organa&quot;</span>\n        <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-punctuation\">{</span>\n          <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;C-3PO&quot;</span>\n        <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-punctuation\">{</span>\n          <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;R2-D2&quot;</span>\n        <span class=\"hljs-punctuation\">}</span>\n      <span class=\"hljs-punctuation\">]</span>\n    <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;rightComparison&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;R2-D2&quot;</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">&quot;appearsIn&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n        <span class=\"hljs-string\">&quot;NEWHOPE&quot;</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-string\">&quot;EMPIRE&quot;</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-string\">&quot;JEDI&quot;</span>\n      <span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">&quot;friends&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n        <span class=\"hljs-punctuation\">{</span>\n          <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Luke Skywalker&quot;</span>\n        <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-punctuation\">{</span>\n          <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Han Solo&quot;</span>\n        <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-punctuation\">{</span>\n          <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Leia Organa&quot;</span>\n        <span class=\"hljs-punctuation\">}</span>\n      <span class=\"hljs-punctuation\">]</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<h3>Mutation</h3>\n<p>ç”¨æ–¼æ–°å¢/æ›´æ–°/åˆªé™¤è³‡æ–™</p>\n<h4>åŸºæœ¬</h4>\n<pre class=\"hljs\"><code># mutation\nmutation createReviewForEpisode($ep: Episode!, $review: ReviewInput!) {\n  createReview(episode: $ep, review: $review) {\n    stars\n    commentary\n  }\n}\n</code></pre>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// variables</span>\n<span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;ep&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;JEDI&quot;</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;review&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;stars&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">5</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;commentary&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;This is a great movie!&quot;</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<p>API æˆåŠŸå¾Œï¼Œå›å‚³çš„ responseï¼š</p>\n<pre class=\"hljs\"><code><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;data&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;hero&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;R2-D2&quot;</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">&quot;friends&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n        <span class=\"hljs-punctuation\">{</span>\n          <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Luke Skywalker&quot;</span>\n        <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-punctuation\">{</span>\n          <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Han Solo&quot;</span>\n        <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-punctuation\">{</span>\n          <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Leia Organa&quot;</span>\n        <span class=\"hljs-punctuation\">}</span>\n      <span class=\"hljs-punctuation\">]</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<h4>åƒæ•¸é è¨­å€¼</h4>\n<p>å¯ä»¥ä½¿ç”¨ <code>=</code> å¸¶å…¥åƒæ•¸çš„é è¨­å€¼</p>\n<pre class=\"hljs\"><code>query HeroNameAndFriends($episode: Episode = JEDI) {\n  hero(episode: $episode) {\n    name\n    friends {\n      name\n    }\n  }\n}\n</code></pre>\n<h2 id=\"ç”Ÿæ…‹åœˆ + å·¥å…·\" title=\"ç”Ÿæ…‹åœˆ + å·¥å…·\"><a href=\"#ç”Ÿæ…‹åœˆ + å·¥å…·\">ç”Ÿæ…‹åœˆ + å·¥å…·</a></h2>\n<h3><a  href=\"https://graphql.org/code/\" target=\"_blank\" rel=\"noreferrer noopener\">Language</a> / Framework</h3>\n<p>å‰ç«¯ Web å’Œ App èªè¨€åŸºæœ¬ GraphQL éƒ½æœ‰æ”¯æŒä½¿ç”¨ (e.g. JavaScriptã€Kotlinã€Swift)ï¼Œå¦å¤–ï¼Œä¸è«–å¾Œç«¯èªè¨€æ˜¯ä½¿ç”¨å“ªä¸€ç¨®ï¼Œåªéœ€è¦å¾Œç«¯ä¹Ÿæœ‰ä½¿ç”¨ GraphQL æ’°å¯« APIï¼Œå‰ç«¯å°±å¯ä»¥ç”¨ GraphQL ä¾†åšå‰å¾Œç«¯çš„è³‡æ–™å‚³è¼¸ã€‚</p>\n<p>å‰ç«¯ä¸‰å¤§æ¡†æ¶ï¼Œä¹Ÿå„æœ‰èˆ‡ GraphQL æ­é…çš„å·¥å…·ä½¿ç”¨ï¼Œæ‰€ä»¥å¯ä»¥è€ƒæ…®è·Ÿå¾Œç«¯æºé€šï¼Œä¸€åŒè¸å…¥ GraphQL ä¸–ç•Œï¼</p>\n<h3>GraphQL Client å¸¸è¦‹å·¥å…·</h3>\n<p>GraphQL Client ä¸»è¦å·¥ä½œå°±æ˜¯ï¼Œä½¿ç”¨å‰ç«¯å¯«å¥½çš„ query èˆ‡ server å»æºé€šï¼Œå³ client åªéœ€è¦å¯« queryï¼Œæ‰“ API è¡Œç‚ºå°±äº¤çµ¦å·¥å…·å‡½å¼åº«å¹«ä½ è§£æ±ºï¼Œç›¸ç•¶æ–¼åœ¨ä½¿ç”¨ RESTful API æ™‚å€™ï¼Œæœƒå»ç”¨ axios å¹«åŠ©è™•ç† APIã€‚å¦å¤–é€™äº›å·¥å…·æœ‰äº›ä¹Ÿæœ‰æ•´åˆå‰ç«¯å…¶ä»–æ¡†æ¶ã€è³‡æ–™ Cache ç­‰åŠŸèƒ½ï¼ŒåŸºæœ¬éƒ½æœƒé¸ä¸€å€‹ä¾†æ­é…ä½¿ç”¨ã€‚</p>\n<p><strong>GraphQL Client</strong></p>\n<ul>\n<li><a  href=\"https://www.apollographql.com/docs/\" target=\"_blank\" rel=\"noreferrer noopener\">Apollo Client</a></li>\n<li><a  href=\"https://github.com/prisma-labs/graphql-request\" target=\"_blank\" rel=\"noreferrer noopener\">graphql-request</a>\n<blockquote>\n<p>5/27 ç•¶å¤©æœ‰å£èª¤ï¼Œä¸»è¦ GraphQL Client ç‚º <code>graphql-request</code>ï¼Œåªæ˜¯ç•¶å¤©æœ‰åœ¨æ­é…ï¼Œreact-query å»è™•ç† API</p>\n</blockquote>\n</li>\n<li><a  href=\"https://relay.dev/\" target=\"_blank\" rel=\"noreferrer noopener\">relay</a></li>\n</ul>\n<p><strong>IDE</strong></p>\n<p>åŸºæœ¬å°±æ˜¯ API Documentationï¼Œç›¸ç•¶æ–¼ <a  href=\"https://swagger.io/\" target=\"_blank\" rel=\"noreferrer noopener\">swagger</a> åœ¨ä½¿ç”¨ RESTful API æ‰®æ¼”çš„è§’è‰²ï¼Œå¯ä»¥é€é IDE çœ‹åˆ° params/response çš„ type è³‡è¨Šï¼Œä¹Ÿèƒ½åœ¨ä¸Šé¢ç›´æ¥é€ requestï¼ŒæŸ¥çœ‹ response çš„è³‡æ–™ï¼Œä½†è¦ä½¿ç”¨å“ªå€‹ IDE æ˜¯ç”±å¾Œç«¯æ±ºå®šçš„ï¼Œå› ç‚ºå‰ç«¯ä¹Ÿæœƒä½¿ç”¨åˆ°ï¼Œæ‰€ä»¥ä¹Ÿç¨å¾®ä»‹ç´¹ä¸€ä¸‹ã€‚</p>\n<ul>\n<li><a  href=\"https://www.electronjs.org/apps/graphiql\" target=\"_blank\" rel=\"noreferrer noopener\">GraphiQL</a></li>\n<li><a  href=\"https://github.com/graphql/graphql-playground\" target=\"_blank\" rel=\"noreferrer noopener\">graphql-playground</a></li>\n</ul>\n<p><strong>å…¶ä»–</strong></p>\n<p>å¦‚æœæœ‰ä½¿ç”¨ TypeScript å¼·çƒˆæ¨è–¦ä½¿ç”¨ï¼å®ƒæœƒä¾æ“š client å®šç¾©çš„ queryï¼Œè‡ªå‹•å°åˆ°å¾Œç«¯æä¾›çš„ schema ç”¢ç”Ÿå°æ‡‰çš„ typeï¼Œé€£ type name ä¹Ÿä¸ç”¨å‰ç«¯æƒ³ï¼Œå°å‘½åéšœç¤™çš„äººç°¡ç›´æ˜¯ç¦éŸ³ï¼Œè€Œä¸”åªè¦å¾Œç«¯æœ‰æ”¹åˆ° schemaï¼Œæ–‡ä»¶ä¹Ÿå°è‡ªå·±è‡ªå‹•ä¿®æ”¹ï¼Œé–‹ç™¼é«”é©—éå¸¸å¥½ï¼ ğŸ‘</p>\n<ul>\n<li><a  href=\"https://www.graphql-code-generator.com/\" target=\"_blank\" rel=\"noreferrer noopener\">GraphQL Code Generator</a></li>\n</ul>\n<p><img src=\"https://i.imgur.com/5le51mm.png\" alt=\"GraphQL Code Generator\" /></p>\n<h2 id=\"GraphQL å„ª/ç¼ºé»\" title=\"GraphQL å„ª/ç¼ºé»\"><a href=\"#GraphQL å„ª/ç¼ºé»\">GraphQL å„ª/ç¼ºé»</a></h2>\n<h3>å„ªé»</h3>\n<ol>\n<li>doc æ–‡ä»¶æ¸…æ¥š (æˆ‘è¦ºå¾—æ¯” Swagger å¥½ç”¨)</li>\n<li>å½ˆæ€§èª¿æ•´ responseï¼Œå¯ä»¥å‰›å¥½é…ç½®å‡ºå‰ç«¯éœ€è¦çš„è³‡æ–™æ ¼å¼</li>\n<li>TypeScript æ­é…å·¥å…·ï¼Œèƒ½è‡ªå‹•ç”¢å‡º response typeï¼Œç¯€çœé–‹ç™¼å’Œç¶­è­·æ™‚é–“</li>\n<li>ç”Ÿæ…‹ç³»å·²æ»¿è“¬å‹ƒï¼Œå°‡ä¾†æ›èªè¨€æˆ–æ¡†æ¶ï¼Œç¶“é©—ä¹Ÿå¯ä»¥æ²¿ç”¨</li>\n</ol>\n<h3>ç¼ºé»</h3>\n<ol>\n<li>éœ€è¦å¾Œç«¯é…åˆä½¿ç”¨</li>\n<li>å¾Œç«¯ api error responseï¼Œç›¸è¼ƒæ–¼ Swaggerï¼Œè¼ƒä¸å®¹æ˜“å¯«æ¸…æ¥š</li>\n<li>å­¸ç¿’æˆæœ¬ï¼Œè·Ÿ RESTful ç”¨æ³•é‚„æ˜¯ä¸åŒï¼Œéœ€ä»˜å‡ºæ™‚é–“é©æ‡‰å­¸ç¿’</li>\n<li>éŒ¯èª¤è¨Šæ¯éœ€é¡å¤–è™•ç†ï¼ŒåŸºæœ¬æœ‰æˆåŠŸéƒ½æ˜¯ 200ï¼Œæ›´è©³ç´°éŒ¯èª¤è¨Šæ¯ï¼Œéœ€è§£æ§‹å‡ºä¾†çœ‹</li>\n<li>query æ·±åº¦å’Œè¤‡é›œåº¦éƒ½æœƒå½±éŸ¿æ•´å€‹ query æ•ˆèƒ½</li>\n<li>æ­é… cache åŠŸèƒ½çš„è©±ï¼Œéœ€è€ƒæ…®åˆ°æ•´å€‹å°ˆæ¡ˆè¨­è¨ˆï¼Œé¿å…åŒè³‡æ–™ï¼Œæ›´æ–°æ™‚é–“é»ä¸åŒæ­¥</li>\n</ol>\n<h2 id=\"Apollo + React\" title=\"Apollo + React\"><a href=\"#Apollo + React\">Apollo + React</a></h2>\n<div class=\"info\">\n<p><strong><a  href=\"https://github.com/JennieSH/graphql-appworks\" target=\"_blank\" rel=\"noreferrer noopener\">Demo Codeï¼š</a></strong></p>\n<ul>\n<li><strong><a  href=\"https://github.com/JennieSH/graphql-appworks/tree/master/client-js\" target=\"_blank\" rel=\"noreferrer noopener\">client-js</a></strong> : React + JavaScript + apollo</li>\n<li><strong><a  href=\"https://github.com/JennieSH/graphql-appworks/tree/master/client-ts\" target=\"_blank\" rel=\"noreferrer noopener\">client-ts</a></strong> : React + TypeScript + graphql-request</li>\n<li><strong><a  href=\"https://github.com/JennieSH/graphql-appworks/tree/master/server-js\" target=\"_blank\" rel=\"noreferrer noopener\">server-js</a></strong> : Nodejs + MongoDB</li>\n</ul>\n<p>ğŸ’¡ æƒ³å¯¦ä½œå‰ç«¯çš„è©±ï¼Œå¯ä»¥ç›´æ¥æ‹‰ <strong><a  href=\"https://github.com/JennieSH/graphql-appworks/blob/feature/template/client-js/package.json\" target=\"_blank\" rel=\"noreferrer noopener\">feature/template</a></strong> é€™å€‹ branchï¼Œè£¡é¢ UI å·²è™•ç†å¥½ï¼Œå¾Œç«¯ server èµ·èµ·ä¾†å¾Œï¼Œå°±å¯ä»¥è‡ªè¡Œé‡å°ç·´ç¿’ graphql</p>\n<p>ğŸ’¡ å¾Œç«¯ DB å¯†ç¢¼è¨˜å¾—æ”¹æˆ school wifi å¯†ç¢¼ï¼Œæˆ–è€…æ”¹æ¥è‡ªå·±çš„ DBã€server ä¹Ÿå¯ä»¥</p>\n</div>\n<h4>1. å®‰è£</h4>\n<pre class=\"hljs\"><code>npm install @apollo/client graphql\n</code></pre>\n<h4>2. åˆå§‹åŒ– ApolloClient</h4>\n<ul>\n<li><code>uri</code> éœ€èª¿æ•´ç‚º GraphQL server URL</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// App.jsx</span>\n\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">ApolloClient</span>, <span class=\"hljs-title class_\">InMemoryCache</span>, <span class=\"hljs-title class_\">ApolloProvider</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;@apollo/client&quot;</span>;\n\n<span class=\"hljs-comment\">// step 1. initialize apollo client</span>\n<span class=\"hljs-keyword\">const</span> client = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ApolloClient</span>({\n  <span class=\"hljs-attr\">uri</span>: <span class=\"hljs-string\">&quot;http://localhost:4000/graphql&quot;</span>,\n  <span class=\"hljs-attr\">cache</span>: <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">InMemoryCache</span>()\n});\n\n<span class=\"hljs-comment\">// step 2. add ApolloProvider</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">App</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ApolloProvider</span> <span class=\"hljs-attr\">client</span>=<span class=\"hljs-string\">{client}</span>&gt;</span>Hello world!<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ApolloProvider</span>&gt;</span></span>;\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">App</span>;\n</code></pre>\n<div class=\"info\">\n<p>ğŸ’¡<strong><a  href=\"https://chrome.google.com/webstore/detail/apollo-client-devtools/jdkknkkbebbapilgoeccciglkfbmbnfm/related\" target=\"_blank\" rel=\"noreferrer noopener\">Apollo Client Devtools</a></strong></p>\n<p>å¯åœ¨é–‹ç™¼è€…å·¥å…·çš„ tab æ‰“é–‹ï¼Œå³å¯çœ‹åˆ°å¦‚åœ–çš„ç•«é¢ï¼Œä¹Ÿå¯ä»¥åœ¨é€™é‚Šæ“ä½œæ‰“ apiï¼Œå¯ä»¥çœ‹åˆ°å³æ™‚çš„ response ã€‚</p>\n<p><img src=\"https://i.imgur.com/aG2qW58.png\" alt=\"\" /></p>\n</div>\n<h2 id=\"ç¸½çµ\" title=\"ç¸½çµ\"><a href=\"#ç¸½çµ\">ç¸½çµ</a></h2>\n<p>æ¯å€‹æŠ€è¡“éƒ½æœ‰é©åˆçš„å ´æ™¯æ‡‰ç”¨ï¼Œé€™ç¯‡ä¸¦ä¸æ˜¯é¼“å¹æ£„ç”¨ RESTful APIï¼Œåªæ˜¯å¾å‰ç«¯è§’åº¦æ‰“é–‹ GraphQL ä¸–ç•Œçš„ä¸€ç¯‡ç´€éŒ„ã€‚ç•¶ç„¶ï¼Œå¾å¾Œç«¯è§’åº¦çœ‹ï¼ŒGraphQL ä¸€å®šæœ‰å¦ä¸€ç¨®æ„Ÿæ‚Ÿå’Œä¸åŒçš„è€ƒæ…®æ–¹å‘ï¼Œä¾‹å¦‚ N+1 ç­‰æ€§èƒ½å•é¡Œã€‚GraphQL åœ¨æä¾›éˆæ´»æ€§å’Œæ•ˆç‡çš„åŒæ™‚ï¼Œä¹Ÿå¸¶ä¾†äº†ä¸€äº›æŒ‘æˆ°ï¼Œäº†è§£é€™äº›å„ªç¼ºé»ï¼Œæ‰èƒ½åœ¨åšå‡ºé¸æ“‡æ™‚è€ƒæ…®å¾—æ›´å…¨é¢ã€‚</p>\n<h2 id=\"åƒè€ƒè³‡æ–™\" title=\"åƒè€ƒè³‡æ–™\"><a href=\"#åƒè€ƒè³‡æ–™\">åƒè€ƒè³‡æ–™</a></h2>\n<ol>\n<li><a  href=\"https://www.howtographql.com/\" target=\"_blank\" rel=\"noreferrer noopener\">HOW TO GRAPHQL</a></li>\n<li><a  href=\"https://graphql.org/\" target=\"_blank\" rel=\"noreferrer noopener\">GraphQL å®˜ç¶²</a></li>\n<li><a  href=\"https://ithelp.ithome.com.tw/articles/10200678\" target=\"_blank\" rel=\"noreferrer noopener\">Think in GraphQL</a></li>\n<li><a  href=\"https://www.smashingmagazine.com/2020/07/client-side-graphql-apollo-client-react-apps/\" target=\"_blank\" rel=\"noreferrer noopener\">Understanding Client-Side GraphQl With Apollo-Client In React Apps</a></li>\n</ol>\n","toc":{"title":"GraphQL - Graph Query Language","subtitles":["ä»€éº¼æ˜¯ GraphQL ?","GraphQL v.s. RESTful","å¦‚ä½•ä½¿ç”¨","ç”Ÿæ…‹åœˆ + å·¥å…·","GraphQL å„ª/ç¼ºé»","Apollo + React","ç¸½çµ","åƒè€ƒè³‡æ–™"]},"wordCount":1411}