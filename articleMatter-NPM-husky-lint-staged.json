{"info":{"title":"ç¨‹å¼ç¢¼å®ˆé–€å“¡ - Husky + Lint-Staged","fileName":"husky-lint-staged","description":"Don't let ğŸ’© slip into your code base! å¦‚ä½•åœ¨å°ˆæ¡ˆä¸­ä½¿ç”¨ husky å’Œ lint-stagedï¼Œåœ¨æäº¤ commit å‰å°±æ‰¾å‡ºéŒ¯èª¤ï¼","createdAt":"2021-11-17T00:00:00.000Z","updatedAt":"2021-11-17T00:00:00.000Z","tags":["NPM","package","husky","lint-staged","ESLint","Stylelint"]},"content":"<h1 id=\"ç¨‹å¼ç¢¼å®ˆé–€å“¡ - Husky + Lint-Staged\" title=\"ç¨‹å¼ç¢¼å®ˆé–€å“¡ - Husky + Lint-Staged\">ç¨‹å¼ç¢¼å®ˆé–€å“¡ - Husky + Lint-Staged</h1>\n<p><strong>Donâ€™t let ğŸ’© slip into your code base!</strong> é€™æ®µè©±å‡ºè‡ª <a  href=\"https://www.npmjs.com/package/lint-staged\" target=\"_blank\" rel=\"noreferrer noopener\"><code>lint-staged</code></a>ï¼Œéå¸¸ç¬¦åˆé€™ç¯‡æ–‡ç« æƒ³å‚³é”çš„ä¸»æ—¨ã€‚</p>\n<p>æ­¤æ–‡æ˜¯ç´€éŒ„æˆ‘åœ¨å°ˆæ¡ˆä¸Šå¦‚ä½•ä½¿ç”¨ <code>husky</code> + <code>lint-staged</code>ï¼Œä¸»è¦éœ€æ±‚æœ‰ï¼š</p>\n<ol>\n<li>æ¯æ¬¡ <code>git commit</code> å‰è‡ªå‹•åŸ·è¡Œ</li>\n<li>è‡ªå‹•ä¿®æ­£ lint éŒ¯èª¤å’Œç¨‹å¼ç¢¼æ’ç‰ˆ</li>\n<li>æª¢æŸ¥å¤±æ•—ä¸”ä¸èƒ½è‡ªå‹•ä¿®å¾©æ™‚ï¼Œä¸è¦ commit</li>\n</ol>\n<h2 id=\"ä»‹ç´¹\" title=\"ä»‹ç´¹\"><a href=\"#ä»‹ç´¹\">ä»‹ç´¹</a></h2>\n<h3>- <a  href=\"https://www.npmjs.com/package/husky\" target=\"_blank\" rel=\"noreferrer noopener\"><code>husky</code></a> ğŸ¶</h3>\n<p>å¯ä»¥è®“æˆ‘å€‘åœ¨å¦‚ <code>git commit</code>ã€<code>git push</code> åŸ·è¡Œå‰ï¼Œé å…ˆè™•ç†æˆ‘å€‘æŒ‡å®šçš„ä»»å‹™</p>\n<h3>- <a  href=\"https://www.npmjs.com/package/lint-staged\" target=\"_blank\" rel=\"noreferrer noopener\"><code>lint-staged</code></a> ğŸš« ğŸ’©</h3>\n<p>é›†ä¸­æª¢æŸ¥ç¯„åœï¼Œåªé‡å°æœ‰è®Šå‹•çš„æª”æ¡ˆï¼Œè€Œéæ•´å€‹å°ˆæ¡ˆï¼Œä¹Ÿå¯ä»¥ä¾æ“šæª”æ¡ˆé¡å‹ï¼Œåˆ†åˆ¥è¨­ç½®ä¸åŒæŒ‡ä»¤ã€‚</p>\n<h2 id=\"Installation\" title=\"Installation\"><a href=\"#Installation\">Installation</a></h2>\n<pre class=\"hljs\"><code>npm install husky lint-staged -D\n</code></pre>\n<h2 id=\"husky è¨­å®š\" title=\"husky è¨­å®š\"><a href=\"#husky è¨­å®š\">husky è¨­å®š</a></h2>\n<h3>- åˆå§‹åŒ–è¨­å®š:</h3>\n<p>å°ˆæ¡ˆæœ€åˆè¨­å®šä¸€æ¬¡å³å¯ï¼Œæœƒåœ¨æ ¹ç›®éŒ„ä¸‹ç”¢ç”Ÿä¸€å€‹ <code>.husky</code> è³‡æ–™å¤¾ï¼Œå­˜æ”¾ husky çš„ç›¸é—œè…³æœ¬</p>\n<pre class=\"hljs\"><code>npm set-script prepare <span class=\"hljs-string\">&quot;husky install&quot;</span>\nnpm run prepare\n</code></pre>\n<h3>- å¢åŠ  hook:</h3>\n<p>æŒ‡å®šåœ¨ <code>git commit</code> å‰å…ˆè·‘é <code>npx lint-staged</code> è…³æœ¬ï¼Œå¦‚æœå¤±æ•—çš„è©±ï¼Œ<code>git commit</code> ä¸æœƒè¢«åŸ·è¡Œã€‚</p>\n<pre class=\"hljs\"><code>npx husky add .husky/pre-commit <span class=\"hljs-string\">&quot;npx lint-staged&quot;</span>\n</code></pre>\n<p>è¼¸å…¥å®Œä¸Šé¢æŒ‡ä»¤å¾Œï¼Œæœƒåœ¨ <code>.husky</code> è³‡æ–™å¤¾ä¸‹é¢ç”¢ç”Ÿä¸€å€‹ <code>pre-commit</code> æª”æ¡ˆï¼Œå¦‚æœæœ‰æƒ³åˆ°å…¶ä»–è…³æœ¬æƒ³åŠ å…¥ï¼Œæ¯”å¦‚èªªå–®å…ƒæ¸¬è©¦è…³æœ¬ï¼Œéƒ½å¯ä»¥ç›´æ¥åœ¨ä¸‹ä¸€è¡Œå¢åŠ ã€‚</p>\n<pre class=\"hljs\"><code><span class=\"hljs-meta\">#!/bin/sh</span>\n. <span class=\"hljs-string\">&quot;<span class=\"hljs-subst\">$(dirname <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span>\n\nnpx lint-staged\n</code></pre>\n<div class=\"info\">\n<p>ğŸ’¡ è£œå……<br />\nå¦‚æœå°å…¶ä»–çš„ git hooks æœ‰èˆˆè¶£çš„è©±ï¼Œå¯ä»¥åƒè€ƒ <a  href=\"https://git-scm.com/docs/githooks#_hooks\" target=\"_blank\" rel=\"noreferrer noopener\">git å®˜ç¶²æ–‡ä»¶</a>ã€‚</p>\n</div>\n<h2 id=\"lint-staged è¨­å®š\" title=\"lint-staged è¨­å®š\"><a href=\"#lint-staged è¨­å®š\">lint-staged è¨­å®š</a></h2>\n<p>é€™é‚Šè¨­å®šæ˜¯æ ¹æ“šæª”æ¡ˆé¡å‹ï¼Œåˆ†åˆ¥éœ€è¦ç¶“é linter æª¢æŸ¥å’Œ prettier formatï¼Œå¯ä¾ç…§è‡ªå·±çš„éœ€æ±‚èª¿æ•´ã€‚</p>\n<p>æä¾›å…©ç¨®è¨­ç½®æ–¹æ³•ï¼Œæ“‡ä¸€å³å¯ã€‚</p>\n<h3>1. <code>package.json</code></h3>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// package.json</span>\n\n <span class=\"hljs-attr\">&quot;lint-staged&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;*.{ts,js,vue}&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n      <span class=\"hljs-string\">&quot;eslint --fix&quot;</span>\n    <span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;*.{html,scss,css,vue}&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n      <span class=\"hljs-string\">&quot;prettier --write&quot;</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-string\">&quot;stylelint --fix&quot;</span>\n    <span class=\"hljs-punctuation\">]</span>\n <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n</code></pre>\n<h3>2. <code>.lintstagedrc.json</code></h3>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// .lintstagedrc.json</span>\n\n<span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;*.{ts,js,vue}&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n      <span class=\"hljs-string\">&quot;eslint --fix&quot;</span>\n    <span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;*.{html,scss,css,vue}&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n      <span class=\"hljs-string\">&quot;prettier --write&quot;</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-string\">&quot;stylelint --fix&quot;</span>\n    <span class=\"hljs-punctuation\">]</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<h2 id=\"Usage\" title=\"Usage\"><a href=\"#Usage\">Usage</a></h2>\n<p>æ¯æ¬¡ <code>git commit</code> å°±æœƒè‡ªå‹•è§¸ç™¼ï¼Œç¨‹å¼ç¢¼éƒ½è¦ç¬¦åˆ <code>eslint</code>ã€<code>stylelint</code> çš„è¨­å®šæª”è¦å‰‡ï¼Œç¢ºä¿ç¨‹å¼ç¢¼éƒ½æ˜¯è·Ÿåœ˜éšŠè¦ç¯„ä¿æŒä¸€è‡´çš„ã€‚</p>\n<p>&lt;br/&gt;</p>\n<p>æˆ‘å€‘å¯ä»¥å…ˆæ‰“ä¸€æ®µå¯æ€•çš„ç¨‹å¼ç¢¼è©¦è©¦ï¼Œå¯ä»¥çœ‹åˆ° <code>eslint</code> å“€åšä¸å·²ã€‚</p>\n<p><img src=\"https://i.imgur.com/vQgu8v3.png\" alt=\"\" /></p>\n<p>&lt;br/&gt;</p>\n<p>æ¥è‘—æŠŠé€™ä»½æª”æ¡ˆç›´æ¥ <code>git commit</code> å¾Œï¼Œæ’ç‰ˆè‡ªå‹•è®Šæ•´é½Šï¼Œerror ä¹Ÿè¢«è‡ªå‹•ä¿®å¾©äº† ğŸ‰ã€‚</p>\n<p><img src=\"https://i.imgur.com/LwLf8br.png\" alt=\"\" /></p>\n<p>&lt;br/&gt;</p>\n<p>ä½†ä¹Ÿæ˜¯æœ‰ä¸èƒ½è¢«è‡ªå‹•ä¿®å¾©çš„æƒ…å¢ƒï¼Œä¾‹å¦‚ä¸‹åœ–ä¸­ <code>bar</code> å€¼å®£å‘Šäº†ï¼Œå»æ²’æœ‰ä½¿ç”¨ï¼Œé€™æ™‚æœƒé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ï¼Œæ­¤æ¬¡ <code>git commit</code> å°±æœƒå¤±æ•—ï¼Œä¸æœƒé€²å…¥ <code>git log</code> ä¸­ï¼Œéœ€è¦æ‰‹å‹•ä¿®æ­£ errorã€‚</p>\n<p>ä¸»è¦ä¹Ÿæ˜¯è¦é˜»æ“‹é€™é¡çš„ç¨‹å¼ç¢¼é€²å…¥ <code>git log</code> ä¸­ï¼Œå› ç‚ºç¾åœ¨å¹¾ä¹éƒ½æœƒè¨­å®š <code>vscode</code> åœ¨å­˜æª”æ™‚ï¼Œè‡ªå‹•ä¿®æ­£å’Œ formatï¼Œå¤§éƒ¨åˆ†çš„éŒ¯èª¤åœ¨é–‹ç™¼ä¸­å°±æœƒè¢«è§£æ±ºäº†ï¼Œä½†é€™é¡çš„æª”æ¡ˆï¼Œåªè¦æª”æ¡ˆæ²’è¢«é–‹å•Ÿï¼Œvscode linter æ’ä»¶å°±ç„¡æ³•åŠæ™‚æä¾›è­¦å‘Šã€‚</p>\n<p><img src=\"https://i.imgur.com/qml0GDx.png\" alt=\"\" /></p>\n<h2 id=\"ç¸½çµ\" title=\"ç¸½çµ\"><a href=\"#ç¸½çµ\">ç¸½çµ</a></h2>\n<p><code>husky</code> + <code>lint-staged</code> çš„æ­é…ï¼Œç›¸ç•¶å¤šäº†ä½ <code>Code Reviewer</code> æŠŠé—œç¨‹å¼ç¢¼ï¼Œä¹Ÿå¯ä»¥æ¸›è¼•åœ˜éšŠ code review çš„å£“åŠ›ï¼Œç¢ºä¿ä¸æœƒæœ‰ error æœƒè¢«æ¨åˆ° repositoryï¼Œä¸”ç¨‹å¼ç¢¼ä¹Ÿæ˜¯ç¬¦åˆåœ˜éšŠè¦ç¯„ã€‚</p>\n<p>å¦‚æœä¸€é–‹å§‹å°±èƒ½ä¿®æ­£ï¼Œå¾ŒæœŸç¶­è­·æœƒè¼•é¬†äº›ï¼Œä¸ç„¶éš¨è‘—å°ˆæ¡ˆè®Šå¤§ï¼ŒéŒ¯èª¤å’Œè­¦å‘Šæ•¸é‡ä¸€å¤šï¼Œä¹Ÿæ˜¯å¾ˆé ­ç–¼çš„ã€‚</p>\n<hr />\n<h2 id=\"åƒè€ƒè³‡æ–™\" title=\"åƒè€ƒè³‡æ–™\"><a href=\"#åƒè€ƒè³‡æ–™\">åƒè€ƒè³‡æ–™</a></h2>\n<ol>\n<li><a  href=\"https://github.com/typicode/husky\" target=\"_blank\" rel=\"noreferrer noopener\">husky GitHub</a></li>\n<li><a  href=\"https://github.com/okonet/lint-staged\" target=\"_blank\" rel=\"noreferrer noopener\">lint-staged GitHub</a></li>\n<li><a  href=\"https://medium.com/@danielhu95/set-up-eslint-pipeline-zh-tw-990d7d9eb68e\" target=\"_blank\" rel=\"noreferrer noopener\">ä½¿ç”¨ ESLint, Prettier, Husky, Lint-staged ä»¥åŠ Commitizen æå‡å°ˆæ¡ˆå“è³ªåŠä¸€è‡´æ€§</a></li>\n</ol>\n<h6>tags: <code>linter</code>ã€<code>NPM</code>ã€<code>package</code>ã€<code>lint-staged</code>ã€<code>husky</code>ã€<code>ESLint</code>ã€<code>stylelint</code></h6>\n","toc":{"title":"ç¨‹å¼ç¢¼å®ˆé–€å“¡ - Husky + Lint-Staged","subtitles":["ä»‹ç´¹","Installation","husky è¨­å®š","lint-staged è¨­å®š","Usage","ç¸½çµ","åƒè€ƒè³‡æ–™"]}}