{"info":{"title":"GitHub Actions - Creating My First Workflow (CI/CD)","fileName":"github-actions-quickstart","description":"èƒ½èººè‘—å°±ä¸è¦åè‘—ï¼Œèƒ½åè‘—å°±ä¸è¦ç«™è‘—ï¼Œèƒ½ä¸€å€‹æŒ‡ä»¤è§£æ±ºçš„ï¼Œå°±ä¸è¦ç”¨å…©å€‹ï¼åˆ©ç”¨ GitHub Actions æ‰“é€ å°ˆæ¡ˆçš„ CI/CDã€‚","createdAt":"2021-11-19T00:00:00.000Z","updatedAt":"2021-11-19T00:00:00.000Z","tags":["GitHub","GitHub Action","GitHub Page","CI/CD","DevOps"]},"content":"<h1 id=\"GitHub Actions - Creating My First Workflow (CI/CD)\" title=\"GitHub Actions - Creating My First Workflow (CI/CD)\">GitHub Actions - Creating My First Workflow (CI/CD)</h1>\n<p><code>CI/CD</code> å¹¾ä¹æ˜¯å…¬å¸æ¯å€‹å°ˆæ¡ˆçš„æ¨™é…äº†ï¼Œä½†å› ç‚ºéƒ½æ˜¯åˆæœŸå°±è¦è¨­å®šå®Œæˆï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šæ¥æ‰‹çš„å°ˆæ¡ˆéƒ½å·²ç¶“æœ‰è¨­å®šæª”ï¼Œæ²’ä»€éº¼æ©Ÿæœƒè‡ªå·±å¯«ï¼Œè—‰ç”±é€™æ¬¡æ¶éƒ¨è½æ ¼çš„æ©Ÿæœƒï¼Œç·´ç¿’ä½¿ç”¨ <code>GitHub Action</code>ï¼Œç‚ºè‡ªå·±çš„å°ˆæ¡ˆè¨­å®šè‡ªå‹•åŒ–æµç¨‹ã€‚</p>\n<p>æ¢åˆ—å‡ºé€™æ¬¡æƒ³é€é <code>GitHub Action</code> è§£æ±ºçš„éœ€æ±‚ï¼Œæ–‡ç« ä¸­æœƒç´€éŒ„å¦‚ä½•å¯«å‡ºå°æ‡‰çš„ Workflow è¨­å®šæª”ã€‚</p>\n<p><strong>æµç¨‹ä¸»è¦éœ€æ±‚ï¼š</strong></p>\n<ol>\n<li><code>git push</code> åˆ°ä¸»åˆ†æ”¯æ™‚è‡ªå‹•æ¸¬è©¦</li>\n<li>æ¸¬è©¦æˆåŠŸæ™‚ï¼Œç”¢ç”Ÿéœæ…‹æª”æ¡ˆ</li>\n<li>ä½¿ç”¨éœæ…‹æª”æ¡ˆè‡ªå‹•éƒ¨ç½² <code>GitHub Page</code></li>\n</ol>\n<p><img src=\"https://i.imgur.com/ueoi8QH.png\" alt=\"Github Actions flow\" /></p>\n<h2 id=\"What is CI/CD ?\" title=\"What is CI/CD ?\"><a href=\"#What is CI/CD ?\">What is CI/CD ?</a></h2>\n<p><code>CI/CD</code> åˆ†åˆ¥ä»£è¡¨æŒçºŒæ•´åˆ (<code>Continuous Integration</code>) å’ŒæŒçºŒéƒ¨ç½² (<code>Continuous Deployment</code>)ï¼Œç°¡å–®ä¾†èªªå°±æ˜¯å°‡ç¨‹å¼çš„æµç¨‹è‡ªå‹•åŒ–ï¼Œå¯ä»¥é™ä½äººå“¡æ“ä½œç–å¤±çš„é¢¨éšªå’Œæ¸›å°‘æ‰‹å‹•æ“ä½œçš„é‡è¤‡æ­¥é©Ÿï¼Œå¸¸è¦‹æœ‰ <a  href=\"https://travis-ci.org/\" target=\"_blank\" rel=\"noreferrer noopener\"><code>Travis CI</code></a>ã€<a  href=\"https://www.jenkins.io/\" target=\"_blank\" rel=\"noreferrer noopener\"><code>Jenkins</code></a>ã€<a  href=\"https://aws.amazon.com/codepipeline/\" target=\"_blank\" rel=\"noreferrer noopener\"><code>AWS CodePipeline</code></a> ç­‰ã€‚</p>\n<h3>- æŒçºŒæ•´åˆ (<code>Continuous Integration</code>)</h3>\n<p>ç•¶ç¨‹å¼è¢«åˆä½µåˆ°åˆ†æ”¯æ™‚ï¼Œæœƒé–‹å§‹è‡ªå‹•åŒ– <code>build</code>ã€è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œç¢ºä¿æ­¤æ¬¡æäº¤çš„ç¨‹å¼ç•°å‹•éƒ½æœ‰é€šéæ¸¬è©¦ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šç’°å¢ƒç‰ˆæœ¬ï¼Œé¿å…ä¸åŒé›»è…¦çš„é–‹ç™¼ç’°å¢ƒä¸åŒï¼Œè€Œé€ æˆåŠŸèƒ½ç•°å¸¸ã€‚</p>\n<h3>- æŒçºŒéƒ¨ç½² (<code>Continuous Deployment</code>)</h3>\n<p>åœ¨ CI æµç¨‹éå¾Œï¼Œåªè¦ä¸å¤±æ•—ï¼Œç¨‹å¼ç¢¼å±¬æ–¼å¯è¢«éƒ¨ç½²çš„ç‹€æ…‹ï¼Œæ¥è‘—å°±æœƒè‡ªå‹•åŒ–åŸ·è¡Œéƒ¨ç½²çš„å‹•ä½œã€‚</p>\n<h2 id=\"What is Github Actions ?\" title=\"What is Github Actions ?\"><a href=\"#What is Github Actions ?\">What is Github Actions ?</a></h2>\n<p>é€éåœ¨ <code>repository</code> å…§é…ç½®æª”æ¡ˆï¼Œèƒ½å¤ å½ˆæ€§å®¢è£½å„ç¨®è‡ªå‹•åŒ–çš„å·¥ä½œæµç¨‹ï¼Œç•¶ç„¶ä¹ŸåŒ…æ‹¬ <code>CI/CD</code>ï¼Œè€Œä¸”åœ¨ <code>GitHub</code> å…§å°±å¯ä»¥çœ‹åˆ°å³æ™‚çš„è‡ªå‹•åŒ–çµæœå’Œå ±å‘Šï¼Œä¸éœ€è¦é€éç¬¬ä¸‰æ–¹å·¥å…·ã€‚</p>\n<h2 id=\"å¦‚ä½•æ·»åŠ è¨­å®šæª”ï¼Ÿ\" title=\"å¦‚ä½•æ·»åŠ è¨­å®šæª”ï¼Ÿ\"><a href=\"#å¦‚ä½•æ·»åŠ è¨­å®šæª”ï¼Ÿ\">å¦‚ä½•æ·»åŠ è¨­å®šæª”ï¼Ÿ</a></h2>\n<p><code>Github Actions</code> è¨­å®šæ–‡ä»¶æœƒæ”¾åœ¨æ ¹ç›®éŒ„çš„ <code>.github/workflows</code> ä¸‹ï¼Œæª”åå¯è‡ªå–ï¼Œå…§å®¹éœ€è¦ä»¥ YAML èªæ³•ä¾†æ’°å¯«ï¼Œå¯ä»¥æœ‰ä¸€å€‹ä»¥ä¸Šçš„ <code>workflow</code> è¨­å®šæª”ã€‚</p>\n<pre class=\"hljs\"><code>â”€â”€ .github\n    â””â”€â”€ workflows\n        â”œâ”€â”€ cicd.yml\n        â””â”€â”€ slack-notification.yml\n</code></pre>\n<h2 id=\"åŸºæœ¬æ¦‚å¿µ\" title=\"åŸºæœ¬æ¦‚å¿µ\"><a href=\"#åŸºæœ¬æ¦‚å¿µ\">åŸºæœ¬æ¦‚å¿µ</a></h2>\n<p>è¨­å®šæª”ä½¿ç”¨åˆ°çš„ <code>Workflow</code>ã€<code>Job</code>ã€<code>Step</code>ã€<code>Action</code>ï¼Œæ˜¯å­˜åœ¨å¾å±¬é—œä¿‚çš„ï¼Œéœ€è¦å…ˆç¨å¾®ç†è§£é€™å¡Šã€‚</p>\n<p><img src=\"https://i.imgur.com/dqGfdz7.png\" alt=\"Github Actions Elements\" /></p>\n<h3>- Workflow (å·¥ä½œæµç¨‹)</h3>\n<p>æŒ‡ä¸€å€‹å®Œæ•´çš„è‡ªå‹•åŒ–éç¨‹ï¼Œæœƒæ¶µè“‹ä¸€å€‹ä»¥ä¸Šçš„ <code>Job</code></p>\n<ul>\n<li><strong><code>name</code></strong> (optional)ï¼š åœ¨ <code>Actions</code> çš„ <code>Workflows</code> ä¸‹ï¼Œæœƒé¡¯ç¤ºè¨­å®šçš„ <code>Workflow name</code>ï¼Œé è¨­ç‚ºæª”å</li>\n<li><strong><code>on</code></strong> ï¼šæŒ‡å®šç‰¹å®šçš„ <code>event</code> ä¾†è§¸ç™¼ <code>Workflow</code></li>\n</ul>\n<p><img src=\"https://i.imgur.com/xvEJKHI.png\" alt=\"Workflow-name\" /></p>\n<pre class=\"hljs\"><code><span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Deploy</span>\n\n<span class=\"hljs-attr\">on:</span>\n  <span class=\"hljs-comment\"># åœ¨å° main branch ç™¼ PR æˆ– git push æ™‚ï¼Œæœƒè§¸ç™¼ workflow</span>\n  <span class=\"hljs-attr\">push:</span>\n    <span class=\"hljs-attr\">branches:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">main</span>\n  <span class=\"hljs-attr\">pull_request:</span>\n    <span class=\"hljs-attr\">branches:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">main</span>\n\n  <span class=\"hljs-comment\"># æ¯å¤©åœ¨ 5:30 å’Œ 17:30 UTCï¼Œæœƒè§¸ç™¼ workflow</span>\n  <span class=\"hljs-attr\">schedule:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">cron:</span>  <span class=\"hljs-string\">&#x27;30 5,17 * * *&#x27;</span>\n\n  <span class=\"hljs-comment\"># git push è‡³å•Ÿç”¨çš„ GitHub Pages çš„åˆ†æ”¯ï¼ˆpage_build äº‹ä»¶)ï¼Œæœƒè§¸ç™¼ workflow</span>\n  <span class=\"hljs-attr\">page_build:</span>\n\n</code></pre>\n<div class=\"info\">\n<p>ğŸ”— <strong>è£œå……</strong></p>\n<p>æ›´å¤š <code>events</code> å¯ä»¥åƒè€ƒ <a  href=\"https://docs.github.com/en/actions/learn-github-actions/events-that-trigger-workflows\" target=\"_blank\" rel=\"noreferrer noopener\">Events that trigger workflows</a></p>\n</div>\n<div class=\"warning\">\n<p>â— <strong>æ³¨æ„</strong></p>\n<p><code>Workflow</code> è¨­å®šæª”æ¡ˆ (<code>.yml</code>) éœ€è¦å­˜åœ¨æ–¼ <code>default branch</code>ï¼Œæ‰æœƒè§¸ç™¼æ•´å€‹è‡ªå‹•åŒ–æµç¨‹ã€‚</p>\n</div>\n<h3>- Jobï¼ˆå·¥ä½œé …ç›® / ä»»å‹™ï¼‰</h3>\n<p><code>Workflow</code> å¯ä»¥åŒ…æ‹¬ä¸€å€‹æˆ–å¤šå€‹ <code>Job</code>ï¼Œ<code>Job</code> é è¨­æ˜¯<strong>åŒæ™‚</strong>åŸ·è¡Œã€‚</p>\n<ul>\n<li><a  href=\"https://docs.github.com/en/actions/learn-github-actions/workflow-syntax-for-github-actions#jobsjob_idruns-on\" target=\"_blank\" rel=\"noreferrer noopener\"><strong><code>runs-on</code></strong></a>ï¼šæŒ‡å®šé‹è¡Œçš„è™›æ“¬æ©Ÿç’°å¢ƒ (<code>Runners</code>)</li>\n<li><a  href=\"https://docs.github.com/en/actions/learn-github-actions/workflow-syntax-for-github-actions#jobsjob_idneeds\" target=\"_blank\" rel=\"noreferrer noopener\"><strong><code>needs</code></strong></a> : ç”¨æ–¼è¨­å®šæœ‰ä¾è³´é …çš„ <code>Job</code>ï¼Œå¦‚æœæŸå€‹ <code>Job</code> ä½œæ¥­å¤±æ•—ï¼Œå‰‡æ‰€æœ‰éœ€è¦å®ƒçš„ <code>Job</code> éƒ½æœƒè¢«è·³éï¼Œé™¤éè¨­ç½®<a  href=\"https://docs.github.com/cn/actions/learn-github-actions/expressions#job-status-check-functions\" target=\"_blank\" rel=\"noreferrer noopener\">æ¢ä»¶è¡¨é”å¼</a>ã€‚</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\"># è¦æ±‚æŒ‰ç…§é †åºä¸”ç›¸é—œ Job è¦åŸ·è¡ŒæˆåŠŸ</span>\n<span class=\"hljs-comment\"># åŸ·è¡Œé †åºï¼š job1 =&gt; job2 =&gt; job3</span>\n<span class=\"hljs-attr\">jobs:</span>\n  <span class=\"hljs-attr\">job1:</span>\n  <span class=\"hljs-attr\">job2:</span>\n    <span class=\"hljs-attr\">needs:</span> <span class=\"hljs-string\">job1</span>\n  <span class=\"hljs-attr\">job3:</span>\n    <span class=\"hljs-attr\">needs:</span> [<span class=\"hljs-string\">job1</span>, <span class=\"hljs-string\">job2</span>]\n</code></pre>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\"># åªè¦æ±‚æŒ‰ç…§é †åº</span>\n<span class=\"hljs-comment\"># job3 ä½¿ç”¨ always() æ¢ä»¶è¡¨é”å¼ï¼Œå› æ­¤ä»–å§‹çµ‚åœ¨ job1 å’Œ job2 å®Œæˆå¾ŒåŸ·è¡Œï¼Œä½†ä¸ç®¡å®ƒå€‘æ˜¯å¦æˆåŠŸã€‚</span>\n<span class=\"hljs-attr\">jobs:</span>\n  <span class=\"hljs-attr\">job1:</span>\n  <span class=\"hljs-attr\">job2:</span>\n    <span class=\"hljs-attr\">needs:</span> <span class=\"hljs-string\">job1</span>\n  <span class=\"hljs-attr\">job3:</span>\n    <span class=\"hljs-attr\">if:</span> <span class=\"hljs-string\">${{</span> <span class=\"hljs-string\">always()</span> <span class=\"hljs-string\">}}</span>\n    <span class=\"hljs-attr\">needs:</span> [<span class=\"hljs-string\">job1</span>, <span class=\"hljs-string\">job2</span>]\n</code></pre>\n<h3>- Stepï¼ˆæ­¥é©Ÿï¼‰</h3>\n<p><code>Job</code> å¯ä»¥åŒ…æ‹¬ä¸€å€‹ä»¥ä¸Šçš„ <code>Step</code>ï¼Œæ­¥é©Ÿæœƒ<strong>ä¾åºåŸ·è¡Œ</strong>ï¼Œåªè¦å…¶ä¸­ä¸€å€‹æ­¥é©Ÿå¤±æ•—ï¼Œå¾Œé¢æ­¥é©Ÿçš†ä¸æœƒè¢«åŸ·è¡Œã€‚</p>\n<ul>\n<li><a  href=\"\" target=\"_blank\" rel=\"noreferrer noopener\"><strong><code>run</code></strong></a>ï¼šç”¨æ–¼åœ¨è™›æ“¬æ©Ÿä½¿ç”¨ <code>shell comman</code></li>\n<li><a  href=\"\" target=\"_blank\" rel=\"noreferrer noopener\"><strong><code>uses</code></strong></a>ï¼šç”¨æ–¼ä½¿ç”¨åˆ¥äººå¯«å¥½çš„ <code>Action</code> æª”æ¡ˆ</li>\n</ul>\n<p><code>Step</code> å› ç‚ºè™•æ–¼åŒä¸€å€‹è™›æ“¬æ©Ÿç’°å¢ƒï¼Œæ‰€ä»¥åœ¨åŒä¸€å€‹ <code>Job</code> ä¸‹çš„æ­¥é©Ÿï¼Œå½¼æ­¤å¯ä»¥å…±äº« dataã€‚</p>\n<pre class=\"hljs\"><code><span class=\"hljs-attr\">jobs:</span>\n  <span class=\"hljs-comment\"># job name</span>\n  <span class=\"hljs-attr\">github-action-example:</span>\n\n    <span class=\"hljs-comment\"># job é‹è¡Œçš„è™›æ“¬æ©Ÿ</span>\n    <span class=\"hljs-attr\">runs-on:</span> <span class=\"hljs-string\">ubuntu-latest</span>\n\n    <span class=\"hljs-attr\">steps:</span>\n      <span class=\"hljs-comment\"># ä½¿ç”¨åˆ¥äººå¯«å¥½çš„ action - actions/checkout@v2</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/checkout@v2</span>\n\n      <span class=\"hljs-comment\"># è¨­å®š node ç’°å¢ƒä¸¦æŒ‡å®šç‰ˆæœ¬</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/setup-node@v2</span>\n        <span class=\"hljs-attr\">with:</span>\n          <span class=\"hljs-attr\">node-version:</span> <span class=\"hljs-string\">&#x27;14&#x27;</span>\n\n      <span class=\"hljs-comment\"># åŸ·è¡ŒæŒ‡ä»¤</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">npm</span> <span class=\"hljs-string\">install</span>\n</code></pre>\n<h3>- Action (å‹•ä½œ)</h3>\n<p><code>Step</code> å¯ä»¥ä¾åºåŸ·è¡Œä¸€å€‹ä»¥ä¸Šçš„ <code>Action</code>ã€‚</p>\n<pre class=\"hljs\"><code><span class=\"hljs-attr\">jobs:</span>\n  <span class=\"hljs-attr\">workflow-command-job:</span>\n    <span class=\"hljs-attr\">runs-on:</span> <span class=\"hljs-string\">ubuntu-latest</span>\n    <span class=\"hljs-attr\">steps:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">disable</span> <span class=\"hljs-string\">workflow</span> <span class=\"hljs-string\">commands</span>\n        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">|\n          echo &#x27;::warning:: this is a warning&#x27;\n          echo &quot;::stop-commands::`echo -n ${{ github.token }} | sha256sum | head -c 64`&quot;\n          echo &#x27;::warning:: this will NOT be a warning&#x27;\n          echo &quot;::`echo -n ${{ github.token }} | sha256sum | head -c 64`::&quot;\n          echo &#x27;::warning:: this is a warning again&#x27;\n</span></code></pre>\n<div class=\"info\">\n<p>ğŸ’¡ <strong>è£œå……</strong></p>\n<p>GitHub æœ‰æä¾› <a  href=\"https://github.com/marketplace\" target=\"_blank\" rel=\"noreferrer noopener\">marketplace</a>ï¼Œè£¡é¢å­˜æ”¾äº†è¨±å¤šåˆ¥äººå¯«å¥½çš„ <code>Action</code>ï¼Œç›¸ç•¶æ–¼ <code>Action</code> ç‰ˆçš„ <code>GitHub</code>ï¼ŒæŠŠä¸€äº›å¸¸ç”¨çš„æ­¥é©ŸæŒ‡ä»¤éƒ½æ‰“åŒ…å¥½äº†ï¼Œå¯ä»¥ç›´æ¥ <code>uses</code> åšä½¿ç”¨ã€‚</p>\n</div>\n<h2 id=\"å¯¦ä½œ\" title=\"å¯¦ä½œ\"><a href=\"#å¯¦ä½œ\">å¯¦ä½œ</a></h2>\n<p>å†å›æ†¶ä¸€ä¸‹é€™æ¬¡è‡ªå‹•åŒ–æƒ³åŒ…å«çš„éœ€æ±‚ï¼š</p>\n<ol>\n<li><code>git push</code> åˆ°ä¸»åˆ†æ”¯æ™‚è‡ªå‹•æ¸¬è©¦</li>\n<li>æ¸¬è©¦æˆåŠŸæ™‚ï¼Œç”¢ç”Ÿéœæ…‹æª”æ¡ˆ</li>\n<li>ä½¿ç”¨éœæ…‹æª”æ¡ˆè‡ªå‹•éƒ¨ç½² <code>GitHub Page</code></li>\n</ol>\n<p>&lt;br/&gt;</p>\n<p>è½‰æˆ <code>Workflow</code> è¨­å®šæª”çš„å®Œæ•´åŸå§‹ç¢¼ï¼š</p>\n<pre class=\"hljs\"><code><span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Deploy</span>\n\n<span class=\"hljs-attr\">on:</span>\n  <span class=\"hljs-attr\">push:</span>\n    <span class=\"hljs-attr\">branches:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">master</span>\n    <span class=\"hljs-attr\">paths-ignore:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&#x27;README.md&#x27;</span>\n\n<span class=\"hljs-attr\">jobs:</span>\n  <span class=\"hljs-attr\">deploy-github-page:</span>\n    <span class=\"hljs-comment\"># The type of runner that the job will run on</span>\n    <span class=\"hljs-attr\">runs-on:</span> <span class=\"hljs-string\">ubuntu-latest</span>\n\n    <span class=\"hljs-comment\"># Steps represent a sequence of tasks that will be executed as part of the job</span>\n    <span class=\"hljs-attr\">steps:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Checkout</span>\n        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/checkout@v2</span>\n\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Setup</span> <span class=\"hljs-string\">node</span> <span class=\"hljs-string\">env</span>\n        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/setup-node@v2</span>\n\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Install</span> <span class=\"hljs-string\">dependencies</span> <span class=\"hljs-string\">with</span> <span class=\"hljs-string\">Yarn</span>\n        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">yarn</span> <span class=\"hljs-string\">--frozen-lockfile</span>\n\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Run</span> <span class=\"hljs-string\">test</span> <span class=\"hljs-string\">with</span> <span class=\"hljs-string\">Jest</span>\n        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">yarn</span> <span class=\"hljs-string\">test</span>\n\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Generate</span> <span class=\"hljs-string\">Static</span> <span class=\"hljs-string\">Site</span>\n        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">yarn</span> <span class=\"hljs-string\">generate</span>\n\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Deploy</span>\n        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">JamesIves/github-pages-deploy-action@4.1.5</span>\n        <span class=\"hljs-attr\">with:</span>\n          <span class=\"hljs-attr\">branch:</span> <span class=\"hljs-string\">gh-pages</span> <span class=\"hljs-comment\"># The branch the action should deploy to.</span>\n          <span class=\"hljs-attr\">folder:</span> <span class=\"hljs-string\">dist</span> <span class=\"hljs-comment\"># The folder the action should deploy.</span>\n</code></pre>\n<h3>Step 1. Workflow</h3>\n<ol>\n<li><code>git push origin master</code> æœƒè§¸ç™¼ <code>Workflow</code></li>\n<li>ä½¿ç”¨ <code>paths-ignore</code> éæ¿¾ç‰¹å®šè·¯å¾‘ï¼Œå³å¦‚æœå–®ç¨æ›´æ”¹ <code>README.md</code>ï¼Œå³ä½¿æ¨åˆ° <code>master</code> åˆ†æ”¯ï¼Œä¹Ÿä¸æœƒè§¸ç™¼è‡ªå‹•åŒ–</li>\n</ol>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\"># Workflow åå­—</span>\n<span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Deploy</span>\n\n<span class=\"hljs-attr\">on:</span>\n  <span class=\"hljs-attr\">push:</span>\n    <span class=\"hljs-attr\">branches:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">master</span>\n    <span class=\"hljs-attr\">paths-ignore:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&#x27;README.md&#x27;</span>\n</code></pre>\n<h3>Step 2. Job</h3>\n<ol>\n<li>æŒ‡å®šè™›æ“¬æ©Ÿç’°å¢ƒ <code>ubuntu-latest</code></li>\n</ol>\n<pre class=\"hljs\"><code><span class=\"hljs-attr\">jobs:</span>\n  <span class=\"hljs-comment\"># Job åå­—</span>\n  <span class=\"hljs-attr\">deploy-github-page:</span>\n    <span class=\"hljs-attr\">runs-on:</span> <span class=\"hljs-string\">ubuntu-latest</span>\n</code></pre>\n<h3>Step 3. Step &amp; Action</h3>\n<ol>\n<li>\n<p><code>Checkout</code>:<br />\nä½¿ç”¨ <a  href=\"https://github.com/marketplace/actions/checkout\" target=\"_blank\" rel=\"noreferrer noopener\"><code>actions/checkout@v2</code></a>ï¼Œå®ƒæœƒä¸‹è¼‰ä¸€ä»½å°ˆæ¡ˆç¨‹å¼ç¢¼è‡³é‹è¡Œçš„è™›æ“¬æ©Ÿä¸Šã€‚</p>\n<p>å¦‚æœå·¥ä½œæµç¨‹æœ‰æ¶‰åŠä½¿ç”¨åˆ°å°ˆæ¡ˆåŸå§‹ç¢¼ï¼Œæˆ–åŸ·è¡Œå®šç¾©åœ¨å°ˆæ¡ˆä¸Šçš„ scriptï¼Œéƒ½æ˜¯éœ€è¦ä½¿ç”¨ <code>checkout action</code>ã€‚</p>\n</li>\n<li>\n<p><code>Setup node env</code> + <code>Install dependencies with Yarn</code>ï¼š<br />\nä½¿ç”¨ <a  href=\"https://github.com/marketplace/actions/setup-node-js-environment\" target=\"_blank\" rel=\"noreferrer noopener\">setup-node@v2</a> è¨­ç½® node ç’°å¢ƒï¼Œä¸¦ä¾æ“š <code>yarn.lock</code> å®‰è£å°ˆæ¡ˆä¾è³´å¥—ä»¶ <a  href=\"https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-nodejs-or-python\" target=\"_blank\" rel=\"noreferrer noopener\">(npm å¯åƒè€ƒé€™è£¡)</a></p>\n</li>\n<li>\n<p><code>Run test with Jest</code>ï¼š<br />\nä½¿ç”¨å®šç¾©åœ¨å°ˆæ¡ˆå…§çš„ test script</p>\n</li>\n<li>\n<p><code>Generate Static Site</code> + <code>Deploy</code>ï¼š<br />\nç”¢ç”Ÿéœæ…‹æª”æ¡ˆä¸¦éƒ¨ç½²è‡³ Github Pageï¼ŒCD ç›´æ¥ä½¿ç”¨ <a  href=\"https://github.com/marketplace/actions/deploy-to-github-pages\" target=\"_blank\" rel=\"noreferrer noopener\">JamesIves/github-pages-deploy-action@4.1.5</a></p>\n</li>\n</ol>\n<pre class=\"hljs\"><code><span class=\"hljs-attr\">steps:</span>\n     <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Checkout</span>\n       <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/checkout@v2</span>\n\n     <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Setup</span> <span class=\"hljs-string\">node</span> <span class=\"hljs-string\">env</span>\n       <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/setup-node@v2</span>\n\n     <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Install</span> <span class=\"hljs-string\">dependencies</span> <span class=\"hljs-string\">with</span> <span class=\"hljs-string\">Yarn</span>\n       <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">yarn</span> <span class=\"hljs-string\">--frozen-lockfile</span>\n\n     <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Run</span> <span class=\"hljs-string\">test</span> <span class=\"hljs-string\">with</span> <span class=\"hljs-string\">Jest</span>\n       <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">yarn</span> <span class=\"hljs-string\">test</span>\n\n     <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Generate</span> <span class=\"hljs-string\">Static</span> <span class=\"hljs-string\">Site</span>\n       <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">yarn</span> <span class=\"hljs-string\">generate</span>\n\n     <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Deploy</span>\n       <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">JamesIves/github-pages-deploy-action@4.1.5</span>\n       <span class=\"hljs-attr\">with:</span>\n         <span class=\"hljs-attr\">branch:</span> <span class=\"hljs-string\">gh-pages</span> <span class=\"hljs-comment\"># æŒ‡å®šè¦ deploy çš„åˆ†æ”¯</span>\n         <span class=\"hljs-attr\">folder:</span> <span class=\"hljs-string\">dist</span> <span class=\"hljs-comment\"># æŒ‡å®šè¦ deploy çš„è³‡æ–™å¤¾</span>\n</code></pre>\n<h3>å¯¦éš›æ¸¬è©¦</h3>\n<h4>âœ”ï¸ Case: å–®å…ƒæ¸¬è©¦æˆåŠŸ</h4>\n<p>åœ¨ Actions é é¢å¯ä»¥çœ‹åˆ°æ•´å€‹ Workflowï¼Œä»¥åŠæ¯å€‹æ­¥é©Ÿçš„åŸ·è¡Œç‹€æ…‹ï¼Œå› ç‚ºå–®å…ƒæ¸¬è©¦æ˜¯æˆåŠŸçš„ï¼Œå¾ŒçºŒç¶²ç«™ä¹Ÿæœ‰é †åˆ©è¢«éƒ¨ç½²ã€‚</p>\n<p><img src=\"https://i.imgur.com/lKkrg3q.png\" alt=\"run test action\" /></p>\n<p>Repository çš„é¦–é ä¹Ÿå¯ä»¥çœ‹åˆ°æˆåŠŸçš„ç¶ è‰²å°å‹¾å‹¾ âœ”ï¸</p>\n<p><img src=\"https://i.imgur.com/MVFcVdV.png\" alt=\"run test home\" /></p>\n<p>&lt;br/&gt;</p>\n<h4>â Case: å–®å…ƒæ¸¬è©¦å¤±æ•—</h4>\n<p>æ¥è‘—è©¦è©¦å–®å…ƒæ¸¬è©¦å¤±æ•—çš„æƒ…å¢ƒï¼Œå¯ä»¥çœ‹åˆ° <code>Run test with Jest</code> é€™å€‹æ­¥é©Ÿå¤±æ•—å¾Œï¼Œå¾ŒçºŒçš„ <code>Generate Static Site</code> å’Œ <code>Deploy</code> ç›´æ¥ä¸åŸ·è¡Œã€‚</p>\n<p>é»é–‹ <code>Run test with Jest</code> è©³ç´°è¨Šæ¯ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°æ˜¯å“ªå€‹æ¸¬è©¦å‡ºéŒ¯å’Œæ•´å€‹æ¸¬è©¦å ±å‘Šã€‚</p>\n<p><img src=\"https://i.imgur.com/2jbtqOD.png\" alt=\"fail test\" /></p>\n<p>&lt;br/&gt;</p>\n<div class=\"info\">\n<p>ğŸ’¡ è£œå……</p>\n<p>æˆ‘åœ¨ <code>README.md</code> æœ‰æ·»åŠ  <strong><code>workflow status badge</code></strong>ï¼Œå¯ä»¥çœ‹åˆ° Workflow çš„ç‹€æ…‹ï¼Œä½†å®ƒä¸æ˜¯å³æ™‚æ›´æ–°ï¼Œè·‘å®Œ Workflow å¾Œï¼Œéœ€è¦å†ç­‰å€‹å¹¾åˆ†é˜ã€‚</p>\n<p>æ”¯æ´ <code>query parameters</code>ï¼Œå¯ä»¥é¡¯ç¤ºç‰¹å®š <code>branch</code> æˆ– <code>event</code> çš„ Workflow ç‹€æ…‹ï¼Œè©³ç´°è¨­å®šå¯åƒè¦‹<a  href=\"https://docs.github.com/en/actions/monitoring-and-troubleshooting-workflows/adding-a-workflow-status-badge\" target=\"_blank\" rel=\"noreferrer noopener\">å®˜ç¶²</a>ã€‚</p>\n<p><img src=\"https://i.imgur.com/No01pI0.png\" alt=\"workflow status badge\" /></p>\n<pre class=\"hljs\"><code>&lt;!-- åŸºæœ¬èªæ³• --&gt;\n\n![<span class=\"hljs-string\">example workflow</span>](<span class=\"hljs-link\">https://github.com/&lt;OWNER&gt;/&lt;REPOSITORY&gt;/actions/workflows/&lt;WORKFLOW_FILE&gt;/badge.svg</span>)\n\n&lt;!-- ç¯„ä¾‹ --&gt;\n\n![<span class=\"hljs-string\">Deploy</span>](<span class=\"hljs-link\">https://github.com/JennieSH/github-action-demo/actions/workflows/deploy.yml/badge.svg</span>)\n</code></pre>\n</div>\n<h2 id=\"ç¸½çµ\" title=\"ç¸½çµ\"><a href=\"#ç¸½çµ\">ç¸½çµ</a></h2>\n<p><a  href=\"https://docs.github.com/en/actions\" target=\"_blank\" rel=\"noreferrer noopener\">GitHub Actions å®˜æ–¹æ–‡ä»¶</a> é‚„æœ‰è¶…ç´šå¤šè¨­å®šå¯ä»¥ä½¿ç”¨ï¼Œå› ç‚ºé€™æ¬¡éœ€æ±‚ä¹Ÿæ²’å¾ˆè¤‡é›œï¼Œä½œç‚ºåˆæ¢ Actionï¼Œæ˜¯é‚„ä¸éŒ¯çš„ç¶“é©— ğŸ‰ï¼Œä¸‹æ¬¡æœ‰æ©Ÿæœƒï¼Œæœƒå†å˜—è©¦å»ºç«‹å…¶ä»–çš„ Workflowã€‚</p>\n<hr />\n<h2 id=\"åƒè€ƒè³‡æ–™\" title=\"åƒè€ƒè³‡æ–™\"><a href=\"#åƒè€ƒè³‡æ–™\">åƒè€ƒè³‡æ–™</a></h2>\n<ol>\n<li><a  href=\"https://docs.github.com/en/actions\" target=\"_blank\" rel=\"noreferrer noopener\">GitHub Actions Docs</a></li>\n<li><a  href=\"https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html\" target=\"_blank\" rel=\"noreferrer noopener\">GitHub Actions å…¥é—¨æ•™ç¨‹</a></li>\n<li><a  href=\"https://medium.com/starbugs/%E5%AF%A6%E4%BD%9C%E9%96%8B%E6%BA%90%E5%B0%8F%E5%B7%A5%E5%85%B7-%E8%88%87-github-actions-%E7%9A%84%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%9B%B8%E9%81%87-3dd2d70eeb\" target=\"_blank\" rel=\"noreferrer noopener\">å¯¦ä½œé–‹æºå°å·¥å…·ï¼Œèˆ‡ Github Actions çš„ç¬¬ä¸€æ¬¡ç›¸é‡ï¼</a></li>\n</ol>\n<h6>tags: <code>DevOps</code>ã€<code>CI/CD</code>ã€<code>GitHub</code>ã€<code>GitHub Action</code>ã€<code>GitHub Page</code></h6>\n","toc":{"title":"GitHub Actions - Creating My First Workflow (CI/CD)","subtitles":["What is CI/CD ?","What is Github Actions ?","å¦‚ä½•æ·»åŠ è¨­å®šæª”ï¼Ÿ","åŸºæœ¬æ¦‚å¿µ","å¯¦ä½œ","ç¸½çµ","åƒè€ƒè³‡æ–™"]}}