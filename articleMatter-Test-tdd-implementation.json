{"info":{"title":"æ‰‹æŠŠæ‰‹ä¸€èµ· TDD","fileName":"tdd-implementation","description":"Test-Driven Development åœ¨ JS å’Œ DOM å¯¦ä½œã€‚","createdAt":"2021-11-14T00:00:00.000Z","updatedAt":"2021-11-14T00:00:00.000Z","tags":["Test","TDD"]},"content":"<h1 id=\"æ‰‹æŠŠæ‰‹ä¸€èµ· TDD\" title=\"æ‰‹æŠŠæ‰‹ä¸€èµ· TDD\">æ‰‹æŠŠæ‰‹ä¸€èµ· TDD</h1>\n<p><img src=\"https://i.imgur.com/9HCEV2B.png\" alt=\"TDD cycle\" /></p>\n<p>æƒ³äº†è§£æ›´å¤š TDDï¼Œå¯ä»¥åƒè€ƒ <a  href=\"https://hackmd.io/2QXKK978Sei4LMHQWhN-gQ\" target=\"_blank\" rel=\"noreferrer noopener\">TDD - æ¸¬è©¦é©…å‹•é–‹ç™¼</a>ï¼Œæ­¤ç¯‡æ˜¯å¯¦ä½œç¯‡ï¼Œæ‰‹æŠŠæ‰‹å¸¶ä½ é«”é©— TDD ğŸ’¨ğŸ’¨</p>\n<h2 id=\"TDD Flow\" title=\"TDD Flow\"><a href=\"#TDD Flow\">TDD Flow</a></h2>\n<p>å†çœ‹ä¸€çœ¼ TDD æµç¨‹ï¼Œç¨å¾®æœ‰å€‹å°è±¡ï¼Œæˆ‘å€‘å°±ç¹¼çºŒå¾€ä¸‹çœ‹ ï½<br />\n<img src=\"https://i.imgur.com/obbaftB.png\" alt=\"TDD flow\" /></p>\n<h4>Step 1. åˆ—å‡ºéœ€æ±‚æ¸…å–®</h4>\n<h4>Step 2. æ–°å¢æ¸¬è©¦ï¼Œæ¸¬è©¦ Fail</h4>\n<h4>Step 3. æ’°å¯«å‰›å¥½èƒ½é€šéæ¸¬è©¦çš„ç¨‹å¼</h4>\n<h4>Step 4. é‡æ§‹ç¨‹å¼</h4>\n<h2 id=\"ç¯„ä¾‹ - Function\" title=\"ç¯„ä¾‹ - Function\"><a href=\"#ç¯„ä¾‹ - Function\">ç¯„ä¾‹ - Function</a></h2>\n<h3><code>ç›®æ¨™ï¼šFunction - validatePassword</code></h3>\n<p>è¦é–‹ç™¼ä¸€å€‹å¯†ç¢¼é©—è­‰çš„å‡½å¼ï¼Œæœƒå…ˆè«‹åˆ—ä¸€ä¸‹å¯†ç¢¼è¦è¢«æ»¿è¶³çš„æ¢ä»¶ã€‚</p>\n<p><strong>éœ€æ±‚æ¸…å–®</strong>ï¼š</p>\n<ol>\n<li>Test 1 - é•·åº¦è‡³å°‘ 8 ç¢¼</li>\n<li>Test 2 - è‡³å°‘å« 1 å€‹æ•¸å­—</li>\n<li>Test 3 - è‡³å°‘å« 1 å€‹è‹±æ–‡å­—æ¯(å¤§å¯«/å°å¯«)</li>\n</ol>\n<h3>Fixtureï¼šå…ˆæº–å‚™å¥½æ¸¬è©¦ç’°å¢ƒ</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.js</span>\n\n<span class=\"hljs-comment\">/**\n * å¯†ç¢¼é©—è­‰\n * <span class=\"hljs-doctag\">@param</span> string $paramter ,ex: &#x27;a12345678&#x27;\n * <span class=\"hljs-doctag\">@return</span> boolean å›å‚³çµæœ true æœ‰æ•ˆå¯†ç¢¼, false ç„¡æ•ˆå¯†ç¢¼\n * <span class=\"hljs-doctag\">@example</span> validatePassword(&#x27;a12345678&#x27;) =&gt; true\n */</span>\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">validatePassword</span> = (<span class=\"hljs-params\"></span>) =&gt; {};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> validatePassword;\n</code></pre>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.spec.js</span>\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&quot;validatePassword&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-comment\">// 1. è‡³å°‘ 8 ç¢¼</span>\n  <span class=\"hljs-comment\">// 2. è‡³å°‘å« 1 å€‹æ•¸å­—</span>\n  <span class=\"hljs-comment\">// 3. è‡³å°‘å« 1 å€‹è‹±æ–‡å­—æ¯(å¤§å¯«/å°å¯«)</span>\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/FcZOQUS.png\" alt=\"TDD Function fixture\" /></p>\n<h3>TDD cycle</h3>\n<h4>Red - [ Test 0 é˜²å‘† ]</h4>\n<p>åœ¨é©—è­‰çš„æ™‚å€™ï¼ŒåŸºæœ¬éƒ½æœƒæœ‰å€‹é˜²å‘†ï¼Œåªè¦å€¼æ˜¯ <code>&quot;&quot;</code>ã€<code>undefined</code>ã€<code>null</code>ï¼Œæ°¸é éƒ½æœƒè¢«è¦–ç‚º <code>invalid value</code>ï¼Œåœ¨ç¬¬ä¸€è¡Œå°±æœƒè¢« return äº†ï¼Œç¨‹å¼ä¸æœƒå†å¾€ä¸‹è·‘ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥æŠŠé€™ç•¶ä½œæœ€ç°¡å–®çš„é–‹å±€æ¸¬è©¦æ¡ˆä¾‹ã€‚</p>\n<ul>\n<li>åœ¨ <code>validate.spec.js</code> æ–°å¢å‚³å…¥ç©ºå­—ä¸²è¦è¿”å› <code>false</code> çš„æ¸¬è©¦ã€‚</li>\n<li><code>yarn test</code> =&gt; <strong>fail test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.spec.js</span>\n\n<span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;return false given an empty string&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">false</span>);\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/lrwP0l1.png\" alt=\"TDD Red 0\" /></p>\n<h4>Green - [ Test 0 é˜²å‘† ]</h4>\n<ul>\n<li>æ–°å¢ç„¡è…¦è§£ï¼Œå‘¼å« <code>validatePassword</code> ç›´æ¥ <code>return false</code></li>\n<li><code>yarn test</code> =&gt; <strong>pass test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.js</span>\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">validatePassword</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n};\n</code></pre>\n<p><img src=\"https://i.imgur.com/Wa1kiNC.png\" alt=\"TDD Green 0\" /></p>\n<h4>Refactor - [ Test 0 é˜²å‘† ]</h4>\n<p>Skipï¼Œç›®å‰é‚„æ²’æœ‰é‡æ§‹å¿…è¦ã€‚</p>\n<p>&lt;br/&gt;</p>\n<hr />\n<p>&lt;br/&gt;</p>\n<h4>Red - [ Test 1 é•·åº¦è‡³å°‘ 8 ç¢¼ ]</h4>\n<ul>\n<li>åœ¨ <code>validate.spec.js</code> ä¸­ï¼Œæ–°å¢å¯†ç¢¼é•·åº¦è¦å¤§æ–¼ 8 ç¢¼çš„æ¸¬è©¦</li>\n<li><code>yarn test</code> =&gt; <strong>fail test</strong></li>\n</ul>\n<div class=\"info\">\n<p>â„¹ï¸ é€™é‚Šç¬¬ä¸€å€‹ä¸€å®šæœƒéæ¸¬è©¦åƒæ•¸ <code>a12345678</code>ï¼Œå»ºè­°å¯ä»¥ç›´æ¥ä½¿ç”¨ PM è¦æ ¼æ›¸æä¾›çš„æˆåŠŸç¯„ä¾‹ç•¶åšæ¸¬è©¦åƒæ•¸ï¼Œæ°¸é ä¿è­‰é€™å€‹ä¸€å®šæ˜¯åˆæ³•å¯†ç¢¼ã€‚</p>\n</div>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.spec.js</span>\n\n<span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;at least 8 characters long&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;a12345678&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">true</span>);\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/95MNuxI.png\" alt=\"TDD Red 1\" /></p>\n<h4>Green - [ Test 1 é•·åº¦è‡³å°‘ 8 ç¢¼ ]</h4>\n<ul>\n<li><code>validate.js</code> æ–°å¢æª¢æŸ¥åƒæ•¸å¤§æ–¼ 8 çš„åˆ¤æ–·å¼</li>\n<li><code>yarn test</code> =&gt; <strong>pass test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.js</span>\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">validatePassword</span> = (<span class=\"hljs-params\">password</span>) =&gt; {\n  <span class=\"hljs-keyword\">if</span> (password.<span class=\"hljs-property\">length</span> &gt;= <span class=\"hljs-number\">8</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n};\n</code></pre>\n<p><img src=\"https://i.imgur.com/5HZodu7.png\" alt=\"TDD Green 1\" /></p>\n<h4>Refactor - [ Test 1 é•·åº¦è‡³å°‘ 8 ç¢¼ ]</h4>\n<p>Skipï¼Œç›®å‰é‚„æ²’æœ‰é‡æ§‹å¿…è¦ï¼Œç¨‹å¼ç¢¼é‚„ç®—æ˜“æ‡‚ã€‚</p>\n<p>&lt;br/&gt;</p>\n<hr />\n<p>&lt;br/&gt;</p>\n<h4>Red - [ Test 2 è‡³å°‘å« 1 å€‹æ•¸å­— ]</h4>\n<ul>\n<li>åœ¨ <code>validate.spec.js</code> ä¸­ï¼Œæ–°å¢æ˜¯å¦å«æ•¸å­—çš„æ¸¬è©¦</li>\n<li><code>yarn test</code> =&gt; <strong>fail test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.spec.js</span>\n\n<span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;contains at least one number&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;ABCDEFGHIJ&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">false</span>);\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/txLSZdu.png\" alt=\"TDD Red 2\" /></p>\n<h4>Green - [ Test 2 è‡³å°‘å« 1 å€‹æ•¸å­— ]</h4>\n<ul>\n<li><code>validate.js</code> æ–°å¢æª¢æŸ¥æ•¸å­—çš„æ­£å‰‡</li>\n<li><code>yarn test</code> =&gt; <strong>pass test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.js</span>\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">validatePassword</span> = (<span class=\"hljs-params\">password</span>) =&gt; {\n  <span class=\"hljs-keyword\">if</span> (password.<span class=\"hljs-property\">length</span> &gt;= <span class=\"hljs-number\">8</span> &amp;&amp; <span class=\"hljs-regexp\">/[0-9]/g</span>.<span class=\"hljs-title function_\">test</span>(password)) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n};\n</code></pre>\n<div class=\"info\">\n<p>â„¹ï¸ æ­£å‰‡æ¸¬è©¦æ–¹æ³•å¯åƒè€ƒ <a  href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test\" target=\"_blank\" rel=\"noreferrer noopener\">MDN - <code>regexObj.test(str)</code></a></p>\n</div>\n<p><img src=\"https://i.imgur.com/4UdIAWx.png\" alt=\"TDD Green 2\" /></p>\n<h4>Refactor - [ Test 2 è‡³å°‘å« 1 å€‹æ•¸å­— ]</h4>\n<ul>\n<li>ç›®å‰ <code>é•·åº¦å¤§æ–¼ 8 ç¢¼</code> å’Œ <code>æ•¸å­—æ­£å‰‡</code> æ“ åœ¨åŒä¸€å€‹ if åˆ¤æ–·å¼è£¡ï¼Œé™ä½æ˜“è®€æ€§ï¼Œå¯å°‡å…©å€‹æ‹†é–‹ï¼Œå„ç”¨è®Šæ•¸åšä»£è¡¨åšé‡æ§‹</li>\n<li><code>yarn test</code> =&gt; <strong>pass test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.js</span>\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">validatePassword</span> = (<span class=\"hljs-params\">password</span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> validLength = password.<span class=\"hljs-property\">length</span> &gt;= <span class=\"hljs-number\">8</span>;\n  <span class=\"hljs-keyword\">const</span> containsNumber = <span class=\"hljs-regexp\">/[0-9]/g</span>.<span class=\"hljs-title function_\">test</span>(password);\n\n  <span class=\"hljs-keyword\">return</span> validLength &amp;&amp; containsNumber;\n};\n</code></pre>\n<p><img src=\"https://i.imgur.com/fDfWhnC.png\" alt=\"TDD Refactor 2\" /></p>\n<p>&lt;br/&gt;</p>\n<hr />\n<p>&lt;br/&gt;</p>\n<h4>Red - [ Test 3 è‡³å°‘å« 1 å€‹è‹±æ–‡å­—æ¯(å¤§å¯«/å°å¯«) ]</h4>\n<ul>\n<li>åœ¨ <code>validate.spec.js</code> ä¸­ï¼Œæ–°å¢æ˜¯å¦å«è‹±æ–‡å­—æ¯çš„æ¸¬è©¦</li>\n<li><code>yarn test</code> =&gt; <strong>fail test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.spec.js</span>\n\n<span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;contains at least one letter&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;123456789&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">false</span>);\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/OsrfSHE.png\" alt=\"TDD RED 3\" /></p>\n<h4>Green - [ Test 3 è‡³å°‘å« 1 å€‹è‹±æ–‡å­—æ¯(å¤§å¯«/å°å¯«) ]</h4>\n<ul>\n<li><code>validate.js</code> æ–°å¢æª¢æŸ¥è‹±æ–‡å­—æ¯çš„æ­£å‰‡</li>\n<li><code>yarn test</code> =&gt; <strong>pass test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.js</span>\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">validatePassword</span> = (<span class=\"hljs-params\">password</span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> validLength = password.<span class=\"hljs-property\">length</span> &gt;= <span class=\"hljs-number\">8</span>;\n  <span class=\"hljs-keyword\">const</span> containsNumber = <span class=\"hljs-regexp\">/[0-9]/g</span>.<span class=\"hljs-title function_\">test</span>(password);\n  <span class=\"hljs-keyword\">const</span> containsLetter = <span class=\"hljs-regexp\">/[a-z]/g</span>.<span class=\"hljs-title function_\">test</span>(password);\n  <span class=\"hljs-keyword\">return</span> validLength &amp;&amp; containsNumber &amp;&amp; containsLetter;\n};\n</code></pre>\n<p><img src=\"https://i.imgur.com/Qd1snYu.png\" alt=\"TDD Green 3-1\" /></p>\n<p>å› ç‚ºè‹±æ–‡å­—æ¯é€™é‚Šç•¶åˆæ¢ä»¶æœ‰åˆ—ï¼Œè¦å¯æ¥å—å¤§å°å¯«ï¼Œæˆ‘å€‘å¯ä»¥å¤šå¢åŠ å¹¾å€‹ assertï¼Œä»¥ç¢ºä¿éœ€æ±‚æ¢ä»¶éƒ½æ»¿è¶³ã€‚</p>\n<ul>\n<li>åœ¨ <code>validate.spec.js</code> ä¸­ï¼Œæ–°å¢å…§æœ‰å«ä»¥<strong>å°å¯«è‹±æ–‡å­—æ¯çš„åƒæ•¸</strong>çš„æ¸¬è©¦</li>\n<li><code>yarn test</code> =&gt; <strong>pass test</strong></li>\n</ul>\n<p>ç›®å‰ç¨‹å¼å¯æ¥å—å°å¯«è‹±æ–‡å­—æ¯è¼¸å…¥çš„ï¼Œæ¥è‘—è©¦å¦ä¸€å€‹å¤§å¯«è‹±æ–‡å­—æ¯çš„æ¸¬è©¦æ¡ˆä¾‹ã€‚</p>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.spec.js</span>\n\n<span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;contains at least one letter&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;123456789&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">false</span>);\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;a123456789&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">true</span>);\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/SX3sNXK.png\" alt=\"TDD Green 3-2\" /></p>\n<h4>Red - [ Test 3 è‡³å°‘å« 1 å€‹è‹±æ–‡å­—æ¯(å¤§å¯«/å°å¯«) ]</h4>\n<ul>\n<li>åœ¨ <code>validate.spec.js</code> ä¸­ï¼Œæ–°å¢å…§æœ‰å«ä»¥<strong>å¤§å¯«è‹±æ–‡å­—æ¯çš„åƒæ•¸</strong>çš„æ¸¬è©¦</li>\n<li><code>yarn test</code> =&gt; <strong>fail test</strong></li>\n</ul>\n<p>é€™æ˜¯æ¸¬è©¦å±…ç„¶å¤±æ•—ï¼é€™æ™‚å€™å°±æœƒå›é ­æª¢è¦–åŠŸèƒ½ç¨‹å¼ï¼Œæ˜¯ä¸æ˜¯æ²’è€ƒæ…®åˆ°è‹±æ–‡å­—æ¯ç‚ºå¤§å¯«çš„æƒ…å¢ƒã€‚</p>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.spec.js</span>\n\n<span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;contains at least one letter&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;123456789&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">false</span>);\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;a123456789&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">true</span>);\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;A123456789&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">true</span>);\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/1FpS334.png\" alt=\"TDD Red 3-2\" /></p>\n<h4>Green - [ Test 3 è‡³å°‘å« 1 å€‹è‹±æ–‡å­—æ¯(å¤§å¯«/å°å¯«) ]</h4>\n<ul>\n<li><code>validate.js</code> è£œä¸Šæª¢æŸ¥å¤§å¯«è‹±æ–‡å­—æ¯çš„æ­£å‰‡</li>\n<li><code>yarn test</code> =&gt; <strong>pass test</strong></li>\n</ul>\n<p>é©—è­‰é€šéå¾Œï¼Œä»¥ TDD æµç¨‹é–‹ç™¼çš„å¯†ç¢¼é©—è­‰å‡½å¼å°±å®Œæˆäº† ğŸ‘</p>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.js</span>\n\n<span class=\"hljs-keyword\">const</span> containsLetter = <span class=\"hljs-regexp\">/[aA-zZ]/g</span>.<span class=\"hljs-title function_\">test</span>(password);\n</code></pre>\n<p><img src=\"https://i.imgur.com/V3G0JDb.png\" alt=\"TDD Green 3-3\" /></p>\n<h3>Final Code</h3>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.js</span>\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">validatePassword</span> = (<span class=\"hljs-params\">password</span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> validLength = password.<span class=\"hljs-property\">length</span> &gt;= <span class=\"hljs-number\">8</span>;\n  <span class=\"hljs-keyword\">const</span> containsNumber = <span class=\"hljs-regexp\">/[0-9]/g</span>.<span class=\"hljs-title function_\">test</span>(password);\n  <span class=\"hljs-keyword\">const</span> containsLetter = <span class=\"hljs-regexp\">/[aA-zZ]/g</span>.<span class=\"hljs-title function_\">test</span>(password);\n\n  <span class=\"hljs-keyword\">return</span> validLength &amp;&amp; containsNumber &amp;&amp; containsLetter;\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> validatePassword;\n</code></pre>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// validate.spec.js</span>\n\n<span class=\"hljs-keyword\">import</span> validatePassword <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;./validate&quot;</span>;\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&quot;validatePassword&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-comment\">// 1. è‡³å°‘ 8 ç¢¼</span>\n  <span class=\"hljs-comment\">// 2. è‡³å°‘å« 1 å€‹æ•¸å­—</span>\n  <span class=\"hljs-comment\">// 3. è‡³å°‘å« 1 å€‹è‹±æ–‡å­—æ¯(å¤§å¯«/å°å¯«)</span>\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;return false given an empty string&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">false</span>);\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;at least 8 characters long&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;a12345678&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">true</span>);\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;contains at least one number&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;ABCDEFGHIJ&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">false</span>);\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;contains at least one letter&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;123456789&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">false</span>);\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;a123456789&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">true</span>);\n    <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">validatePassword</span>(<span class=\"hljs-string\">&quot;A123456789&quot;</span>)).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-literal\">true</span>);\n  });\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/d3bAwPZ.png\" alt=\"Final Code - Function\" /></p>\n<ul>\n<li>æŠ€è¡“ä½¿ç”¨ï¼š vue-test-utils + Jest</li>\n<li>ç¯„ä¾‹ä¾†æºï¼š<a  href=\"https://www.youtube.com/watch?v=89Pl2Uok8xc\" target=\"_blank\" rel=\"noreferrer noopener\">TDD in JavaScript | Test Driven Development</a></li>\n</ul>\n<h2 id=\"ç¯„ä¾‹ - Dom\" title=\"ç¯„ä¾‹ - Dom\"><a href=\"#ç¯„ä¾‹ - Dom\">ç¯„ä¾‹ - Dom</a></h2>\n<h3>Target Dom - rating stars</h3>\n<p>ä¸€å€‹é¡¯ç¤ºæ˜Ÿç­‰çš„ componentï¼Œä¸‹æ–¹æœ‰é¡¯ç¤ºå…¶åˆ†æ•¸ã€‚</p>\n<p><strong>éœ€æ±‚æ¸…å–®</strong>ï¼š</p>\n<ul>\n<li>Test 1 - äº”å€‹æ˜Ÿæ˜Ÿ</li>\n<li>Test 2 - æ˜Ÿæ˜Ÿ active æ•¸é‡</li>\n<li>Test 3 - é¡¯ç¤ºçš„æ•¸å­—</li>\n</ul>\n<p><img src=\"https://i.imgur.com/ILwofUB.png\" alt=\"\" /></p>\n<h3>Fixture</h3>\n<p>æº–å‚™å¥½çµ„ä»¶<code>(Rating.vue)</code>å’Œæ¸¬è©¦æª”æ¡ˆ<code>(Rating.spec.js)</code>ï¼Œä¸¦å¯«ä¸€äº›æ¸¬è©¦çš„èµ·æ‰‹å¼ codeã€‚</p>\n<blockquote>\n<p><strong><code>wrapper</code></strong>ï¼šä»£è¡¨ Dom<br />\n<strong><code>beforeEach</code></strong>ï¼šæ¯æ¬¡æ¸¬è©¦æ™‚éƒ½æœƒåŸ·è¡Œï¼Œå¯åœ¨æ­¤éšæ®µå»ºç«‹æ¸¬è©¦è³‡æ–™ã€Dom<br />\n<strong><code>afterEach</code></strong>ï¼šæ¯æ¬¡æ¸¬è©¦å¾Œéƒ½æœƒåŸ·è¡Œï¼Œå¯åœ¨æ­¤éšæ®µç§»é™¤æ¸¬è©¦è³‡æ–™ã€Dom</p>\n<p>ä¸Šé¢æ–¹æ³•éƒ½æ˜¯ <strong>Jest</strong> æä¾›çš„ï¼Œå¯ä»¥åƒè€ƒ <a  href=\"https://jestjs.io/docs/setup-teardown\" target=\"_blank\" rel=\"noreferrer noopener\">Jest - Setup and Teardown</a>ã€‚</p>\n</blockquote>\n<pre class=\"hljs\"><code><span class=\"language-xml\">// Rating.vue\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span></span><span class=\"language-javascript\">&lt;/script&gt;\n</span></code></pre>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// Rating.spec.js</span>\n\n<span class=\"hljs-keyword\">import</span> { shallowMount } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;@vue/test-utils&quot;</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Rating</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;@/components/Rating.vue&quot;</span>;\n\n<span class=\"hljs-keyword\">let</span> wrapper = <span class=\"hljs-literal\">null</span>;\n\n<span class=\"hljs-comment\">// mount component before each test</span>\n<span class=\"hljs-title function_\">beforeEach</span>(<span class=\"hljs-function\">() =&gt;</span> {\n  wrapper = <span class=\"hljs-title function_\">shallowMount</span>(<span class=\"hljs-title class_\">Rating</span>);\n});\n\n<span class=\"hljs-comment\">// destroy component after each test</span>\n<span class=\"hljs-title function_\">afterEach</span>(<span class=\"hljs-function\">() =&gt;</span> {\n  wrapper.<span class=\"hljs-title function_\">destroy</span>();\n});\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&quot;Rating&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;renders the stars&quot;</span>,<span class=\"hljs-function\">() =&gt;</span> {})\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/HLiP41E.png\" alt=\"TDD Vue\" /></p>\n<h3>TDD cycle</h3>\n<h4>Red - [ Test 1 äº”å€‹æ˜Ÿæ˜Ÿ ]</h4>\n<ul>\n<li>åœ¨ <code>Rating.spec.js</code> ä¸­ï¼Œæ–°å¢æœ‰ <strong>className <code>.star</code> æ•¸é‡è¦æœ‰äº”å€‹</strong>çš„æ¸¬è©¦ã€‚</li>\n<li><code>yarn test</code> =&gt; <strong>fail test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// Rating.spec.js</span>\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&quot;Rating&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;renders the stars&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> stars = wrapper.<span class=\"hljs-title function_\">findAll</span>(<span class=\"hljs-string\">&quot;.star&quot;</span>);\n    <span class=\"hljs-title function_\">expect</span>(stars.<span class=\"hljs-property\">length</span>).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-number\">5</span>);\n  });\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/acGeVie.png\" alt=\"TDD Vue Red\" /></p>\n<h4>Green - [ Test 1 äº”å€‹æ˜Ÿæ˜Ÿ ]</h4>\n<ul>\n<li>æ–°å¢ç„¡è…¦è§£ <code>&lt;li class=&quot;star&quot;&gt;</code> *5</li>\n<li><code>yarn test</code> =&gt; <strong>pass test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"language-xml\">// Rating.vue\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;star&quot;</span> /&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;star&quot;</span> /&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;star&quot;</span> /&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;star&quot;</span> /&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;star&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n</span></code></pre>\n<p><img src=\"https://i.imgur.com/QsneYEm.png\" alt=\"TDD Vue Green\" /></p>\n<h4>Refactor - [ Test 1 äº”å€‹æ˜Ÿæ˜Ÿ ]</h4>\n<p>å¦‚æœä»Šå¤©éœ€æ±‚æ”¹æˆè¦ 10 é¡†æ˜Ÿæ˜Ÿå‘¢ï¼Ÿå†è¤‡è£½äº”å€‹ <code>&lt;li&gt;</code> è²¼ä¸Šï¼Ÿé‚£å¯¦åœ¨å¤ªå°ä¸èµ·å·¥ç¨‹å¸«é€™è·æ¥­äº†ï¼Œæ‰€ä»¥æˆ‘å€‘è¦æŠŠé€™æ®µ hard code é‡æ§‹ä¸€ä¸‹ï¼Œè®“æœ€å¤§æ˜Ÿæ˜Ÿæ•¸é‡ç”±å¤–é¢ç•¶ä½œ <code>props</code> å‚³é€²ä¾†ã€‚</p>\n<ul>\n<li><code>Rating.vue</code> æ–°å¢ <code>props</code> åƒæ•¸ <code>maxStars</code></li>\n<li><code>Rating.vue</code> ä¸­çš„ <code>&lt;li&gt;</code> ç”¨ <code>v-for</code> æ”¹å¯«</li>\n<li><code>Rating.spec.js</code> å† Mount æ™‚å‚³å…¥ <code>propsData</code></li>\n<li><code>yarn test</code> =&gt; <strong>pass test</strong></li>\n</ul>\n<p>ä¿æŒé€šéæ¸¬è©¦ç‹€æ…‹ï¼Awesomeï¼ç¬¬ä¸€å€‹ <code>TDD cycle</code> å°±å®Œæˆäº†ğŸ‘<br />\næ¥ä¸‹ä¾†å°±å†ä¾ç…§éœ€æ±‚æ¸…å–®ï¼Œé€²è¡Œä¸‹ä¸€å€‹ <code>Red-Green-Refactor</code>ã€‚</p>\n<pre class=\"hljs\"><code><span class=\"language-xml\">// Rating.vue\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">v-for</span>=<span class=\"hljs-string\">&quot;star in maxStars&quot;</span> <span class=\"hljs-attr\">:key</span>=<span class=\"hljs-string\">&quot;star&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;star&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span></span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {\n  <span class=\"hljs-attr\">props</span>: {\n    <span class=\"hljs-attr\">maxStars</span>: {\n      <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">Number</span>,\n      <span class=\"hljs-attr\">default</span>: <span class=\"hljs-number\">0</span>\n    }\n  }\n};\n</span><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</span></code></pre>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// Rating.spec.js</span>\n\n<span class=\"hljs-title function_\">beforeEach</span>(<span class=\"hljs-function\">() =&gt;</span> {\n  wrapper = <span class=\"hljs-title function_\">shallowMount</span>(<span class=\"hljs-title class_\">Rating</span>, {\n    <span class=\"hljs-attr\">propsData</span>: {\n      <span class=\"hljs-attr\">maxStars</span>: <span class=\"hljs-number\">5</span>\n    }\n  });\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/G3dPayZ.png\" alt=\"TDD Vue Refactor\" /></p>\n<p>&lt;br/&gt;</p>\n<hr />\n<p>&lt;br/&gt;</p>\n<h4>Red - [ Test 2 æ˜Ÿæ˜Ÿ active æ•¸é‡ ]</h4>\n<ul>\n<li>åœ¨ <code>Rating.spec.js</code> ä¸­ï¼Œæ–°å¢ 3 å€‹ <code>active</code> æ˜Ÿæ˜Ÿæ•¸çš„æ¸¬è©¦</li>\n<li><code>yarn test</code> =&gt; <strong>fail test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// Rating.spec.js</span>\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&quot;Rating&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;renders the stars&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> stars = wrapper.<span class=\"hljs-title function_\">findAll</span>(<span class=\"hljs-string\">&quot;.star&quot;</span>);\n    <span class=\"hljs-title function_\">expect</span>(stars.<span class=\"hljs-property\">length</span>).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-number\">5</span>);\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;renders the active stars&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> active = wrapper.<span class=\"hljs-title function_\">findAll</span>(<span class=\"hljs-string\">&quot;.star.active&quot;</span>);\n    <span class=\"hljs-title function_\">expect</span>(active.<span class=\"hljs-property\">length</span>).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-number\">3</span>);\n  });\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/Xnl9kC5.png\" alt=\"TDD Vue Red 2\" /></p>\n<h4>Green - [ Test 2 æ˜Ÿæ˜Ÿ active æ•¸é‡ ]</h4>\n<ul>\n<li>åœ¨ <code>Rating.vue</code> ä¸­ï¼ŒclassName æ¢ä»¶åˆ¤æ–·å¯« <code>star &lt;= 3</code> æ™‚ï¼ŒclassName æœƒè‡ªå‹•æ–°å¢ <code>active</code></li>\n<li><code>yarn test</code> =&gt; <strong>pass test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"language-xml\">// Rating.vue\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>\n        <span class=\"hljs-attr\">v-for</span>=<span class=\"hljs-string\">&quot;star in maxStars&quot;</span>\n        <span class=\"hljs-attr\">:key</span>=<span class=\"hljs-string\">&quot;star&quot;</span>\n        <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;star&quot;</span>\n        <span class=\"hljs-attr\">:class</span>=<span class=\"hljs-string\">&quot;{\n          active: star &lt;= 3\n        }&quot;</span>\n      /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n</span></code></pre>\n<p><img src=\"https://i.imgur.com/yuHnCaW.png\" alt=\"TDD Vue Green 2\" /></p>\n<h4>Refactor - [ Test 2 æ˜Ÿæ˜Ÿ active æ•¸é‡ ]</h4>\n<p>active æ˜Ÿæ•¸ï¼Œä¸€èˆ¬æ˜¯ç”±ä½¿ç”¨è€…æˆ–å¾Œç«¯ç”¢ç”Ÿçš„ï¼Œæ‰€ä»¥ä¸€æ¨£è¦æ”¹æˆç”±å¤–é¢ç”¨ props æ–¹å¼å‚³å…¥ã€‚</p>\n<ul>\n<li>åœ¨ <code>Rating.vue</code>ã€<code>Rating.spec.js</code> æ–°å¢ <code>props</code> åƒæ•¸ <code>initGrade</code></li>\n<li>className çš„æ¢ä»¶åˆ¤æ–·ï¼Œæ”¹ç”¨åƒæ•¸</li>\n<li><code>yarn test</code> =&gt; <strong>pass test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"language-xml\">// Rating.vue\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>\n        <span class=\"hljs-attr\">v-for</span>=<span class=\"hljs-string\">&quot;star in maxStars&quot;</span>\n        <span class=\"hljs-attr\">:key</span>=<span class=\"hljs-string\">&quot;star&quot;</span>\n        <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;star&quot;</span>\n        <span class=\"hljs-attr\">:class</span>=<span class=\"hljs-string\">&quot;{\n          active: star &lt;= initGrade\n        }&quot;</span>\n      /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span></span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {\n  <span class=\"hljs-attr\">props</span>: {\n    <span class=\"hljs-attr\">maxStars</span>: {\n      <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">Number</span>,\n      <span class=\"hljs-attr\">default</span>: <span class=\"hljs-number\">0</span>\n    },\n    <span class=\"hljs-attr\">initGrade</span>: {\n      <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">Number</span>,\n      <span class=\"hljs-attr\">default</span>: <span class=\"hljs-number\">0</span>\n    }\n  }\n};\n</span><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</span></code></pre>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// Rating.spec.js</span>\n\n<span class=\"hljs-title function_\">beforeEach</span>(<span class=\"hljs-function\">() =&gt;</span> {\n  wrapper = <span class=\"hljs-title function_\">shallowMount</span>(<span class=\"hljs-title class_\">Rating</span>, {\n    <span class=\"hljs-attr\">propsData</span>: {\n      <span class=\"hljs-attr\">maxStars</span>: <span class=\"hljs-number\">5</span>,\n      <span class=\"hljs-attr\">initGrade</span>: <span class=\"hljs-number\">3</span>\n    }\n  });\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/7Z3c3bm.png\" alt=\"TDD Vue Refactor 2\" /></p>\n<hr />\n<h4>Red - [Test 3 é¡¯ç¤ºçš„æ•¸å­—]</h4>\n<p>æœ€å¾Œä¸€å€‹æ¸¬è©¦äº†ï¼Œä¸‹æ–¹éœ€é¡¯ç¤ºç•¶å‰ active æ˜Ÿæ•¸å’Œå…¨éƒ¨æ˜Ÿæ•¸çš„è³‡è¨Šã€‚</p>\n<ul>\n<li>åœ¨ <code>Rating.spec.js</code> ä¸­æ–°å¢æ¸¬è©¦ï¼Œæ¢ä»¶ç‚ºä¸€å€‹ <code>.summary</code> çš„ domï¼Œå…§å®¹æ–‡å­—ç‚ºå‰æ˜Ÿæ•¸çš„è³‡è¨Š</li>\n<li><code>yarn test</code> =&gt; <strong>fail test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// Rating.spec.js</span>\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&quot;Rating&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;renders the stars&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> stars = wrapper.<span class=\"hljs-title function_\">findAll</span>(<span class=\"hljs-string\">&quot;.star&quot;</span>);\n    <span class=\"hljs-title function_\">expect</span>(stars.<span class=\"hljs-property\">length</span>).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-number\">5</span>);\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;renders the active stars&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> active = wrapper.<span class=\"hljs-title function_\">findAll</span>(<span class=\"hljs-string\">&quot;.star.active&quot;</span>);\n    <span class=\"hljs-title function_\">expect</span>(active.<span class=\"hljs-property\">length</span>).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-number\">3</span>);\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;renders a summary&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> summary = wrapper.<span class=\"hljs-title function_\">find</span>(<span class=\"hljs-string\">&quot;.summary&quot;</span>);\n    <span class=\"hljs-title function_\">expect</span>(summary.<span class=\"hljs-title function_\">text</span>()).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-string\">&quot;2 of 5&quot;</span>);\n  });\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/svpVyJT.png\" alt=\"TDD Vue Red 3\" /></p>\n<blockquote>\n<p>[vue-test-utils]: find did not return .summary, cannot call text() on empty Wrapper[color=#ff0000]</p>\n<p>æ„å³åœ¨ç›®å‰çµ„ä»¶å…§æ‰¾ä¸åˆ° <code>.summary</code> çš„ domï¼Œç„¡æ³•å‘¼å« text() æ–¹æ³•ã€‚</p>\n</blockquote>\n<h4>Green - [ Test 3 é¡¯ç¤ºçš„æ•¸å­— ]</h4>\n<ul>\n<li>å…ˆæ–°å¢ <code>&lt;div class=&quot;summary&quot; /&gt;</code></li>\n<li><code>yarn test</code> =&gt; <strong>fail test</strong>ï¼Œé›–ç„¶é‚„æ²’é€šéæ¸¬è©¦ï¼Œä½†é€™é‚Šä¹Ÿå¯ä»¥ç™¼ç¾ error message å·²ç¶“æ”¹è®Šäº†ï¼Œå¯ä»¥æ‰¾åˆ° <code>.summary</code>ï¼Œåªæ˜¯æ–‡å­—è¨Šæ¯ä¸å°ã€‚</li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"language-xml\">// Rating.vue\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>\n        <span class=\"hljs-attr\">v-for</span>=<span class=\"hljs-string\">&quot;star in maxStars&quot;</span>\n        <span class=\"hljs-attr\">:key</span>=<span class=\"hljs-string\">&quot;star&quot;</span>\n        <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;star&quot;</span>\n        <span class=\"hljs-attr\">:class</span>=<span class=\"hljs-string\">&quot;{\n          active: star &lt;= initGrade\n        }&quot;</span>\n      /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;summary&quot;</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n</span></code></pre>\n<p><img src=\"https://i.imgur.com/kdrV4eJ.png\" alt=\"TDD Vue Green - 1\" /></p>\n<blockquote>\n<p>Expected: â€œ2 of 5â€<br />\nReceived: â€œâ€[color=#ff0000]</p>\n</blockquote>\n<ul>\n<li>åœ¨ <code>Rating.vue</code> ç›´æ¥æŠŠæ–‡å­—å¯«è·Ÿæ¸¬è©¦æ¡ˆä¾‹ä¸€æ¨¡ä¸€æ¨£ <code>3 of 5</code></li>\n<li><code>yarn test</code> =&gt; <strong>pass test</strong></li>\n</ul>\n<pre class=\"hljs\"><code><span class=\"language-xml\">// Rating.vue\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>\n        <span class=\"hljs-attr\">v-for</span>=<span class=\"hljs-string\">&quot;star in maxStars&quot;</span>\n        <span class=\"hljs-attr\">:key</span>=<span class=\"hljs-string\">&quot;star&quot;</span>\n        <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;star&quot;</span>\n        <span class=\"hljs-attr\">:class</span>=<span class=\"hljs-string\">&quot;{\n          active: star &lt;= initGrade\n        }&quot;</span>\n      /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;summary&quot;</span>&gt;</span>3 of 5<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n</span></code></pre>\n<p><img src=\"https://i.imgur.com/nQrsIdq.png\" alt=\"TDD Vue Green - 2\" /></p>\n<h4>Refactor - [ Test 3 é¡¯ç¤ºçš„æ•¸å­— ]</h4>\n<ul>\n<li><code>.summary</code> å…§çš„æ–‡å­—é¡¯ç¤ºæ”¹ç”¨ <code>props</code> åƒæ•¸</li>\n<li><code>yarn test</code> =&gt; <strong>pass test</strong></li>\n</ul>\n<p>Bravo ! æ•´å€‹ TDD æµç¨‹å®Œæˆäº†ï¼</p>\n<pre class=\"hljs\"><code><span class=\"language-xml\">// Rating.vue\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>\n        <span class=\"hljs-attr\">v-for</span>=<span class=\"hljs-string\">&quot;star in maxStars&quot;</span>\n        <span class=\"hljs-attr\">:key</span>=<span class=\"hljs-string\">&quot;star&quot;</span>\n        <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;star&quot;</span>\n        <span class=\"hljs-attr\">:class</span>=<span class=\"hljs-string\">&quot;{\n          active: star &lt;= initGrade\n        }&quot;</span>\n      /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;summary&quot;</span>&gt;</span>{{ initGrade }} of {{ maxStars }}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n</span></code></pre>\n<p><img src=\"https://i.imgur.com/4iXT529.png\" alt=\"TDD Vue Refactor\" /></p>\n<h3>Final Code</h3>\n<pre class=\"hljs\"><code><span class=\"language-xml\">// Rating.vue\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>\n        <span class=\"hljs-attr\">v-for</span>=<span class=\"hljs-string\">&quot;star in maxStars&quot;</span>\n        <span class=\"hljs-attr\">:key</span>=<span class=\"hljs-string\">&quot;star&quot;</span>\n        <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;star&quot;</span>\n        <span class=\"hljs-attr\">:class</span>=<span class=\"hljs-string\">&quot;{\n          active: star &lt;= initGrade\n        }&quot;</span>\n      /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;summary&quot;</span>&gt;</span>{{ initGrade }} of {{ maxStars }}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span></span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {\n  <span class=\"hljs-attr\">props</span>: {\n    <span class=\"hljs-attr\">maxStars</span>: {\n      <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">Number</span>,\n      <span class=\"hljs-attr\">default</span>: <span class=\"hljs-number\">0</span>\n    },\n    <span class=\"hljs-attr\">initGrade</span>: {\n      <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">Number</span>,\n      <span class=\"hljs-attr\">default</span>: <span class=\"hljs-number\">0</span>\n    }\n  }\n};\n</span><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</span></code></pre>\n<pre class=\"hljs\"><code><span class=\"hljs-comment\">// Rating.spec.js</span>\n<span class=\"hljs-keyword\">import</span> { shallowMount } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;@vue/test-utils&quot;</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Rating</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;@/components/Rating.vue&quot;</span>;\n\n<span class=\"hljs-keyword\">let</span> wrapper = <span class=\"hljs-literal\">null</span>;\n\n<span class=\"hljs-comment\">// mount component before each test</span>\n<span class=\"hljs-title function_\">beforeEach</span>(<span class=\"hljs-function\">() =&gt;</span> {\n  wrapper = <span class=\"hljs-title function_\">shallowMount</span>(<span class=\"hljs-title class_\">Rating</span>, {\n    <span class=\"hljs-attr\">propsData</span>: {\n      <span class=\"hljs-attr\">maxStars</span>: <span class=\"hljs-number\">5</span>,\n      <span class=\"hljs-attr\">initGrade</span>: <span class=\"hljs-number\">3</span>\n    }\n  });\n});\n\n<span class=\"hljs-comment\">// destroy component after each test</span>\n<span class=\"hljs-title function_\">afterEach</span>(<span class=\"hljs-function\">() =&gt;</span> {\n  wrapper.<span class=\"hljs-title function_\">destroy</span>();\n});\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&quot;Rating&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;renders the stars&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> stars = wrapper.<span class=\"hljs-title function_\">findAll</span>(<span class=\"hljs-string\">&quot;.star&quot;</span>);\n    <span class=\"hljs-title function_\">expect</span>(stars.<span class=\"hljs-property\">length</span>).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-number\">5</span>);\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;renders the active stars&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> active = wrapper.<span class=\"hljs-title function_\">findAll</span>(<span class=\"hljs-string\">&quot;.star.active&quot;</span>);\n    <span class=\"hljs-title function_\">expect</span>(active.<span class=\"hljs-property\">length</span>).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-number\">3</span>);\n  });\n\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&quot;renders a summary&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> summary = wrapper.<span class=\"hljs-title function_\">find</span>(<span class=\"hljs-string\">&quot;.summary&quot;</span>);\n    <span class=\"hljs-title function_\">expect</span>(summary.<span class=\"hljs-title function_\">text</span>()).<span class=\"hljs-title function_\">toBe</span>(<span class=\"hljs-string\">&quot;3 of 5&quot;</span>);\n  });\n});\n</code></pre>\n<p><img src=\"https://i.imgur.com/LEanr6L.png\" alt=\"TDD Result\" /></p>\n<ul>\n<li>æŠ€è¡“ä½¿ç”¨ï¼š vue-test-utils + Jest</li>\n</ul>\n<hr />\n<h2 id=\"åƒè€ƒè³‡æ–™\" title=\"åƒè€ƒè³‡æ–™\"><a href=\"#åƒè€ƒè³‡æ–™\">åƒè€ƒè³‡æ–™</a></h2>\n<ul>\n<li>ç¯„ä¾‹ä¾†æºï¼š<a  href=\"https://www.youtube.com/watch?v=DD1fEhcEzY8\" target=\"_blank\" rel=\"noreferrer noopener\">Test driven development with Vue.js by Sarah Dayan</a></li>\n</ul>\n<h6>tags: <code>test</code>ã€<code>TDD</code></h6>\n","toc":{"title":"æ‰‹æŠŠæ‰‹ä¸€èµ· TDD","subtitles":["TDD Flow","ç¯„ä¾‹ - Function","ç¯„ä¾‹ - Dom","åƒè€ƒè³‡æ–™"]}}